# 2.1 Job Requisitions

## 2.1.1 Business Purpose

Job Requisitions provide a structured workflow for requesting, approving, and managing new job openings within the organization. This process ensures proper budget validation, headcount compliance, departmental coordination, and regulatory adherence while maintaining visibility into recruitment needs and facilitating efficient talent acquisition planning and execution.

## 2.1.2 Business Scope

Enable comprehensive job requisition management including request creation, multi-level approval workflows, budget validation, position grading, compliance checks, and integration with recruitment processes. The system supports automated routing, deadline tracking, status monitoring, and audit trails while ensuring alignment with organizational hiring policies and workforce planning strategies.

## 2.1.3 Job Requisition Master Schema

```
Table: job_requisition
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- requisition_number: VARCHAR(50) (Unique, Indexed)
- requisition_title: VARCHAR(200) (Required)
- requisition_type: ENUM('New Position', 'Replacement', 'Backfill', 'Contract', 'Intern', 'Promotion')
- priority: ENUM('Low', 'Medium', 'High', 'Urgent', 'Critical')
- status: ENUM('Draft', 'Submitted', 'Pending Approval', 'Approved', 'Rejected', 'On Hold', 'Cancelled', 'Filled', 'Closed')
- department_id: UUID (Foreign Key to department)
- position_id: UUID (Foreign Key to position)
- location_id: UUID (Foreign Key to location)
- cost_center_code: VARCHAR(50)
- budget_code: VARCHAR(50)
- headcount_approval_id: UUID (Foreign Key to headcount_approval)
- requested_by_user_id: UUID (Foreign Key to user)
- hiring_manager_id: UUID (Foreign Key to employee)
- recruiter_id: UUID (Foreign Key to user)
- position_count: INTEGER (Default: 1)
- employment_type: ENUM('Full Time', 'Part Time', 'Contract', 'Intern', 'Temporary', 'Consultant')
- work_schedule: ENUM('Standard', 'Flexible', 'Remote', 'Hybrid', 'Shift Work')
- salary_min: DECIMAL(15,2)
- salary_max: DECIMAL(15,2)
- currency_code: VARCHAR(10) (Default: 'USD')
- salary_basis: ENUM('Annual', 'Monthly', 'Hourly', 'Project')
- target_start_date: DATE
- requested_fill_date: DATE
- actual_fill_date: DATE
- time_to_fill_days: INTEGER
- justification: TEXT
- job_description: TEXT
- requirements: TEXT
- qualifications: TEXT
- interview_process: JSON (Interview stages and requirements)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- submitted_at: TIMESTAMP
- approved_at: TIMESTAMP
- approved_by_user_id: UUID (Foreign Key to user)
- rejection_reason: TEXT
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_requisition_number (requisition_number)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_position_id (position_id)
- INDEX idx_status (status)
- INDEX idx_priority (priority)
- INDEX idx_requested_by (requested_by_user_id)
- INDEX idx_hiring_manager (hiring_manager_id)
- INDEX idx_recruiter (recruiter_id)
- INDEX idx_target_start_date (target_start_date)
- INDEX idx_submitted_at (submitted_at)

Constraints:
- fk_requisition_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_requisition_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_requisition_position FOREIGN KEY (position_id) REFERENCES position(id)
- fk_requisition_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_requisition_requested_by FOREIGN KEY (requested_by_user_id) REFERENCES user(id)
- fk_requisition_hiring_manager FOREIGN KEY (hiring_manager_id) REFERENCES employee(id)
- fk_requisition_recruiter FOREIGN KEY (recruiter_id) REFERENCES user(id)
- fk_requisition_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- chk_position_count_positive CHECK (position_count > 0)
- chk_salary_range CHECK (salary_max >= salary_min OR salary_min IS NULL OR salary_max IS NULL)
```

## 2.1.4 Requisition Approval Workflow Schema

```
Table: requisition_approval_workflow
Fields:
- id: UUID (Primary Key)
- requisition_id: UUID (Foreign Key to job_requisition)
- workflow_template_id: UUID (Foreign Key to workflow_template)
- approval_level: INTEGER (Required)
- approver_type: ENUM('Manager', 'Department Head', 'HR Business Partner', 'Finance', 'Executive', 'Specific User')
- approver_id: UUID (Foreign Key to user)
- status: ENUM('Pending', 'Approved', 'Rejected', 'Delegated', 'Escalated')
- decision: ENUM('Approve', 'Reject', 'Request More Info', 'Delegate')
- comments: TEXT
- attachments: JSON (Array of document IDs)
- delegated_to_user_id: UUID (Foreign Key to user)
- escalated_to_user_id: UUID (Foreign Key to user)
- due_date: TIMESTAMP
- action_date: TIMESTAMP
- approval_order: INTEGER
- is_parallel: BOOLEAN (Default: FALSE)
- auto_approve: BOOLEAN (Default: FALSE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_workflow_template (workflow_template_id)
- INDEX idx_approver_id (approver_id)
- INDEX idx_approval_level (approval_level)
- INDEX idx_status (status)
- INDEX idx_decision (decision)
- INDEX idx_due_date (due_date)
- INDEX idx_approval_order (approval_order)

Constraints:
- fk_req_approval_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_req_approval_template FOREIGN KEY (workflow_template_id) REFERENCES workflow_template(id)
- fk_req_approval_approver FOREIGN KEY (approver_id) REFERENCES user(id)
- fk_req_approval_delegated_to FOREIGN KEY (delegated_to_user_id) REFERENCES user(id)
- fk_req_approval_escalated_to FOREIGN KEY (escalated_to_user_id) REFERENCES user(id)
```

## 2.1.5 Budget Validation Schema

```
Table: requisition_budget_validation
Fields:
- id: UUID (Primary Key)
- requisition_id: UUID (Foreign Key to job_requisition)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- cost_center_code: VARCHAR(50)
- budget_year: INTEGER (Required)
- budget_period: ENUM('Annual', 'Quarterly', 'Monthly', 'Project')
- total_budget_amount: DECIMAL(15,2)
- budget_utilized: DECIMAL(15,2)
- budget_remaining: DECIMAL(15,2)
- requisition_cost: DECIMAL(15,2)
- validation_status: ENUM('Within Budget', 'Over Budget', 'Budget Exceeded', 'No Budget', 'Pending Approval')
- approval_required: BOOLEAN (Default: FALSE)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- approval_comments: TEXT
- budget_impact_analysis: JSON (Impact on other positions/projects)
- alternative_funding_source: VARCHAR(200)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_cost_center (cost_center_code)
- INDEX idx_budget_year (budget_year)
- INDEX idx_validation_status (validation_status)

Constraints:
- fk_budget_validation_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_budget_validation_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_budget_validation_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_budget_validation_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- chk_budget_year_positive CHECK (budget_year > 0)
```

## 2.1.6 Headcount Management Schema

```
Table: headcount_management
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- position_id: UUID (Foreign Key to position)
- location_id: UUID (Foreign Key to location)
- headcount_type: ENUM('Planned', 'Approved', 'Filled', 'Vacant', 'On Hold', 'Budgeted')
- total_headcount: INTEGER (Default: 0)
- filled_headcount: INTEGER (Default: 0)
- vacant_headcount: INTEGER (Default: 0)
- approved_headcount: INTEGER (Default: 0)
- budgeted_headcount: INTEGER (Default: 0)
- effective_date: DATE (Required)
- expiry_date: DATE
- headcount_plan_id: UUID (Foreign Key to headcount_plan)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_position_id (position_id)
- INDEX idx_location_id (location_id)
- INDEX idx_headcount_type (headcount_type)
- INDEX idx_effective_date (effective_date)
- INDEX idx_expiry_date (expiry_date)

Constraints:
- fk_headcount_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_headcount_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_headcount_position FOREIGN KEY (position_id) REFERENCES position(id)
- fk_headcount_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_headcount_plan FOREIGN KEY (headcount_plan_id) REFERENCES headcount_plan(id)
- fk_headcount_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_headcount_totals CHECK (total_headcount >= filled_headcount AND total_headcount >= vacant_headcount)
```

## 2.1.7 Requisition Compliance Check Schema

```
Table: requisition_compliance_check
Fields:
- id: UUID (Primary Key)
- requisition_id: UUID (Foreign Key to job_requisition)
- company_id: UUID (Foreign Key to company)
- compliance_type: ENUM('EEO', 'OFCCP', 'ADA', 'Local Labor Law', 'Immigration', 'Industry Specific')
- check_name: VARCHAR(200) (Required)
- check_description: TEXT
- check_status: ENUM('Pending', 'Passed', 'Failed', 'Waiver Required', 'Not Applicable')
- check_result: TEXT
- failure_reason: TEXT
- waiver_approved: BOOLEAN (Default: FALSE)
- waiver_approved_by_user_id: UUID (Foreign Key to user)
- waiver_approved_at: TIMESTAMP
- waiver_reason: TEXT
- supporting_documents: JSON (Array of document IDs)
- checked_by_user_id: UUID (Foreign Key to user)
- checked_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_company_id (company_id)
- INDEX idx_compliance_type (compliance_type)
- INDEX idx_check_status (check_status)
- INDEX idx_checked_by (checked_by_user_id)
- INDEX idx_checked_at (checked_at)

Constraints:
- fk_compliance_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_compliance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_compliance_waiver_approved_by FOREIGN KEY (waiver_approved_by_user_id) REFERENCES user(id)
- fk_compliance_checked_by FOREIGN KEY (checked_by_user_id) REFERENCES user(id)
```

## 2.1.8 Requisition Posting Schema

```
Table: requisition_posting
Fields:
- id: UUID (Primary Key)
- requisition_id: UUID (Foreign Key to job_requisition)
- posting_channel: ENUM('Company Website', 'Job Boards', 'LinkedIn', 'Social Media', 'Referrals', 'Agency', 'Campus', 'Internal')
- channel_name: VARCHAR(200) (Required)
- posting_url: VARCHAR(1000)
- posting_title: VARCHAR(500)
- posting_description: TEXT
- posting_status: ENUM('Draft', 'Posted', 'Paused', 'Closed', 'Expired')
- posted_date: DATE
- expiry_date: DATE
- application_count: INTEGER (Default: 0)
- view_count: INTEGER (Default: 0)
- cost_per_posting: DECIMAL(10,2)
- currency_code: VARCHAR(10) (Default: 'USD')
- posting_duration_days: INTEGER
- auto_renew: BOOLEAN (Default: FALSE)
- contact_email: VARCHAR(200)
- contact_phone: VARCHAR(50)
- application_instructions: TEXT
- posted_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_posting_channel (posting_channel)
- INDEX idx_posting_status (posting_status)
- INDEX idx_posted_date (posted_date)
- INDEX idx_expiry_date (expiry_date)
- INDEX idx_posted_by (posted_by_user_id)

Constraints:
- fk_posting_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_posting_posted_by FOREIGN KEY (posted_by_user_id) REFERENCES user(id)
- chk_posting_duration_positive CHECK (posting_duration_days > 0)
```

## 2.1.9 Requisition Analytics Schema

```
Table: requisition_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- requisition_id: UUID (Foreign Key to job_requisition)
- department_id: UUID (Foreign Key to department)
- position_id: UUID (Foreign Key to position)
- location_id: UUID (Foreign Key to location)
- metric_type: ENUM('Time to Fill', 'Cost per Hire', 'Source Effectiveness', 'Application Rate', 'Conversion Rate', 'Quality of Hire')
- metric_value: DECIMAL(15,2)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- measurement_date: DATE (Required)
- comparison_period: ENUM('Week', 'Month', 'Quarter', 'Year')
- additional_metrics: JSON (Additional KPIs and measurements)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_department_id (department_id)
- INDEX idx_position_id (position_id)
- INDEX idx_metric_type (metric_type)
- INDEX idx_measurement_date (measurement_date)
- INDEX idx_comparison_period (comparison_period)

Constraints:
- fk_req_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_req_analytics_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_req_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_req_analytics_position FOREIGN KEY (position_id) REFERENCES position(id)
- fk_req_analytics_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_req_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
```

## 2.1.10 Requisition Template Schema

```
Table: requisition_template
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- template_name: VARCHAR(200) (Required)
- template_type: ENUM('Standard', 'Executive', 'Technical', 'Sales', 'Customer Service', 'Operations', 'Finance', 'HR', 'IT')
- template_description: TEXT
- default_employment_type: ENUM('Full Time', 'Part Time', 'Contract', 'Intern', 'Temporary', 'Consultant')
- default_work_schedule: ENUM('Standard', 'Flexible', 'Remote', 'Hybrid', 'Shift Work')
- default_salary_basis: ENUM('Annual', 'Monthly', 'Hourly', 'Project')
- job_description_template: TEXT
- requirements_template: TEXT
- qualifications_template: TEXT
- interview_process_template: JSON
- approval_workflow_template_id: UUID (Foreign Key to workflow_template)
- required_fields: JSON (Array of required field names)
- field_validations: JSON (Field validation rules)
- is_active: BOOLEAN (Default: TRUE)
- usage_count: INTEGER (Default: 0)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_template_type (template_type)
- INDEX idx_is_active (is_active)
- INDEX idx_usage_count (usage_count)

Constraints:
- fk_req_template_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_req_template_workflow FOREIGN KEY (approval_workflow_template_id) REFERENCES workflow_template(id)
- fk_req_template_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_usage_count_positive CHECK (usage_count >= 0)
```

## 2.1.11 Requisition Audit Log Schema

```
Table: requisition_audit_log
Fields:
- id: UUID (Primary Key)
- requisition_id: UUID (Foreign Key to job_requisition)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Submit', 'Approve', 'Reject', 'Cancel', 'On Hold', 'Close', 'Delete')
- entity_type: ENUM('Requisition', 'Approval', 'Budget', 'Compliance', 'Posting', 'Template')
- entity_id: UUID
- old_values: JSON (Previous values)
- new_values: JSON (Updated values)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_performed_by (performed_by_user_id)
- INDEX idx_timestamp (timestamp)

Constraints:
- fk_req_audit_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_req_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_req_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
