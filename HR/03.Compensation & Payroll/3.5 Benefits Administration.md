# 3.5 Benefits Administration

## 3.5.1 Business Purpose

Benefits Administration provides comprehensive management of employee benefit programs including health insurance, dental and vision plans, life insurance, retirement savings, flexible spending accounts, and other welfare benefits. This ensures regulatory compliance, cost-effective benefit management, employee satisfaction, and streamlined enrollment processes while supporting multiple benefit providers, complex eligibility rules, and integration with payroll processing systems.

## 3.5.2 Business Scope

Enable complete benefits administration management including benefit plan configuration, employee enrollment management, premium calculations, provider integrations, compliance reporting, and employee self-service access. The system supports automated eligibility verification, flexible enrollment periods, cost modeling, benefits analytics, and audit trails while ensuring accuracy, timeliness, and regulatory compliance across all benefit programs and jurisdictions.

## 3.5.3 Benefit Plan Master Schema

```
Table: benefit_plan
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_code: VARCHAR(50) (Required, Unique, Indexed)
- plan_name: VARCHAR(200) (Required)
- plan_type: ENUM('Health Insurance', 'Dental Insurance', 'Vision Insurance', 'Life Insurance', 'AD&D', 'Disability Insurance', 'Retirement 401k', 'Retirement 403b', 'FSA', 'HSA', 'HRA', 'Commuter Benefits', 'Educational Assistance', 'Wellness Program', 'Other')
- plan_category: ENUM('Medical', 'Dental', 'Vision', 'Life', 'Disability', 'Retirement', 'Flexible Spending', 'Transportation', 'Wellness', 'Other')
- provider_name: VARCHAR(200) (Required)
- provider_contact: JSON (Provider contact information)
- plan_description: TEXT
- plan_summary: TEXT
- eligibility_rules: JSON (Eligibility criteria and rules)
- enrollment_type: ENUM('Open Enrollment', 'New Hire', 'Qualifying Event', 'Continuous', 'Voluntary', 'Mandatory')
- enrollment_periods: JSON (Open enrollment and special enrollment periods)
- contribution_structure: ENUM('Employer Paid', 'Employee Paid', 'Shared', 'Tiered', 'Age Banded', 'Smoker Status')
- employer_contribution_type: ENUM('Fixed Amount', 'Percentage', 'Full Coverage', 'Tiered')
- employer_contribution_amount: DECIMAL(15,2) (Default: 0.00)
- employer_contribution_percentage: DECIMAL(5,2) (Default: 0.00)
- employee_contribution_required: BOOLEAN (Default: TRUE)
- minimum_participation_rate: DECIMAL(5,2) (Default: 0.00)
- waiting_period_days: INTEGER (Default: 0)
- probation_period_days: INTEGER (Default: 0)
- coverage_levels: JSON (Coverage levels and options)
- benefit_limits: JSON (Coverage limits and maximums)
- deductible_options: JSON (Deductible options and amounts)
- copayment_structure: JSON (Copayment amounts and structure)
- coinsurance_rates: JSON (Coinsurance percentages)
- out_of_pocket_maximum: DECIMAL(15,2) (Default: 0.00)
- network_type: ENUM('PPO', 'HMO', 'EPO', 'POS', 'Indemnity', 'HDHP')
- in_network_coverage: JSON (In-network coverage details)
- out_of_network_coverage: JSON (Out-of-network coverage details)
- prescription_drug_coverage: JSON (Prescription drug coverage details)
- dependent_coverage: JSON (Dependent coverage rules and options)
- life_events: JSON (Qualifying life events for enrollment)
- compliance_requirements: JSON (Regulatory compliance requirements)
- plan_documents: JSON (Plan documents and summaries)
- is_active: BOOLEAN (Default: TRUE)
- effective_date: DATE (Required)
- expiry_date: DATE
- renewal_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_plan_code_company (plan_code, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_type (plan_type)
- INDEX idx_plan_category (plan_category)
- INDEX idx_provider_name (provider_name)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_date (effective_date)
- INDEX idx_renewal_date (renewal_date)

Constraints:
- fk_benefit_plan_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_benefit_plan_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_benefit_plan_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- chk_contribution_percentage_valid CHECK (employer_contribution_percentage BETWEEN 0 AND 100)
- chk_minimum_participation_valid CHECK (minimum_participation_rate BETWEEN 0 AND 100)
```

## 3.5.4 Employee Benefit Enrollment Schema

```
Table: employee_benefit_enrollment
Fields:
- id: UUID (Primary Key)
- employee_id: UUID (Foreign Key to employee)
- company_id: UUID (Foreign Key to company)
- benefit_plan_id: UUID (Foreign Key to benefit_plan)
- enrollment_id: VARCHAR(50) (Required, Unique, Indexed)
- enrollment_type: ENUM('New Hire', 'Open Enrollment', 'Qualifying Event', 'Continuous', 'Voluntary', 'Mandatory')
- enrollment_status: ENUM('Pending', 'Approved', 'Active', 'Cancelled', 'Terminated', 'Suspended', 'Denied')
- enrollment_date: DATE (Required)
- effective_date: DATE (Required)
- termination_date: DATE
- coverage_level: ENUM('Employee Only', 'Employee + Spouse', 'Employee + Children', 'Family', 'Custom')
- coverage_tier: VARCHAR(100)
- dependent_coverage: JSON (Dependent coverage details)
- employee_contribution_amount: DECIMAL(15,2) (Default: 0.00)
- employer_contribution_amount: DECIMAL(15,2) (Default: 0.00)
- total_premium_amount: DECIMAL(15,2) (Default: 0.00)
- contribution_frequency: ENUM('Pay Period', 'Monthly', 'Quarterly', 'Annual')
- payment_method: ENUM('Payroll Deduction', 'Direct Bill', 'Employer Paid', 'Mixed')
- deductible_amount: DECIMAL(15,2) (Default: 0.00)
- out_of_pocket_maximum: DECIMAL(15,2) (Default: 0.00)
- copayment_amount: DECIMAL(15,2) (Default: 0.00)
- coinsurance_percentage: DECIMAL(5,2) (Default: 0.00)
- life_event_type: ENUM('Marriage', 'Birth', 'Adoption', 'Divorce', 'Death', 'Job Loss', 'Spouse Job Loss', 'Change in Hours', 'Relocation', 'Other')
- life_event_date: DATE
- life_event_documentation: JSON (Supporting documentation)
- waiver_reason: TEXT
- waiver_approved: BOOLEAN (Default: FALSE)
- waiver_approved_by_user_id: UUID (Foreign Key to user)
- waiver_approved_at: TIMESTAMP
- beneficiary_designation: JSON (Beneficiary information)
- emergency_contact: JSON (Emergency contact information)
- provider_selection: JSON (Selected healthcare providers)
- enrollment_preferences: JSON (Employee preferences and selections)
- communication_preferences: JSON (Communication and notification preferences)
- created_by_user_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_enrollment_id_company (enrollment_id, company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_company_id (company_id)
- INDEX idx_benefit_plan_id (benefit_plan_id)
- INDEX idx_enrollment_type (enrollment_type)
- INDEX idx_enrollment_status (enrollment_status)
- INDEX idx_effective_date (effective_date)
- INDEX idx_termination_date (termination_date)

Constraints:
- fk_employee_enrollment_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_employee_enrollment_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_employee_enrollment_plan FOREIGN KEY (benefit_plan_id) REFERENCES benefit_plan(id)
- fk_employee_enrollment_waiver_approved_by FOREIGN KEY (waiver_approved_by_user_id) REFERENCES user(id)
- fk_employee_enrollment_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_employee_enrollment_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- chk_coinsurance_percentage_valid CHECK (coinsurance_percentage BETWEEN 0 AND 100)
```

## 3.5.5 Dependent Coverage Schema

```
Table: dependent_coverage
Fields:
- id: UUID (Primary Key)
- enrollment_id: UUID (Foreign Key to employee_benefit_enrollment)
- employee_id: UUID (Foreign Key to employee)
- company_id: UUID (Foreign Key to company)
- dependent_id: UUID (Foreign Key to dependent)
- relationship_type: ENUM('Spouse', 'Domestic Partner', 'Child', 'Stepchild', 'Adopted Child', 'Disabled Child', 'Parent', 'Other')
- coverage_status: ENUM('Active', 'Pending', 'Terminated', 'Suspended', 'Denied')
- coverage_start_date: DATE (Required)
- coverage_end_date: DATE
- eligibility_verified: BOOLEAN (Default: FALSE)
- eligibility_verification_date: DATE
- eligibility_documentation: JSON (Eligibility verification documents)
- student_status: BOOLEAN (Default: FALSE)
- student_verification_date: DATE
- disability_status: BOOLEAN (Default: FALSE)
- disability_verification_date: DATE
- age_limit: INTEGER (Default: 26)
- coverage_extension: JSON (Coverage extension details)
- premium_amount: DECIMAL(15,2) (Default: 0.00)
- employer_contribution: DECIMAL(15,2) (Default: 0.00)
- employee_contribution: DECIMAL(15,2) (Default: 0.00)
- copayment_amount: DECIMAL(15,2) (Default: 0.00)
- deductible_amount: DECIMAL(15,2) (Default: 0.00)
- coverage_limits: JSON (Specific coverage limits for dependent)
- special_conditions: JSON (Special coverage conditions)
- termination_reason: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_enrollment_id (enrollment_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_company_id (company_id)
- INDEX idx_dependent_id (dependent_id)
- INDEX idx_relationship_type (relationship_type)
- INDEX idx_coverage_status (coverage_status)
- INDEX idx_coverage_start_date (coverage_start_date)
- INDEX idx_coverage_end_date (coverage_end_date)

Constraints:
- fk_dependent_coverage_enrollment FOREIGN KEY (enrollment_id) REFERENCES employee_benefit_enrollment(id)
- fk_dependent_coverage_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_dependent_coverage_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_dependent_coverage_dependent FOREIGN KEY (dependent_id) REFERENCES dependent(id)
- fk_dependent_coverage_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_age_limit_positive CHECK (age_limit > 0)
```

## 3.5.6 Benefit Premium Calculation Schema

```
Table: benefit_premium_calculation
Fields:
- id: UUID (Primary Key)
- enrollment_id: UUID (Foreign Key to employee_benefit_enrollment)
- employee_id: UUID (Foreign Key to employee)
- company_id: UUID (Foreign Key to company)
- benefit_plan_id: UUID (Foreign Key to benefit_plan)
- calculation_period: ENUM('Pay Period', 'Monthly', 'Quarterly', 'Annual')
- calculation_date: DATE (Required)
- base_premium_amount: DECIMAL(15,2) (Default: 0.00)
- age_adjustment: DECIMAL(15,2) (Default: 0.00)
- smoker_adjustment: DECIMAL(15,2) (Default: 0.00)
- location_adjustment: DECIMAL(15,2) (Default: 0.00)
- family_composition_adjustment: DECIMAL(15,2) (Default: 0.00)
- wellness_discount: DECIMAL(15,2) (Default: 0.00)
- volume_discount: DECIMAL(15,2) (Default: 0.00)
- other_adjustments: DECIMAL(15,2) (Default: 0.00)
- total_adjustments: DECIMAL(15,2) (Default: 0.00)
- adjusted_premium_amount: DECIMAL(15,2) (Default: 0.00)
- employer_contribution_amount: DECIMAL(15,2) (Default: 0.00)
- employer_contribution_percentage: DECIMAL(5,2) (Default: 0.00)
- employee_contribution_amount: DECIMAL(15,2) (Default: 0.00)
- employee_contribution_percentage: DECIMAL(5,2) (Default: 0.00)
- tax_treatment: ENUM('Pre-Tax', 'Post-Tax', 'Non-Taxable', 'Mixed')
- pre_tax_amount: DECIMAL(15,2) (Default: 0.00)
- post_tax_amount: DECIMAL(15,2) (Default: 0.00)
- calculation_method: ENUM('Standard Rate', 'Age Banded', 'Community Rated', 'Experience Rated', 'Custom Formula')
- calculation_details: JSON (Detailed calculation breakdown)
- rate_table_version: VARCHAR(50)
- effective_date: DATE (Required)
- expiry_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_enrollment_id (enrollment_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_company_id (company_id)
- INDEX idx_benefit_plan_id (benefit_plan_id)
- INDEX idx_calculation_period (calculation_period)
- INDEX idx_calculation_date (calculation_date)
- INDEX idx_effective_date (effective_date)

Constraints:
- fk_premium_calculation_enrollment FOREIGN KEY (enrollment_id) REFERENCES employee_benefit_enrollment(id)
- fk_premium_calculation_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_premium_calculation_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_premium_calculation_plan FOREIGN KEY (benefit_plan_id) REFERENCES benefit_plan(id)
- fk_premium_calculation_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_contribution_percentages_valid CHECK (employer_contribution_percentage BETWEEN 0 AND 100 AND employee_contribution_percentage BETWEEN 0 AND 100)
```

## 3.5.7 Benefits Provider Integration Schema

```
Table: benefits_provider_integration
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- benefit_plan_id: UUID (Foreign Key to benefit_plan)
- provider_name: VARCHAR(200) (Required)
- provider_type: ENUM('Insurance Carrier', 'TPA', 'Benefits Administrator', 'Retirement Plan Administrator', 'FSA Administrator', 'HSA Administrator', 'Other')
- integration_type: ENUM('API', 'File Transfer', 'EDI', 'Web Portal', 'Manual', 'Hybrid')
- integration_status: ENUM('Active', 'Inactive', 'Testing', 'Error', 'Suspended')
- connection_details: JSON (Connection configuration and credentials)
- api_endpoints: JSON (API endpoint URLs and authentication)
- file_transfer_config: JSON (File transfer configuration)
- data_mapping: JSON (Field mapping between systems)
- synchronization_frequency: ENUM('Real-time', 'Daily', 'Weekly', 'Monthly', 'On-Demand')
- last_sync_date: TIMESTAMP
- next_sync_date: TIMESTAMP
- sync_status: ENUM('Success', 'Failed', 'In Progress', 'Pending')
- error_details: TEXT
- supported_operations: JSON (Supported operations and data types)
- data_format: ENUM('JSON', 'XML', 'CSV', 'EDI', 'Fixed Width', 'Custom')
- encryption_required: BOOLEAN (Default: TRUE)
- encryption_method: VARCHAR(50)
- compliance_standards: JSON (Compliance standards and certifications)
- contact_information: JSON (Provider technical contact information)
- support_hours: JSON (Provider support hours and availability)
- sla_requirements: JSON (Service level agreement requirements)
- testing_environment: JSON (Testing environment details)
- production_environment: JSON (Production environment details)
- monitoring_alerts: JSON (Monitoring and alert configuration)
- created_by_user_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_benefit_plan_id (benefit_plan_id)
- INDEX idx_provider_name (provider_name)
- INDEX idx_provider_type (provider_type)
- INDEX idx_integration_type (integration_type)
- INDEX idx_integration_status (integration_status)
- INDEX idx_last_sync_date (last_sync_date)
- INDEX idx_next_sync_date (next_sync_date)

Constraints:
- fk_provider_integration_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_provider_integration_plan FOREIGN KEY (benefit_plan_id) REFERENCES benefit_plan(id)
- fk_provider_integration_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_provider_integration_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
```

## 3.5.8 Benefits Compliance Schema

```
Table: benefits_compliance
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- benefit_plan_id: UUID (Foreign Key to benefit_plan)
- compliance_type: ENUM('ACA', 'HIPAA', 'ERISA', 'COBRA', 'FMLA', 'ADA', 'GINA', 'MHPAEA', 'State Regulations', 'Plan Documents', 'Reporting Requirements')
- compliance_requirement: VARCHAR(200) (Required)
- jurisdiction: VARCHAR(100) (Required)
- compliance_standard: VARCHAR(200) (Required)
- check_status: ENUM('Compliant', 'Non-Compliant', 'Requires Action', 'Exemption', 'Pending Review')
- risk_level: ENUM('Low', 'Medium', 'High', 'Critical')
- affected_employees: INTEGER (Default: 0)
- compliance_score: DECIMAL(5,2)
- violation_details: TEXT
- corrective_action_required: TEXT
- corrective_action_deadline: DATE
- corrective_action_status: ENUM('Not Started', 'In Progress', 'Completed', 'Overdue')
- exemption_approved: BOOLEAN (Default: FALSE)
- exemption_reason: TEXT
- exemption_approved_by_user_id: UUID (Foreign Key to user)
- exemption_approved_at: TIMESTAMP
- audit_required: BOOLEAN (Default: FALSE)
- audit_date: DATE
- audit_results: TEXT
- reporting_deadline: DATE
- reporting_status: ENUM('Not Due', 'Pending', 'Filed', 'Late', 'Failed')
- supporting_documents: JSON (Array of document IDs)
- next_review_date: DATE
- checked_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_benefit_plan_id (benefit_plan_id)
- INDEX idx_compliance_type (compliance_type)
- INDEX idx_jurisdiction (jurisdiction)
- INDEX idx_check_status (check_status)
- INDEX idx_risk_level (risk_level)
- INDEX idx_corrective_action_deadline (corrective_action_deadline)
- INDEX idx_reporting_deadline (reporting_deadline)

Constraints:
- fk_benefits_compliance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_benefits_compliance_plan FOREIGN KEY (benefit_plan_id) REFERENCES benefit_plan(id)
- fk_benefits_compliance_exemption_approved_by FOREIGN KEY (exemption_approved_by_user_id) REFERENCES user(id)
- fk_benefits_compliance_checked_by FOREIGN KEY (checked_by_user_id) REFERENCES user(id)
- chk_compliance_score_range CHECK (compliance_score BETWEEN 0 AND 100)
```

## 3.5.9 Benefits Analytics Schema

```
Table: benefits_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- location_id: UUID (Foreign Key to location)
- benefit_plan_id: UUID (Foreign Key to benefit_plan)
- analysis_type: ENUM('Enrollment Rates', 'Cost Analysis', 'Utilization', 'Claims Analysis', 'Employee Satisfaction', 'Provider Performance', 'Compliance Metrics', 'ROI Analysis')
- analysis_period: ENUM('Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- analysis_date: DATE (Required)
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- target_value: DECIMAL(15,2)
- achievement_percentage: DECIMAL(5,2)
- total_employees: INTEGER
- enrolled_employees: INTEGER
- enrollment_rate: DECIMAL(5,2)
- total_benefit_cost: DECIMAL(15,2)
- average_cost_per_employee: DECIMAL(15,2)
- employer_cost_share: DECIMAL(15,2)
- employee_cost_share: DECIMAL(15,2)
- utilization_rate: DECIMAL(5,2)
- claims_frequency: DECIMAL(5,2)
- average_claim_amount: DECIMAL(15,2)
- satisfaction_score: DECIMAL(3,2)
- provider_performance_score: DECIMAL(3,2)
- compliance_rate: DECIMAL(5,2)
- roi_percentage: DECIMAL(5,2)
- additional_metrics: JSON (Additional KPIs and breakdowns)
- data_quality_indicators: JSON (Data completeness and accuracy metrics)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_location_id (location_id)
- INDEX idx_benefit_plan_id (benefit_plan_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_metric_name (metric_name)

Constraints:
- fk_benefits_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_benefits_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_benefits_analytics_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_benefits_analytics_plan FOREIGN KEY (benefit_plan_id) REFERENCES benefit_plan(id)
- fk_benefits_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
```

## 3.5.10 Benefits Communication Schema

```
Table: benefits_communication
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- benefit_plan_id: UUID (Foreign Key to benefit_plan)
- communication_type: ENUM('Open Enrollment', 'New Hire Orientation', 'Life Event Notification', 'Plan Changes', 'Wellness Program', 'Benefits Education', 'Compliance Notice', 'Reminder')
- communication_title: VARCHAR(200) (Required)
- communication_purpose: TEXT
- target_audience: JSON (Target audience criteria)
- delivery_method: ENUM('Email', 'Portal', 'SMS', 'Print', 'In-Person', 'Webinar', 'Multi-Channel')
- communication_status: ENUM('Draft', 'Scheduled', 'Sent', 'Delivered', 'Failed', 'Cancelled')
- scheduled_date: TIMESTAMP
- sent_date: TIMESTAMP
- delivery_date: TIMESTAMP
- content_type: ENUM('HTML', 'Plain Text', 'PDF', 'Video', 'Interactive', 'Mixed')
- content_summary: TEXT
- content_details: JSON (Full communication content)
- personalization_rules: JSON (Personalization and segmentation rules)
- tracking_enabled: BOOLEAN (Default: TRUE)
- open_rate: DECIMAL(5,2) (Default: 0.00)
- click_rate: DECIMAL(5,2) (Default: 0.00)
- response_rate: DECIMAL(5,2) (Default: 0.00)
- total_recipients: INTEGER (Default: 0)
- delivered_count: INTEGER (Default: 0)
- opened_count: INTEGER (Default: 0)
- clicked_count: INTEGER (Default: 0)
- responded_count: INTEGER (Default: 0)
- compliance_requirements: JSON (Compliance and legal requirements)
- approval_required: BOOLEAN (Default: FALSE)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_benefit_plan_id (benefit_plan_id)
- INDEX idx_communication_type (communication_type)
- INDEX idx_delivery_method (delivery_method)
- INDEX idx_communication_status (communication_status)
- INDEX idx_scheduled_date (scheduled_date)
- INDEX idx_sent_date (sent_date)

Constraints:
- fk_benefits_communication_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_benefits_communication_plan FOREIGN KEY (benefit_plan_id) REFERENCES benefit_plan(id)
- fk_benefits_communication_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_benefits_communication_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_rates_valid CHECK (open_rate BETWEEN 0 AND 100 AND click_rate BETWEEN 0 AND 100 AND response_rate BETWEEN 0 AND 100)
```

## 3.5.11 Benefits Audit Log Schema

```
Table: benefits_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'Enroll', 'Terminate', 'Approve', 'Calculate', 'Communicate', 'Compliance Check', 'Integration')
- entity_type: ENUM('Benefit Plan', 'Employee Enrollment', 'Dependent Coverage', 'Premium Calculation', 'Provider Integration', 'Compliance Check', 'Communication')
- entity_id: UUID
- old_values: JSON (Previous values)
- new_values: JSON (Updated values)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- affected_employees: INTEGER (Default: 0)
- financial_impact: DECIMAL(15,2)
- compliance_impact: TEXT
- regulatory_impact: TEXT
- employee_impact: TEXT
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_performed_by (performed_by_user_id)
- INDEX idx_timestamp (timestamp)
- INDEX idx_financial_impact (financial_impact)

Constraints:
- fk_benefits_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_benefits_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
