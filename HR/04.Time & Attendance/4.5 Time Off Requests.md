# 4.5 Time Off Requests

## 4.5.1 Business Purpose

Time Off Requests provides comprehensive management of various time-off types beyond traditional leave, including flexible work arrangements, remote work requests, time-off in lieu, and special accommodations. This ensures proper documentation, approval workflows, compliance tracking, and integration with attendance and payroll systems while supporting modern work arrangements and employee flexibility needs.

## 4.5.2 Business Scope

Enable complete time-off request management including flexible work arrangements, remote work requests, time-off in lieu, special accommodations, and temporary schedule changes. The system supports automated workflows, compliance monitoring, resource planning, and audit trails while ensuring accuracy, timeliness, and regulatory compliance across all time-off types and organizational levels.

## 4.5.3 Time Off Policy Master Schema

```
Table: time_off_policy
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- policy_code: VARCHAR(50) (Required, Indexed)
- policy_name: VARCHAR(200) (Required)
- time_off_type: ENUM('Remote Work', 'Flexible Hours', 'Compressed Work Week', 'Work From Home', 'Time Off In Lieu', 'Special Accommodation', 'Temporary Schedule Change', 'Job Sharing', 'Phased Retirement')
- policy_category: ENUM('Work Arrangement', 'Schedule Flexibility', 'Accommodation', 'Compensation', 'Special Request')
- eligibility_criteria: JSON (Eligibility requirements and conditions)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- max_duration_days: INTEGER (Default: 0)
- min_notice_days: INTEGER (Default: 0)
- max_requests_per_period: INTEGER (Default: 0)
- period_type: ENUM('Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- documentation_required: BOOLEAN (Default: FALSE)
- auto_approval_enabled: BOOLEAN (Default: FALSE)
- auto_approval_criteria: JSON (Auto-approval rules and conditions)
- manager_approval_required: BOOLEAN (Default: TRUE)
- hr_approval_required: BOOLEAN (Default: FALSE)
- it_approval_required: BOOLEAN (Default: FALSE)
- compliance_check_required: BOOLEAN (Default: FALSE)
- impact_assessment_required: BOOLEAN (Default: FALSE)
- equipment_provision: JSON (Equipment and resource requirements)
- security_requirements: JSON (Security and access requirements)
- performance_monitoring: BOOLEAN (Default: TRUE)
- reporting_requirements: JSON (Reporting and communication requirements)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_time_off_policy_company_code (company_id, policy_code)
- INDEX idx_company_id (company_id)
- INDEX idx_time_off_type (time_off_type)
- INDEX idx_policy_category (policy_category)
- INDEX idx_approval_workflow_id (approval_workflow_id)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_time_off_policy_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_policy_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_time_off_policy_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_positive_limits CHECK (max_duration_days >= 0 AND min_notice_days >= 0 AND max_requests_per_period >= 0)
```

## 4.5.4 Time Off Request Schema

```
Table: time_off_request
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- time_off_policy_id: UUID (Foreign Key to time_off_policy)
- request_number: VARCHAR(50) (Required, Unique, Indexed)
- request_type: ENUM('Remote Work', 'Flexible Hours', 'Compressed Work Week', 'Work From Home', 'Time Off In Lieu', 'Special Accommodation', 'Temporary Schedule Change', 'Job Sharing', 'Phased Retirement')
- request_status: ENUM('Draft', 'Submitted', 'Pending Approval', 'Approved', 'Rejected', 'Cancelled', 'Active', 'Completed', 'Expired')
- priority: ENUM('Low', 'Medium', 'High', 'Urgent', 'Emergency')
- start_date: DATE (Required)
- end_date: DATE (Required)
- start_time: TIME
- end_time: TIME
- duration_days: INTEGER (Default: 0)
- duration_hours: DECIMAL(4,2) (Default: 0.00)
- work_location: ENUM('Home', 'Remote Office', 'Co-working Space', 'Other')
- work_address: TEXT
- equipment_needed: JSON (Array of required equipment)
- software_access: JSON (Array of required software access)
- security_clearance: ENUM('Standard', 'Enhanced', 'Restricted', 'Classified')
- internet_connectivity: ENUM('Required', 'Preferred', 'Not Required')
- work_hours_schedule: JSON (Flexible work schedule details)
- availability_hours: JSON (Employee availability during time off)
- communication_method: ENUM('Email', 'Phone', 'Video Conference', 'Chat', 'Mixed')
- reporting_frequency: ENUM('Daily', 'Weekly', 'Bi-Weekly', 'Monthly', 'As Needed')
- performance_metrics: JSON (Performance monitoring requirements)
- request_reason: TEXT (Required)
- business_justification: TEXT
- personal_circumstances: TEXT
- backup_arrangements: TEXT
- emergency_contact: VARCHAR(200)
- emergency_phone: VARCHAR(50)
- attachment_required: BOOLEAN (Default: FALSE)
- attachment_ids: JSON (Array of document IDs)
- medical_documentation: BOOLEAN (Default: FALSE)
- medical_expiry_date: DATE
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- current_approver_id: UUID (Foreign Key to employee)
- approval_level: INTEGER (Default: 1)
- submitted_at: TIMESTAMP
- approved_at: TIMESTAMP
- approved_by_user_id: UUID (Foreign Key to user)
- rejection_reason: TEXT
- conditions: JSON (Special conditions and requirements)
- review_date: DATE
- expiry_date: DATE
- auto_approved: BOOLEAN (Default: FALSE)
- system_notes: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_time_off_request_number (request_number)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_time_off_policy_id (time_off_policy_id)
- INDEX idx_request_type (request_type)
- INDEX idx_request_status (request_status)
- INDEX idx_start_date (start_date)
- INDEX idx_end_date (end_date)
- INDEX idx_priority (priority)
- INDEX idx_current_approver_id (current_approver_id)
- INDEX idx_submitted_at (submitted_at)
- INDEX idx_expiry_date (expiry_date)

Constraints:
- fk_time_off_request_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_request_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_time_off_request_policy FOREIGN KEY (time_off_policy_id) REFERENCES time_off_policy(id)
- fk_time_off_request_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_time_off_request_current_approver FOREIGN KEY (current_approver_id) REFERENCES employee(id)
- fk_time_off_request_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_time_off_request_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_date_order CHECK (end_date >= start_date)
- chk_positive_duration CHECK (duration_days >= 0 AND duration_hours >= 0)
```

## 4.5.5 Time Off Approval Workflow Schema

```
Table: time_off_approval_workflow
Fields:
- id: UUID (Primary Key)
- time_off_request_id: UUID (Foreign Key to time_off_request)
- workflow_template_id: UUID (Foreign Key to workflow_template)
- approval_level: INTEGER (Required)
- approver_type: ENUM('Manager', 'Department Head', 'HR Business Partner', 'HR Manager', 'IT Department', 'Facilities', 'Security', 'Specific User', 'Auto Approve')
- approver_id: UUID (Foreign Key to employee)
- approval_status: ENUM('Pending', 'Approved', 'Rejected', 'Delegated', 'Escalated', 'Skipped', 'Conditional Approval')
- decision: ENUM('Approve', 'Reject', 'Request More Info', 'Delegate', 'Escalate', 'Approve with Conditions')
- comments: TEXT
- conditions: JSON (Approval conditions and requirements)
- attachments: JSON (Array of document IDs)
- delegated_to_user_id: UUID (Foreign Key to employee)
- escalated_to_user_id: UUID (Foreign Key to employee)
- due_date: TIMESTAMP
- action_date: TIMESTAMP
- approval_order: INTEGER
- is_parallel: BOOLEAN (Default: FALSE)
- auto_approve: BOOLEAN (Default: FALSE)
- auto_approve_conditions: JSON (Auto-approval conditions)
- skip_conditions: JSON (Skip approval conditions)
- impact_assessment: JSON (Business impact assessment)
- risk_assessment: JSON (Risk assessment and mitigation)
- compliance_check: ENUM('Passed', 'Failed', 'Pending', 'Not Required')
- security_clearance_check: ENUM('Passed', 'Failed', 'Pending', 'Not Required')
- equipment_availability_check: ENUM('Available', 'Not Available', 'Pending', 'Not Required')
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_time_off_request_id (time_off_request_id)
- INDEX idx_workflow_template_id (workflow_template_id)
- INDEX idx_approver_id (approver_id)
- INDEX idx_approval_level (approval_level)
- INDEX idx_approval_status (approval_status)
- INDEX idx_decision (decision)
- INDEX idx_due_date (due_date)
- INDEX idx_approval_order (approval_order)
- INDEX idx_compliance_check (compliance_check)
- INDEX idx_security_clearance_check (security_clearance_check)

Constraints:
- fk_time_off_approval_request FOREIGN KEY (time_off_request_id) REFERENCES time_off_request(id)
- fk_time_off_approval_template FOREIGN KEY (workflow_template_id) REFERENCES workflow_template(id)
- fk_time_off_approval_approver FOREIGN KEY (approver_id) REFERENCES employee(id)
- fk_time_off_approval_delegated_to FOREIGN KEY (delegated_to_user_id) REFERENCES employee(id)
- fk_time_off_approval_escalated_to FOREIGN KEY (escalated_to_user_id) REFERENCES employee(id)
```

## 4.5.6 Time Off Arrangement Schema

```
Table: time_off_arrangement
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- time_off_request_id: UUID (Foreign Key to time_off_request)
- employee_id: UUID (Foreign Key to employee)
- arrangement_type: ENUM('Work Equipment', 'Software Access', 'Security Setup', 'Communication Tools', 'Workspace Setup', 'Network Access', 'VPN Access')
- arrangement_status: ENUM('Pending', 'In Progress', 'Completed', 'Failed', 'Cancelled', 'Not Required')
- priority: ENUM('Low', 'Medium', 'High', 'Urgent', 'Critical')
- description: TEXT (Required)
- requirements: JSON (Detailed requirements and specifications)
- responsible_department: ENUM('IT', 'Facilities', 'HR', 'Security', 'Finance', 'Administration')
- assigned_to_user_id: UUID (Foreign Key to user)
- requested_date: DATE (Required)
- target_completion_date: DATE
- actual_completion_date: DATE
- cost_estimate: DECIMAL(10,2) (Default: 0.00)
- actual_cost: DECIMAL(10,2) (Default: 0.00)
- equipment_details: JSON (Equipment specifications and details)
- software_details: JSON (Software access and license details)
- security_clearance_level: ENUM('Standard', 'Enhanced', 'Restricted', 'Classified')
- access_level: ENUM('Basic', 'Standard', 'Enhanced', 'Administrative', 'Full Access')
- location_details: JSON (Remote work location and setup details)
- network_requirements: JSON (Network and connectivity requirements)
- backup_arrangements: JSON (Backup and contingency arrangements)
- testing_required: BOOLEAN (Default: TRUE)
- test_results: JSON (Testing results and validation)
- handover_required: BOOLEAN (Default: FALSE)
- handover_details: JSON (Handover process and documentation)
- notes: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_time_off_request_id (time_off_request_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_arrangement_type (arrangement_type)
- INDEX idx_arrangement_status (arrangement_status)
- INDEX idx_priority (priority)
- INDEX idx_responsible_department (responsible_department)
- INDEX idx_assigned_to_user_id (assigned_to_user_id)
- INDEX idx_requested_date (requested_date)
- INDEX idx_target_completion_date (target_completion_date)

Constraints:
- fk_time_off_arrangement_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_arrangement_request FOREIGN KEY (time_off_request_id) REFERENCES time_off_request(id)
- fk_time_off_arrangement_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_time_off_arrangement_assigned_to FOREIGN KEY (assigned_to_user_id) REFERENCES user(id)
- fk_time_off_arrangement_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_date_order CHECK (target_completion_date IS NULL OR target_completion_date >= requested_date)
- chk_positive_costs CHECK (cost_estimate >= 0 AND actual_cost >= 0)
```

## 4.5.7 Time Off Compliance Schema

```
Table: time_off_compliance
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- time_off_request_id: UUID (Foreign Key to time_off_request)
- compliance_type: ENUM('Employment Law', 'Health and Safety', 'Data Protection', 'Tax Compliance', 'Immigration', 'Industry Regulations', 'Company Policy')
- compliance_requirement: VARCHAR(200) (Required)
- jurisdiction: VARCHAR(100) (Required)
- compliance_standard: VARCHAR(200) (Required)
- check_frequency: ENUM('One-time', 'Daily', 'Weekly', 'Monthly', 'Per Request', 'Real-time')
- check_status: ENUM('Compliant', 'Non-Compliant', 'Requires Action', 'Exemption', 'Pending Review', 'Not Applicable')
- risk_level: ENUM('Low', 'Medium', 'High', 'Critical')
- affected_employees: INTEGER (Default: 0)
- compliance_score: DECIMAL(5,2)
- violation_details: TEXT
- corrective_action_required: TEXT
- corrective_action_deadline: DATE
- corrective_action_status: ENUM('Not Started', 'In Progress', 'Completed', 'Overdue', 'Not Required')
- exemption_approved: BOOLEAN (Default: FALSE)
- exemption_reason: TEXT
- exemption_approved_by_user_id: UUID (Foreign Key to user)
- exemption_approved_at: TIMESTAMP
- monitoring_required: BOOLEAN (Default: FALSE)
- monitoring_frequency: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly')
- last_monitoring_date: DATE
- next_monitoring_date: DATE
- penalty_amount: DECIMAL(10,2) (Default: 0.00)
- audit_required: BOOLEAN (Default: FALSE)
- audit_date: DATE
- audit_results: TEXT
- supporting_documents: JSON (Array of document IDs)
- next_review_date: DATE
- checked_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_time_off_request_id (time_off_request_id)
- INDEX idx_compliance_type (compliance_type)
- INDEX idx_jurisdiction (jurisdiction)
- INDEX idx_check_status (check_status)
- INDEX idx_risk_level (risk_level)
- INDEX idx_corrective_action_deadline (corrective_action_deadline)
- INDEX idx_next_monitoring_date (next_monitoring_date)
- INDEX idx_next_review_date (next_review_date)

Constraints:
- fk_time_off_compliance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_compliance_request FOREIGN KEY (time_off_request_id) REFERENCES time_off_request(id)
- fk_time_off_compliance_exemption_approved_by FOREIGN KEY (exemption_approved_by_user_id) REFERENCES user(id)
- fk_time_off_compliance_checked_by FOREIGN KEY (checked_by_user_id) REFERENCES user(id)
- chk_compliance_score_range CHECK (compliance_score BETWEEN 0 AND 100)
```

## 4.5.8 Time Off Performance Schema

```
Table: time_off_performance
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- time_off_request_id: UUID (Foreign Key to time_off_request)
- employee_id: UUID (Foreign Key to employee)
- performance_period_start: DATE (Required)
- performance_period_end: DATE (Required)
- performance_metrics: JSON (Key performance indicators and targets)
- productivity_metrics: JSON (Productivity measurements and benchmarks)
- quality_metrics: JSON (Quality standards and measurements)
- communication_metrics: JSON (Communication effectiveness metrics)
- availability_metrics: JSON (Availability and responsiveness metrics)
- collaboration_metrics: JSON (Team collaboration and coordination metrics)
- target_achievement_rate: DECIMAL(5,2) (Default: 0.00)
- actual_achievement_rate: DECIMAL(5,2) (Default: 0.00)
- performance_score: DECIMAL(5,2) (Default: 0.00)
- manager_rating: DECIMAL(3,2) (Default: 0.00)
- self_rating: DECIMAL(3,2) (Default: 0.00)
- peer_feedback_score: DECIMAL(3,2) (Default: 0.00)
- client_satisfaction_score: DECIMAL(3,2) (Default: 0.00)
- issues_identified: JSON (Performance issues and concerns)
- improvement_actions: JSON (Improvement actions and plans)
- training_needs: JSON (Training and development requirements)
- support_requirements: JSON (Additional support and resources needed)
- review_date: DATE (Required)
- next_review_date: DATE
- reviewer_id: UUID (Foreign Key to employee)
- review_comments: TEXT
- performance_trend: ENUM('Improving', 'Stable', 'Declining', 'Not Applicable')
- continuation_recommendation: ENUM('Continue', 'Modify', 'Terminate', 'Review Again')
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_time_off_request_id (time_off_request_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_performance_period_start (performance_period_start)
- INDEX idx_performance_period_end (performance_period_end)
- INDEX idx_performance_score (performance_score)
- INDEX idx_manager_rating (manager_rating)
- INDEX idx_review_date (review_date)
- INDEX idx_next_review_date (next_review_date)
- INDEX idx_reviewer_id (reviewer_id)

Constraints:
- fk_time_off_performance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_performance_request FOREIGN KEY (time_off_request_id) REFERENCES time_off_request(id)
- fk_time_off_performance_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_time_off_performance_reviewer FOREIGN KEY (reviewer_id) REFERENCES employee(id)
- fk_time_off_performance_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (performance_period_end >= performance_period_start)
- chk_rating_ranges CHECK (manager_rating BETWEEN 0 AND 5 AND self_rating BETWEEN 0 AND 5 AND peer_feedback_score BETWEEN 0 AND 5 AND client_satisfaction_score BETWEEN 0 AND 5)
- chk_achievement_rates CHECK (target_achievement_rate BETWEEN 0 AND 100 AND actual_achievement_rate BETWEEN 0 AND 100)
```

## 4.5.9 Time Off Analytics Schema

```
Table: time_off_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- location_id: UUID (Foreign Key to location)
- employee_id: UUID (Foreign Key to employee)
- time_off_request_id: UUID (Foreign Key to time_off_request)
- analysis_type: ENUM('Utilization Analysis', 'Cost Analysis', 'Productivity Impact', 'Compliance Analysis', 'Trend Analysis', 'Satisfaction Analysis')
- analysis_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- analysis_date: DATE (Required)
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- target_value: DECIMAL(15,2)
- achievement_percentage: DECIMAL(5,2)
- total_employees: INTEGER (Default: 0)
- employees_with_time_off: INTEGER (Default: 0)
- time_off_percentage: DECIMAL(5,2) (Default: 0.00)
- total_time_off_days: INTEGER (Default: 0)
- average_time_off_days: DECIMAL(8,2) (Default: 0.00)
- total_arrangement_cost: DECIMAL(15,2) (Default: 0.00)
- average_arrangement_cost: DECIMAL(10,2) (Default: 0.00)
- productivity_impact: DECIMAL(5,2) (Default: 0.00)
- satisfaction_score: DECIMAL(5,2) (Default: 0.00)
- compliance_score: DECIMAL(5,2) (Default: 0.00)
- cost_savings: DECIMAL(15,2) (Default: 0.00)
- roi_percentage: DECIMAL(5,2) (Default: 0.00)
- additional_metrics: JSON (Additional KPIs and breakdowns)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_location_id (location_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_time_off_request_id (time_off_request_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_metric_name (metric_name)

Constraints:
- fk_time_off_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_time_off_analytics_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_time_off_analytics_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_time_off_analytics_request FOREIGN KEY (time_off_request_id) REFERENCES time_off_request(id)
- fk_time_off_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
```

## 4.5.10 Time Off Communication Schema

```
Table: time_off_communication
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- communication_type: ENUM('Time Off Request', 'Approval Notification', 'Rejection Notification', 'Arrangement Update', 'Compliance Alert', 'Performance Review', 'Policy Reminder', 'Expiration Notice')
- communication_title: VARCHAR(200) (Required)
- communication_purpose: TEXT
- delivery_method: ENUM('Email', 'SMS', 'Push Notification', 'Portal Alert', 'Manager Notification', 'Team Notification', 'HR Notification')
- communication_status: ENUM('Draft', 'Scheduled', 'Sent', 'Delivered', 'Failed', 'Read', 'Acknowledged', 'Action Required')
- time_off_request_id: UUID (Foreign Key to time_off_request)
- scheduled_time: TIMESTAMP
- sent_time: TIMESTAMP
- delivery_time: TIMESTAMP
- read_time: TIMESTAMP
- acknowledged_time: TIMESTAMP
- content_type: ENUM('Text', 'HTML', 'PDF', 'Link', 'Interactive', 'Video')
- content_summary: TEXT
- content_details: JSON (Full communication content)
- priority: ENUM('Low', 'Medium', 'High', 'Urgent', 'Critical')
- requires_action: BOOLEAN (Default: FALSE)
- action_deadline: DATE
- action_completed: BOOLEAN (Default: FALSE)
- action_completion_date: DATE
- template_used: VARCHAR(200)
- personalization_data: JSON (Personalization variables and values)
- escalation_sent: BOOLEAN (Default: FALSE)
- escalation_level: INTEGER (Default: 0)
- response_tracking: JSON (Response tracking and analytics)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_communication_type (communication_type)
- INDEX idx_delivery_method (delivery_method)
- INDEX idx_communication_status (communication_status)
- INDEX idx_time_off_request_id (time_off_request_id)
- INDEX idx_scheduled_time (scheduled_time)
- INDEX idx_priority (priority)
- INDEX idx_requires_action (requires_action)
- INDEX idx_action_deadline (action_deadline)

Constraints:
- fk_time_off_communication_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_communication_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_time_off_communication_request FOREIGN KEY (time_off_request_id) REFERENCES time_off_request(id)
- fk_time_off_communication_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

## 4.5.11 Time Off Audit Log Schema

```
Table: time_off_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'Submit', 'Approve', 'Reject', 'Cancel', 'Activate', 'Complete', 'Expire', 'Modify', 'Export')
- entity_type: ENUM('Time Off Request', 'Time Off Policy', 'Time Off Arrangement', 'Time Off Compliance', 'Time Off Performance', 'Time Off Analytics', 'Time Off Communication')
- entity_id: UUID
- old_values: JSON (Previous values)
- new_values: JSON (Updated values)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- affected_employees: INTEGER (Default: 0)
- payroll_impact: BOOLEAN (Default: FALSE)
- compliance_impact: TEXT
- cost_impact: DECIMAL(15,2) (Default: 0.00)
- productivity_impact: TEXT
- security_impact: TEXT
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_performed_by (performed_by_user_id)
- INDEX idx_timestamp (timestamp)
- INDEX idx_payroll_impact (payroll_impact)
- INDEX idx_cost_impact (cost_impact)
- INDEX idx_affected_employees (affected_employees)

Constraints:
- fk_time_off_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_time_off_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
