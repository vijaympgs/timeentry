# 5.5 Competency Management

## 5.5.1 Business Purpose

Competency Management provides comprehensive administration of organizational competency frameworks, skill assessments, and development planning. This ensures consistent competency definitions, objective skill evaluations, and targeted development initiatives while supporting various competency models, assessment methodologies, and integration with performance reviews and talent management systems.

## 5.5.2 Business Scope

Enable complete competency management including competency framework design, skill assessment, gap analysis, and development planning. The system supports multiple competency models, automated assessments, competency mapping, and audit trails while ensuring accuracy, consistency, and regulatory compliance across all competency processes and organizational levels.

## 5.5.3 Competency Framework Schema

```
Table: competency_framework
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- framework_code: VARCHAR(50) (Required, Indexed)
- framework_name: VARCHAR(200) (Required)
- framework_type: ENUM('Leadership', 'Technical', 'Behavioral', 'Functional', 'Industry-Specific', 'Custom', 'Hybrid')
- framework_category: ENUM('Corporate', 'Business Unit', 'Department', 'Role-Based', 'Level-Based')
- framework_description: TEXT
- framework_version: VARCHAR(20) (Required)
- framework_status: ENUM('Draft', 'Active', 'Deprecated', 'Under Review')
- competency_levels: JSON (Competency levels and proficiency definitions)
- assessment_methodology: JSON (Assessment methods and criteria)
- rating_scale_id: UUID (Foreign Key to rating_scale)
- competency_categories: JSON (Competency categories and groupings)
- behavioral_indicators: JSON (Behavioral indicators for each competency)
- proficiency_descriptions: JSON (Detailed proficiency level descriptions)
- development_guidelines: JSON (Development guidelines and recommendations)
- integration_points: JSON (Integration with other HR systems)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- effective_from: DATE (Required)
- effective_to: DATE
- review_frequency: ENUM('Annually', 'Bi-Annually', 'Quarterly', 'As Needed')
- last_review_date: DATE
- next_review_date: DATE
- usage_count: INTEGER (Default: 0)
- is_public: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_competency_framework_company_code (company_id, framework_code)
- INDEX idx_company_id (company_id)
- INDEX idx_framework_type (framework_type)
- INDEX idx_framework_category (framework_category)
- INDEX idx_framework_version (framework_version)
- INDEX idx_framework_status (framework_status)
- INDEX idx_rating_scale_id (rating_scale_id)
- INDEX idx_effective_from (effective_from)
- INDEX idx_is_active (is_active)
- INDEX idx_usage_count (usage_count)

Constraints:
- fk_competency_framework_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_framework_rating_scale FOREIGN KEY (rating_scale_id) REFERENCES rating_scale(id)
- fk_competency_framework_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_competency_framework_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
- chk_usage_positive CHECK (usage_count >= 0)
```

## 5.5.4 Competency Master Schema

```
Table: competency
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- framework_id: UUID (Foreign Key to competency_framework)
- competency_code: VARCHAR(50) (Required, Indexed)
- competency_name: VARCHAR(200) (Required)
- competency_type: ENUM('Core', 'Leadership', 'Technical', 'Behavioral', 'Functional', 'Industry-Specific', 'Custom')
- competency_category: VARCHAR(100) (Required)
- competency_description: TEXT (Required)
- competency_definition: TEXT (Required)
- proficiency_levels: JSON (Proficiency levels and descriptions)
- behavioral_indicators: JSON (Behavioral indicators for each level)
- assessment_criteria: JSON (Assessment criteria and methods)
- development_activities: JSON (Development activities and resources)
- learning_resources: JSON (Learning resources and materials)
- job_relevance: JSON (Job roles and positions where competency applies)
- skill_level: ENUM('Foundation', 'Intermediate', 'Advanced', 'Expert', 'Master')
- importance_level: ENUM('Critical', 'Important', 'Nice to Have', 'Optional')
- competency_weight: DECIMAL(5,2) (Default: 0.00)
- mandatory_for_roles: JSON (Roles where competency is mandatory)
- optional_for_roles: JSON (Roles where competency is optional)
- assessment_methods: JSON (Allowed assessment methods)
- certification_requirements: JSON (Certification and qualification requirements)
- validity_period: INTEGER (Default: 0)
- renewal_required: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_competency_company_code (company_id, competency_code)
- INDEX idx_company_id (company_id)
- INDEX idx_framework_id (framework_id)
- INDEX idx_competency_type (competency_type)
- INDEX idx_competency_category (competency_category)
- INDEX idx_skill_level (skill_level)
- INDEX idx_importance_level (importance_level)
- INDEX idx_competency_weight (competency_weight)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_competency_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_framework FOREIGN KEY (framework_id) REFERENCES competency_framework(id)
- fk_competency_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_weight_range CHECK (competency_weight BETWEEN 0 AND 100)
- chk_validity_positive CHECK (validity_period >= 0)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

## 5.5.5 Competency Assessment Schema

```
Table: competency_assessment
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- assessment_code: VARCHAR(50) (Required, Unique, Indexed)
- assessment_name: VARCHAR(200) (Required)
- assessment_type: ENUM('Self-Assessment', 'Manager Assessment', '360-Degree', 'Peer Assessment', 'Direct Report Assessment', 'Client Assessment')
- assessment_category: ENUM('Formal', 'Informal', 'Certification', 'Development', 'Performance Review')
- assessment_purpose: ENUM('Skill Gap Analysis', 'Development Planning', 'Performance Evaluation', 'Succession Planning', 'Hiring Decision')
- assessment_status: ENUM('Draft', 'Active', 'Completed', 'Cancelled', 'Expired')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- employee_id: UUID (Foreign Key to employee)
- assessor_id: UUID (Foreign Key to employee)
- assessment_period_start: DATE (Required)
- assessment_period_end: DATE (Required)
- assessment_date: DATE (Required)
- due_date: DATE (Required)
- submitted_date: TIMESTAMP
- completed_date: TIMESTAMP
- competency_framework_id: UUID (Foreign Key to competency_framework)
- assessment_methodology: JSON (Assessment methodology and approach)
- assessment_criteria: JSON (Assessment criteria and standards)
- rating_scale_id: UUID (Foreign Key to rating_scale)
- competency_ids: JSON (Array of competency IDs being assessed)
- assessment_weight: DECIMAL(5,2) (Default: 0.00)
- overall_rating: DECIMAL(3,2) (Default: 0.00)
- proficiency_level: ENUM('Foundation', 'Intermediate', 'Advanced', 'Expert', 'Master')
- assessment_notes: TEXT
- strengths: JSON (Identified strengths and high-performing areas)
- development_areas: JSON (Areas requiring development and improvement)
- recommendations: JSON (Development recommendations and action items)
- next_assessment_date: DATE
- certification_required: BOOLEAN (Default: FALSE)
- certification_status: ENUM('Not Required', 'Required', 'In Progress', 'Completed', 'Expired')
- attachment_ids: JSON (Array of attachment document IDs)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_competency_assessment_code (assessment_code)
- INDEX idx_company_id (company_id)
- INDEX idx_assessment_type (assessment_type)
- INDEX idx_assessment_category (assessment_category)
- INDEX idx_assessment_purpose (assessment_purpose)
- INDEX idx_assessment_status (assessment_status)
- INDEX idx_priority (priority)
- INDEX idx_employee_id (employee_id)
- INDEX idx_assessor_id (assessor_id)
- INDEX idx_assessment_period_start (assessment_period_start)
- INDEX idx_assessment_period_end (assessment_period_end)
- INDEX idx_assessment_date (assessment_date)
- INDEX idx_due_date (due_date)
- INDEX idx_competency_framework_id (competency_framework_id)
- INDEX idx_overall_rating (overall_rating)
- INDEX idx_proficiency_level (proficiency_level)

Constraints:
- fk_competency_assessment_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_assessment_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_competency_assessment_assessor FOREIGN KEY (assessor_id) REFERENCES employee(id)
- fk_competency_assessment_framework FOREIGN KEY (competency_framework_id) REFERENCES competency_framework(id)
- fk_competency_assessment_rating_scale FOREIGN KEY (rating_scale_id) REFERENCES rating_scale(id)
- fk_competency_assessment_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (assessment_period_end >= assessment_period_start)
- chk_weight_range CHECK (assessment_weight BETWEEN 0 AND 100)
- chk_rating_range CHECK (overall_rating BETWEEN 0 AND 5)
```

## 5.5.6 Competency Rating Schema

```
Table: competency_rating
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- competency_assessment_id: UUID (Foreign Key to competency_assessment)
- competency_id: UUID (Foreign Key to competency)
- rating_type: ENUM('Self-Rating', 'Manager Rating', 'Peer Rating', 'Direct Report Rating', 'Client Rating', 'System Calculated')
- rating_value: DECIMAL(3,2) (Default: 0.00)
- proficiency_level: ENUM('Foundation', 'Intermediate', 'Advanced', 'Expert', 'Master')
- confidence_level: ENUM('Very Low', 'Low', 'Medium', 'High', 'Very High')
- evidence_provided: BOOLEAN (Default: FALSE)
- evidence_ids: JSON (Array of evidence document IDs)
- behavioral_examples: JSON (Specific behavioral examples and observations)
- performance_examples: JSON (Performance examples and achievements)
- improvement_suggestions: JSON (Specific improvement suggestions and recommendations)
- development_needs: JSON (Development needs and requirements)
- next_steps: JSON (Next steps and action items)
- rating_comments: TEXT
- assessor_notes: TEXT
- rating_date: DATE (Required)
- rating_weight: DECIMAL(5,2) (Default: 0.00)
- is_validated: BOOLEAN (Default: FALSE)
- validated_by_user_id: UUID (Foreign Key to user)
- validated_at: TIMESTAMP
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_competency_assessment_id (competency_assessment_id)
- INDEX idx_competency_id (competency_id)
- INDEX idx_rating_type (rating_type)
- INDEX idx_rating_value (rating_value)
- INDEX idx_proficiency_level (proficiency_level)
- INDEX idx_confidence_level (confidence_level)
- INDEX idx_rating_date (rating_date)
- INDEX idx_rating_weight (rating_weight)
- INDEX idx_is_validated (is_validated)
- INDEX idx_validated_by_user_id (validated_by_user_id)

Constraints:
- fk_competency_rating_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_rating_assessment FOREIGN KEY (competency_assessment_id) REFERENCES competency_assessment(id)
- fk_competency_rating_competency FOREIGN KEY (competency_id) REFERENCES competency(id)
- fk_competency_rating_validated_by FOREIGN KEY (validated_by_user_id) REFERENCES user(id)
- fk_competency_rating_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_rating_range CHECK (rating_value BETWEEN 0 AND 5)
- chk_weight_range CHECK (rating_weight BETWEEN 0 AND 100)
```

## 5.5.7 Competency Gap Analysis Schema

```
Table: competency_gap_analysis
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- analysis_code: VARCHAR(50) (Required, Unique, Indexed)
- analysis_name: VARCHAR(200) (Required)
- analysis_type: ENUM('Individual', 'Team', 'Department', 'Role-Based', 'Organization-Wide')
- analysis_purpose: ENUM('Development Planning', 'Succession Planning', 'Hiring Strategy', 'Training Needs', 'Performance Improvement')
- analysis_status: ENUM('Draft', 'In Progress', 'Completed', 'Cancelled')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- employee_id: UUID (Foreign Key to employee)
- team_id: UUID (Foreign Key to team)
- department_id: UUID (Foreign Key to department)
- role_id: UUID (Foreign Key to role)
- analysis_period_start: DATE (Required)
- analysis_period_end: DATE (Required)
- analysis_date: DATE (Required)
- competency_framework_id: UUID (Foreign Key to competency_framework)
- current_competencies: JSON (Current competency levels and ratings)
- required_competencies: JSON (Required competency levels and ratings)
- gap_analysis: JSON (Detailed gap analysis results)
- critical_gaps: JSON (Critical competency gaps requiring immediate attention)
- development_priorities: JSON (Development priorities and recommendations)
- training_recommendations: JSON (Training and development recommendations)
- coaching_recommendations: JSON (Coaching and mentoring recommendations)
- resource_requirements: JSON (Resource requirements and budget estimates)
- timeline_recommendations: JSON (Recommended timeline for gap closure)
- success_metrics: JSON (Success metrics and measurement criteria)
- overall_gap_score: DECIMAL(5,2) (Default: 0.00)
- gap_severity: ENUM('Low', 'Medium', 'High', 'Critical')
- closure_timeline: ENUM('Short Term', 'Medium Term', 'Long Term', 'Ongoing')
- estimated_cost: DECIMAL(15,2) (Default: 0.00)
- roi_projection: DECIMAL(5,2) (Default: 0.00)
- action_plan_ids: JSON (Array of action plan IDs)
- follow_up_required: BOOLEAN (Default: TRUE)
- follow_up_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_competency_gap_analysis_code (analysis_code)
- INDEX idx_company_id (company_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_purpose (analysis_purpose)
- INDEX idx_analysis_status (analysis_status)
- INDEX idx_priority (priority)
- INDEX idx_employee_id (employee_id)
- INDEX idx_team_id (team_id)
- INDEX idx_department_id (department_id)
- INDEX idx_role_id (role_id)
- INDEX idx_analysis_period_start (analysis_period_start)
- INDEX idx_analysis_period_end (analysis_period_end)
- INDEX idx_competency_framework_id (competency_framework_id)
- INDEX idx_overall_gap_score (overall_gap_score)
- INDEX idx_gap_severity (gap_severity)
- INDEX idx_closure_timeline (closure_timeline)
- INDEX idx_follow_up_date (follow_up_date)

Constraints:
- fk_competency_gap_analysis_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_gap_analysis_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_competency_gap_analysis_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_competency_gap_analysis_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_competency_gap_analysis_role FOREIGN KEY (role_id) REFERENCES role(id)
- fk_competency_gap_analysis_framework FOREIGN KEY (competency_framework_id) REFERENCES competency_framework(id)
- fk_competency_gap_analysis_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (analysis_period_end >= analysis_period_start)
- chk_gap_score_range CHECK (overall_gap_score BETWEEN 0 AND 100)
- chk_roi_range CHECK (roi_projection BETWEEN -100 AND 1000)
- chk_positive_cost CHECK (estimated_cost >= 0)
```

## 5.5.8 Development Plan Schema

```
Table: development_plan
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_code: VARCHAR(50) (Required, Unique, Indexed)
- plan_name: VARCHAR(200) (Required)
- plan_type: ENUM('Individual Development', 'Team Development', 'Leadership Development', 'Skill Development', 'Career Development')
- plan_category: ENUM('Formal', 'Informal', 'Certification', 'Coaching', 'Mentoring', 'Training')
- plan_status: ENUM('Draft', 'Proposed', 'Approved', 'Active', 'On Hold', 'Completed', 'Cancelled', 'Expired')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- employee_id: UUID (Foreign Key to employee)
- manager_id: UUID (Foreign Key to employee)
- mentor_id: UUID (Foreign Key to employee)
- coach_id: UUID (Foreign Key to employee)
- gap_analysis_id: UUID (Foreign Key to competency_gap_analysis)
- start_date: DATE (Required)
- end_date: DATE (Required)
- original_end_date: DATE
- extension_count: INTEGER (Default: 0)
- max_extensions_allowed: INTEGER (Default: 1)
- development_objectives: JSON (Specific development objectives and goals)
- target_competencies: JSON (Target competencies and proficiency levels)
- development_activities: JSON (Development activities and programs)
- training_programs: JSON (Training programs and courses)
- coaching_schedule: JSON (Coaching schedule and sessions)
- mentoring_plan: JSON (Mentoring plan and arrangements)
- milestones: JSON (Development milestones and target dates)
- success_metrics: JSON (Success metrics and measurement criteria)
- budget_allocation: DECIMAL(15,2) (Default: 0.00)
- actual_cost: DECIMAL(15,2) (Default: 0.00)
- time_investment_hours: INTEGER (Default: 0)
- completion_percentage: DECIMAL(5,2) (Default: 0.00)
- progress_rating: DECIMAL(3,2) (Default: 0.00)
- effectiveness_rating: DECIMAL(3,2) (Default: 0.00)
- satisfaction_rating: DECIMAL(3,2) (Default: 0.00)
- outcomes_achieved: JSON (Outcomes and achievements)
- lessons_learned: TEXT
- next_steps: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_development_plan_code (plan_code)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_type (plan_type)
- INDEX idx_plan_category (plan_category)
- INDEX idx_plan_status (plan_status)
- INDEX idx_priority (priority)
- INDEX idx_employee_id (employee_id)
- INDEX idx_manager_id (manager_id)
- INDEX idx_mentor_id (mentor_id)
- INDEX idx_coach_id (coach_id)
- INDEX idx_gap_analysis_id (gap_analysis_id)
- INDEX idx_start_date (start_date)
- INDEX idx_end_date (end_date)
- INDEX idx_completion_percentage (completion_percentage)
- INDEX idx_progress_rating (progress_rating)

Constraints:
- fk_development_plan_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_development_plan_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_development_plan_manager FOREIGN KEY (manager_id) REFERENCES employee(id)
- fk_development_plan_mentor FOREIGN KEY (mentor_id) REFERENCES employee(id)
- fk_development_plan_coach FOREIGN KEY (coach_id) REFERENCES employee(id)
- fk_development_plan_gap_analysis FOREIGN KEY (gap_analysis_id) REFERENCES competency_gap_analysis(id)
- fk_development_plan_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_date_order CHECK (end_date >= start_date AND original_end_date >= start_date)
- chk_extension_count CHECK (extension_count >= 0 AND max_extensions_allowed >= 0)
- chk_positive_values CHECK (budget_allocation >= 0 AND actual_cost >= 0 AND time_investment_hours >= 0)
- chk_percentage_range CHECK (completion_percentage BETWEEN 0 AND 100)
- chk_rating_ranges CHECK (progress_rating BETWEEN 0 AND 5 AND effectiveness_rating BETWEEN 0 AND 5 AND satisfaction_rating BETWEEN 0 AND 5)
```

## 5.5.9 Competency Certification Schema

```
Table: competency_certification
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- certification_code: VARCHAR(50) (Required, Unique, Indexed)
- certification_name: VARCHAR(200) (Required)
- certification_type: ENUM('Internal', 'External', 'Industry', 'Professional', 'Academic', 'Vendor')
- certification_category: ENUM('Technical', 'Leadership', 'Behavioral', 'Functional', 'Industry-Specific')
- certification_status: ENUM('Draft', 'Active', 'Expired', 'Revoked', 'Suspended')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- employee_id: UUID (Foreign Key to employee)
- competency_id: UUID (Foreign Key to competency)
- competency_framework_id: UUID (Foreign Key to competency_framework)
- issuing_organization: VARCHAR(200) (Required)
- certification_number: VARCHAR(100)
- issue_date: DATE (Required)
- expiry_date: DATE
- validity_period_days: INTEGER (Default: 0)
- proficiency_level: ENUM('Foundation', 'Intermediate', 'Advanced', 'Expert', 'Master')
- assessment_method: ENUM('Exam', 'Project', 'Interview', 'Portfolio', 'Observation', 'Combination')
- assessment_score: DECIMAL(5,2) (Default: 0.00)
- passing_score: DECIMAL(5,2) (Default: 0.00)
- assessment_details: JSON (Assessment details and criteria)
- evidence_ids: JSON (Array of evidence document IDs)
- verifier_id: UUID (Foreign Key to employee)
- verification_date: DATE
- verification_notes: TEXT
- renewal_required: BOOLEAN (Default: FALSE)
- renewal_frequency: ENUM('Annually', 'Bi-Annually', 'Every 3 Years', 'Every 5 Years', 'Never')
- last_renewal_date: DATE
- next_renewal_date: DATE
- renewal_count: INTEGER (Default: 0)
- cost: DECIMAL(10,2) (Default: 0.00)
- company_sponsored: BOOLEAN (Default: FALSE)
- reimbursement_eligible: BOOLEAN (Default: FALSE)
- reimbursement_amount: DECIMAL(10,2) (Default: 0.00)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_competency_certification_code (certification_code)
- INDEX idx_company_id (company_id)
- INDEX idx_certification_type (certification_type)
- INDEX idx_certification_category (certification_category)
- INDEX idx_certification_status (certification_status)
- INDEX idx_priority (priority)
- INDEX idx_employee_id (employee_id)
- INDEX idx_competency_id (competency_id)
- INDEX idx_competency_framework_id (competency_framework_id)
- INDEX idx_issue_date (issue_date)
- INDEX idx_expiry_date (expiry_date)
- INDEX idx_proficiency_level (proficiency_level)
- INDEX idx_assessment_score (assessment_score)
- INDEX idx_verifier_id (verifier_id)
- INDEX idx_next_renewal_date (next_renewal_date)

Constraints:
- fk_competency_certification_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_certification_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_competency_certification_competency FOREIGN KEY (competency_id) REFERENCES competency(id)
- fk_competency_certification_framework FOREIGN KEY (competency_framework_id) REFERENCES competency_framework(id)
- fk_competency_certification_verifier FOREIGN KEY (verifier_id) REFERENCES employee(id)
- fk_competency_certification_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_date_order CHECK (expiry_date IS NULL OR expiry_date >= issue_date)
- chk_validity_positive CHECK (validity_period_days >= 0)
- chk_score_range CHECK (assessment_score BETWEEN 0 AND 100 AND passing_score BETWEEN 0 AND 100)
- chk_positive_values CHECK (cost >= 0 AND reimbursement_amount >= 0 AND renewal_count >= 0)
- chk_reimbursement_range CHECK (reimbursement_amount <= cost)
```

## 5.5.10 Competency Analytics Schema

```
Table: competency_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- team_id: UUID (Foreign Key to team)
- employee_id: UUID (Foreign Key to employee)
- competency_id: UUID (Foreign Key to competency)
- competency_framework_id: UUID (Foreign Key to competency_framework)
- analysis_type: ENUM('Proficiency Distribution', 'Gap Analysis', 'Development Progress', 'Certification Status', 'Trend Analysis', 'Predictive Analytics')
- analysis_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- analysis_date: DATE (Required)
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- target_value: DECIMAL(15,2)
- achievement_percentage: DECIMAL(5,2)
- total_assessments: INTEGER (Default: 0)
- completed_assessments: INTEGER (Default: 0)
- pending_assessments: INTEGER (Default: 0)
- overdue_assessments: INTEGER (Default: 0)
- average_rating: DECIMAL(3,2) (Default: 0.00)
- proficiency_distribution: JSON (Distribution of proficiency levels)
- gap_analysis_score: DECIMAL(5,2) (Default: 0.00)
- development_completion_rate: DECIMAL(5,2) (Default: 0.00)
- certification_rate: DECIMAL(5,2) (Default: 0.00)
- training_effectiveness: DECIMAL(3,2) (Default: 0.00)
- coaching_impact: DECIMAL(3,2) (Default: 0.00)
- skill_improvement_rate: DECIMAL(5,2) (Default: 0.00)
- business_impact_score: DECIMAL(5,2) (Default: 0.00)
- roi_percentage: DECIMAL(5,2) (Default: 0.00)
- cost_per_development: DECIMAL(10,2) (Default: 0.00)
- time_to_proficiency: INTEGER (Default: 0)
- additional_metrics: JSON (Additional KPIs and breakdowns)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_team_id (team_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_competency_id (competency_id)
- INDEX idx_competency_framework_id (competency_framework_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_metric_name (metric_name)

Constraints:
- fk_competency_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_competency_analytics_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_competency_analytics_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_competency_analytics_competency FOREIGN KEY (competency_id) REFERENCES competency(id)
- fk_competency_analytics_framework FOREIGN KEY (competency_framework_id) REFERENCES competency_framework(id)
- fk_competency_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- chk_positive_counts CHECK (total_assessments >= 0 AND completed_assessments >= 0 AND pending_assessments >= 0 AND overdue_assessments >= 0)
- chk_rating_range CHECK (average_rating BETWEEN 0 AND 5 AND training_effectiveness BETWEEN 0 AND 5 AND coaching_impact BETWEEN 0 AND 5)
- chk_percentage_ranges CHECK (gap_analysis_score BETWEEN 0 AND 100 AND development_completion_rate BETWEEN 0 AND 100 AND certification_rate BETWEEN 0 AND 100 AND skill_improvement_rate BETWEEN 0 AND 100 AND business_impact_score BETWEEN 0 AND 100)
- chk_roi_range CHECK (roi_percentage BETWEEN -100 AND 1000)
- chk_positive_values CHECK (cost_per_development >= 0 AND time_to_proficiency >= 0)
```

## 5.5.11 Competency Communication Schema

```
Table: competency_communication
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- communication_type: ENUM('Assessment Assignment', 'Assessment Reminder', 'Assessment Completion', 'Gap Analysis Report', 'Development Plan Assignment', 'Certification Notification', 'Training Invitation', 'Coaching Session')
- communication_title: VARCHAR(200) (Required)
- communication_purpose: TEXT
- delivery_method: ENUM('Email', 'SMS', 'Push Notification', 'Portal Alert', 'Manager Notification', 'HR Notification')
- communication_status: ENUM('Draft', 'Scheduled', 'Sent', 'Delivered', 'Failed', 'Read', 'Acknowledged', 'Action Required')
- competency_assessment_id: UUID (Foreign Key to competency_assessment)
- gap_analysis_id: UUID (Foreign Key to competency_gap_analysis)
- development_plan_id: UUID (Foreign Key to development_plan)
- competency_certification_id: UUID (Foreign Key to competency_certification)
- scheduled_time: TIMESTAMP
- sent_time: TIMESTAMP
- delivery_time: TIMESTAMP
- read_time: TIMESTAMP
- acknowledged_time: TIMESTAMP
- content_type: ENUM('Text', 'HTML', 'PDF', 'Link', 'Interactive', 'Video')
- content_summary: TEXT
- content_details: JSON (Full communication content)
- priority: ENUM('Low', 'Medium', 'High', 'Urgent', 'Critical')
- requires_action: BOOLEAN (Default: FALSE)
- action_deadline: DATE
- action_completed: BOOLEAN (Default: FALSE)
- action_completion_date: DATE
- template_used: VARCHAR(200)
- personalization_data: JSON (Personalization variables and values)
- escalation_sent: BOOLEAN (Default: FALSE)
- escalation_level: INTEGER (Default: 0)
- response_tracking: JSON (Response tracking and analytics)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_communication_type (communication_type)
- INDEX idx_delivery_method (delivery_method)
- INDEX idx_communication_status (communication_status)
- INDEX idx_competency_assessment_id (competency_assessment_id)
- INDEX idx_gap_analysis_id (gap_analysis_id)
- INDEX idx_development_plan_id (development_plan_id)
- INDEX idx_competency_certification_id (competency_certification_id)
- INDEX idx_scheduled_time (scheduled_time)
- INDEX idx_priority (priority)
- INDEX idx_requires_action (requires_action)
- INDEX idx_action_deadline (action_deadline)

Constraints:
- fk_competency_communication_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_competency_communication_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_competency_communication_assessment FOREIGN KEY (competency_assessment_id) REFERENCES competency_assessment(id)
- fk_competency_communication_gap_analysis FOREIGN KEY (gap_analysis_id) REFERENCES competency_gap_analysis(id)
- fk_competency_communication_development_plan FOREIGN KEY (development_plan_id) REFERENCES development_plan(id)
- fk_competency_communication_certification FOREIGN KEY (competency_certification_id) REFERENCES competency_certification(id)
- fk_competency_communication_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```
