# 7.3 Rewards & Incentives

## 7.3.1 Business Purpose & Scope

The Rewards & Incentives module provides a comprehensive framework for designing, managing, and delivering monetary and non-monetary rewards that drive employee performance, engagement, and retention. This system supports various incentive types including spot awards, performance bonuses, milestone rewards, and recognition points with configurable eligibility criteria, budget controls, and automated distribution workflows.

Business Scope includes reward program configuration, eligibility management, budget allocation and tracking, reward catalog management, automated calculation engines, multi-channel distribution, tax compliance, integration with payroll and performance systems, and comprehensive analytics for ROI measurement and program optimization.

## 7.3.2 Reward Program Master Schema

```sql
Table: reward_program
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- program_code: VARCHAR(50) (Required, Unique, Indexed)
- program_name: VARCHAR(200) (Required)
- program_type: ENUM('Spot Award', 'Performance Bonus', 'Milestone Reward', 'Recognition Points', 'Sales Commission', 'Referral Bonus', 'Safety Award', 'Innovation Award')
- program_category: ENUM('Individual', 'Team', 'Department', 'Company-wide', 'Manager Discretion', 'Peer Nominated')
- program_description: TEXT (Required)
- program_objectives: JSON (Specific program goals and success criteria)
- eligibility_criteria: JSON (Eligibility rules and requirements)
- calculation_method: ENUM('Fixed Amount', 'Percentage', 'Formula Based', 'Tiered', 'Points Based', 'Manager Discretion')
- currency_code: VARCHAR(10) (Default: 'USD')
- tax_treatment: ENUM('Taxable', 'Non-Taxable', 'Pre-Tax', 'Post-Tax', 'De Minimis')
- approval_required: BOOLEAN (Default: TRUE)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- budget_control: ENUM('None', 'Warning', 'Hard Limit', 'Pre-approval')
- auto_calculate: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_reward_program_company_code (company_id, program_code)
- INDEX idx_company_id (company_id)
- INDEX idx_program_type (program_type)
- INDEX idx_program_category (program_category)
- INDEX idx_calculation_method (calculation_method)
- INDEX idx_tax_treatment (tax_treatment)
- INDEX idx_approval_required (approval_required)
- INDEX idx_budget_control (budget_control)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_reward_program_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_program_approval_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_reward_program_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_program_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

## 7.3.3 Reward Allocation Schema

```sql
Table: reward_allocation
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- program_id: UUID (Foreign Key to reward_program)
- allocation_code: VARCHAR(50) (Required, Unique, Indexed)
- allocation_name: VARCHAR(200) (Required)
- allocation_type: ENUM('Individual Reward', 'Team Reward', 'Department Bonus', 'Company-wide Bonus', 'Spot Award', 'Milestone Reward')
- employee_id: UUID (Foreign Key to employee)
- team_id: UUID (Foreign Key to team)
- department_id: UUID (Foreign Key to department)
- allocation_date: DATE (Required)
- effective_date: DATE (Required)
- expiry_date: DATE
- reward_amount: DECIMAL(15,2) (Required)
- currency_code: VARCHAR(10) (Default: 'USD')
- reward_points: INTEGER (Default: 0)
- reward_percentage: DECIMAL(5,2) (Default: 0.00)
- base_amount: DECIMAL(15,2) (Base for percentage calculations)
- performance_metric: VARCHAR(100)
- performance_value: DECIMAL(10,2)
- achievement_level: ENUM('Below Target', 'Target Met', 'Exceeded Target', 'Outstanding')
- allocation_reason: TEXT (Required)
- business_justification: TEXT
- nominator_id: UUID (Foreign Key to employee)
- approver_id: UUID (Foreign Key to employee)
- allocation_status: ENUM('Draft', 'Submitted', 'Pending Approval', 'Approved', 'Rejected', 'Processed', 'Paid', 'Cancelled')
- approval_date: TIMESTAMP
- processed_date: TIMESTAMP
- paid_date: DATE
- payment_method: ENUM('Payroll', 'Direct Deposit', 'Gift Card', 'Points Credit', 'Voucher', 'Check')
- tax_withholding_amount: DECIMAL(15,2) (Default: 0.00)
- net_amount: DECIMAL(15,2)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_reward_allocation_company_code (company_id, allocation_code)
- INDEX idx_company_id (company_id)
- INDEX idx_program_id (program_id)
- INDEX idx_allocation_type (allocation_type)
- INDEX idx_employee_id (employee_id)
- INDEX idx_team_id (team_id)
- INDEX idx_department_id (department_id)
- INDEX idx_allocation_date (allocation_date)
- INDEX idx_effective_date (effective_date)
- INDEX idx_allocation_status (allocation_status)
- INDEX idx_nominator_id (nominator_id)
- INDEX idx_approver_id (approver_id)
- INDEX idx_achievement_level (achievement_level)

Constraints:
- fk_reward_allocation_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_allocation_program FOREIGN KEY (program_id) REFERENCES reward_program(id)
- fk_reward_allocation_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_reward_allocation_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_reward_allocation_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_reward_allocation_nominator FOREIGN KEY (nominator_id) REFERENCES employee(id)
- fk_reward_allocation_approver FOREIGN KEY (approver_id) REFERENCES employee(id)
- fk_reward_allocation_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_allocation_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_reward_amount_positive CHECK (reward_amount > 0)
- chk_points_positive CHECK (reward_points >= 0)
- chk_percentage_range CHECK (reward_percentage BETWEEN 0 AND 100)
- chk_performance_range CHECK (performance_value IS NULL OR performance_value >= 0)
- chk_net_amount_valid CHECK (net_amount IS NULL OR net_amount >= 0)
- chk_effective_order CHECK (expiry_date IS NULL OR expiry_date >= effective_date)
```

## 7.3.4 Budget & Policy Governance Schema

```sql
Table: reward_budget
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- program_id: UUID (Foreign Key to reward_program)
- budget_code: VARCHAR(50) (Required, Unique, Indexed)
- budget_name: VARCHAR(200) (Required)
- budget_type: ENUM('Annual', 'Quarterly', 'Monthly', 'Program', 'Department', 'Team', 'Project')
- budget_category: ENUM('Operating', 'Capital', 'Discretionary', 'Reserved', 'Contingency')
- fiscal_year: INTEGER (Required)
- fiscal_quarter: INTEGER (Default: 0)
- department_id: UUID (Foreign Key to department)
- team_id: UUID (Foreign Key to team)
- budget_owner_id: UUID (Foreign Key to employee)
- budget_approver_id: UUID (Foreign Key to employee)
- currency_code: VARCHAR(10) (Default: 'USD')
- total_budget: DECIMAL(15,2) (Required)
- allocated_budget: DECIMAL(15,2) (Default: 0.00)
- committed_budget: DECIMAL(15,2) (Default: 0.00)
- actual_spent: DECIMAL(15,2) (Default: 0.00)
- remaining_budget: DECIMAL(15,2)
- budget_status: ENUM('Draft', 'Proposed', 'Approved', 'Active', 'Frozen', 'Closed', 'Expired')
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- effective_from: DATE (Required)
- effective_to: DATE
- budget_rules: JSON (Budget rules and constraints)
- spending_limits: JSON (Spending limits and approval thresholds)
- variance_threshold: DECIMAL(5,2) (Default: 10.00)
- utilization_target: DECIMAL(5,2) (Default: 80.00)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_reward_budget_company_code (company_id, budget_code)
- INDEX idx_company_id (company_id)
- INDEX idx_program_id (program_id)
- INDEX idx_budget_type (budget_type)
- INDEX idx_budget_category (budget_category)
- INDEX idx_fiscal_year (fiscal_year)
- INDEX idx_fiscal_quarter (fiscal_quarter)
- INDEX idx_department_id (department_id)
- INDEX idx_team_id (team_id)
- INDEX idx_budget_owner_id (budget_owner_id)
- INDEX idx_budget_approver_id (budget_approver_id)
- INDEX idx_total_budget (total_budget)
- INDEX idx_budget_status (budget_status)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_reward_budget_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_budget_program FOREIGN KEY (program_id) REFERENCES reward_program(id)
- fk_reward_budget_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_reward_budget_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_reward_budget_owner FOREIGN KEY (budget_owner_id) REFERENCES employee(id)
- fk_reward_budget_approver FOREIGN KEY (budget_approver_id) REFERENCES employee(id)
- fk_reward_budget_approval_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_reward_budget_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_reward_budget_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_fiscal_positive CHECK (fiscal_year > 0 AND fiscal_quarter >= 0 AND fiscal_quarter <= 4)
- chk_budget_positive CHECK (total_budget >= 0 AND allocated_budget >= 0 AND committed_budget >= 0 AND actual_spent >= 0)
- chk_remaining_calculation CHECK (remaining_budget = total_budget - actual_spent)
- chk_threshold_range CHECK (variance_threshold BETWEEN 0 AND 100)
- chk_utilization_range CHECK (utilization_target BETWEEN 0 AND 100)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

```sql
Table: reward_policy_enforcement
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- program_id: UUID (Foreign Key to reward_program)
- policy_name: VARCHAR(200) (Required)
- policy_type: ENUM('Eligibility', 'Frequency', 'Amount', 'Combination', 'Approval', 'Tax', 'Reporting')
- enforcement_level: ENUM('Warning', 'Block', 'Exception', 'Override', 'Audit')
- policy_condition: JSON (Policy conditions and logic)
- action_required: ENUM('Notify Manager', 'Notify HR', 'Require Approval', 'Block Transaction', 'Log Exception')
- notification_recipients: JSON (Array of user IDs to notify)
- escalation_rules: JSON (Escalation conditions and recipients)
- exception_workflow_id: UUID (Foreign Key to approval_workflow)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_program_id (program_id)
- INDEX idx_policy_type (policy_type)
- INDEX idx_enforcement_level (enforcement_level)
- INDEX idx_action_required (action_required)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)
- INDEX idx_effective_to (effective_to)

Constraints:
- fk_reward_policy_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_policy_program FOREIGN KEY (program_id) REFERENCES reward_program(id)
- fk_reward_policy_exception_workflow FOREIGN KEY (exception_workflow_id) REFERENCES approval_workflow(id)
- fk_reward_policy_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_policy_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

## 7.3.5 Integration & Audit Performance Schema

```sql
Table: reward_integration
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- integration_type: ENUM('Payroll', 'HRIS', 'Performance', 'Benefits', 'Communication', 'External API')
- external_system: VARCHAR(100) (Required)
- external_system_id: VARCHAR(200) (Required)
- integration_name: VARCHAR(200) (Required)
- integration_description: TEXT
- endpoint_url: VARCHAR(500)
- authentication_method: ENUM('API Key', 'OAuth 2.0', 'Basic Auth', 'Certificate')
- authentication_config: JSON (Encrypted authentication credentials)
- sync_frequency: ENUM('Real-time', 'Hourly', 'Daily', 'Weekly', 'On-demand')
- sync_direction: ENUM('Bidirectional', 'Inbound', 'Outbound')
- data_mapping: JSON (Field mapping configuration)
- sync_status: ENUM('Active', 'Inactive', 'Error', 'Paused')
- last_sync_at: TIMESTAMP
- next_sync_at: TIMESTAMP
- error_count: INTEGER (Default: 0)
- max_retry_attempts: INTEGER (Default: 3)
- retry_delay_minutes: INTEGER (Default: 60)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_integration_type (integration_type)
- INDEX idx_external_system (external_system)
- INDEX idx_external_system_id (external_system_id)
- INDEX idx_sync_status (sync_status)
- INDEX idx_sync_frequency (sync_frequency)
- INDEX idx_last_sync_at (last_sync_at)
- INDEX idx_next_sync_at (next_sync_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_reward_integration_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_integration_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retry_positive CHECK (max_retry_attempts >= 0 AND retry_delay_minutes >= 0)
```

```sql
Table: reward_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'Approve', 'Reject', 'Process', 'Pay', 'Cancel', 'Adjust')
- entity_type: ENUM('Program', 'Allocation', 'Budget', 'Policy', 'Integration', 'Payment')
- entity_id: UUID
- old_values: JSON (Previous values before change)
- new_values: JSON (New values after change)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- affected_employees: INTEGER (Default: 0)
- financial_impact: DECIMAL(15,2)
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_entity_id (entity_id)
- INDEX idx_performed_by_user_id (performed_by_user_id)
- INDEX idx_timestamp (timestamp)
- INDEX idx_financial_impact (financial_impact)

Constraints:
- fk_reward_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
```

```sql
Table: reward_performance_metrics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- metric_type: ENUM('Allocation Volume', 'Processing Time', 'Budget Utilization', 'Approval Rate', 'Payment Success', 'Integration Sync')
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2) (Required)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- target_value: DECIMAL(15,2)
- achievement_percentage: DECIMAL(5,2)
- calculation_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Annually')
- calculation_date: DATE (Required)
- program_id: UUID (Foreign Key to reward_program)
- department_id: UUID (Foreign Key to department)
- additional_metrics: JSON (Additional KPIs and breakdowns)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_metric_type (metric_type)
- INDEX idx_metric_name (metric_name)
- INDEX idx_calculation_period (calculation_period)
- INDEX idx_calculation_date (calculation_date)
- INDEX idx_program_id (program_id)
- INDEX idx_department_id (department_id)

Constraints:
- fk_reward_performance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_performance_program FOREIGN KEY (program_id) REFERENCES reward_program(id)
- fk_reward_performance_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_reward_performance_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- chk_achievement_range CHECK (achievement_percentage BETWEEN 0 AND 100)
```

## 7.3.6 Tax Compliance & Reporting Schema

```sql
Table: reward_tax_configuration
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- jurisdiction: VARCHAR(100) (Required)
- tax_year: INTEGER (Required)
- tax_treatment_type: ENUM('Taxable', 'Non-Taxable', 'Qualified', 'Non-Qualified', 'De Minimis', 'Exempt')
- reward_type: ENUM('Cash Award', 'Gift Card', 'Points', 'Voucher', 'Travel', 'Equipment', 'Training')
- minimum_amount: DECIMAL(15,2) (Default: 0.00)
- maximum_amount: DECIMAL(15,2)
- tax_rate: DECIMAL(5,4) (Default: 0.0000)
- withholding_rate: DECIMAL(5,4) (Default: 0.0000)
- reporting_threshold: DECIMAL(15,2) (Default: 600.00)
- form_type: VARCHAR(50) (W-2, 1099-NEC, etc.)
- reporting_category: VARCHAR(100)
- tax_code: VARCHAR(20)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_jurisdiction (jurisdiction)
- INDEX idx_tax_year (tax_year)
- INDEX idx_tax_treatment_type (tax_treatment_type)
- INDEX idx_reward_type (reward_type)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_reward_tax_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_tax_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_tax_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_tax_year_positive CHECK (tax_year > 0)
- chk_amount_order CHECK (maximum_amount IS NULL OR minimum_amount <= maximum_amount)
- chk_rate_range CHECK (tax_rate BETWEEN 0 AND 1 AND withholding_rate BETWEEN 0 AND 1)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

```sql
Table: reward_tax_reporting
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- allocation_id: UUID (Foreign Key to reward_allocation)
- employee_id: UUID (Foreign Key to employee)
- tax_year: INTEGER (Required)
- reporting_period: ENUM('Annual', 'Quarterly', 'Monthly')
- gross_amount: DECIMAL(15,2) (Required)
- taxable_amount: DECIMAL(15,2) (Required)
- tax_withheld: DECIMAL(15,2) (Default: 0.00)
- net_amount: DECIMAL(15,2) (Required)
- form_type: VARCHAR(50) (Required)
- box_number: VARCHAR(10)
- reporting_status: ENUM('Pending', 'Filed', 'Corrected', 'Amended')
- filing_date: DATE
- correction_reason: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_allocation_id (allocation_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_tax_year (tax_year)
- INDEX idx_reporting_period (reporting_period)
- INDEX idx_form_type (form_type)
- INDEX idx_reporting_status (reporting_status)
- INDEX idx_filing_date (filing_date)

Constraints:
- fk_reward_tax_reporting_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_tax_reporting_allocation FOREIGN KEY (allocation_id) REFERENCES reward_allocation(id)
- fk_reward_tax_reporting_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_reward_tax_reporting_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_tax_year_positive CHECK (tax_year > 0)
- chk_amounts_positive CHECK (gross_amount >= 0 AND taxable_amount >= 0 AND tax_withheld >= 0 AND net_amount >= 0)
```

## 7.3.7 Analytics & Insights Schema

```sql
Table: reward_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- program_id: UUID (Foreign Key to reward_program)
- analysis_type: ENUM('Participation', 'Utilization', 'ROI', 'Engagement Impact', 'Cost Analysis', 'Trend Analysis', 'Predictive')
- analysis_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- analysis_date: DATE (Required)
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2) (Required)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- target_value: DECIMAL(15,2)
- achievement_percentage: DECIMAL(5,2)
- department_id: UUID (Foreign Key to department)
- team_id: UUID (Foreign Key to team)
- employee_count: INTEGER (Default: 0)
- total_rewards: INTEGER (Default: 0)
- total_amount: DECIMAL(15,2) (Default: 0.00)
- average_reward: DECIMAL(15,2) (Default: 0.00)
- satisfaction_score: DECIMAL(3,2) (Default: 0.00)
- engagement_impact: DECIMAL(5,2) (Default: 0.00)
- retention_impact: DECIMAL(5,2) (Default: 0.00)
- additional_metrics: JSON (Additional KPIs and breakdowns)
- data_quality_score: DECIMAL(3,2) (Check: 1.00 TO 5.00)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_program_id (program_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_metric_name (metric_name)
- INDEX idx_department_id (department_id)
- INDEX idx_team_id (team_id)
- INDEX idx_satisfaction_score (satisfaction_score)

Constraints:
- fk_reward_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_analytics_program FOREIGN KEY (program_id) REFERENCES reward_program(id)
- fk_reward_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_reward_analytics_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_reward_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- chk_positive_counts CHECK (employee_count >= 0 AND total_rewards >= 0)
- chk_positive_amounts CHECK (total_amount >= 0 AND average_reward >= 0)
- chk_score_ranges CHECK (satisfaction_score BETWEEN 0 AND 5 AND data_quality_score BETWEEN 1 AND 5)
- chk_percentage_ranges CHECK (achievement_percentage BETWEEN 0 AND 100 AND engagement_impact BETWEEN 0 AND 100 AND retention_impact BETWEEN 0 AND 100)
```

## 7.3.8 Communication & Notification Schema

```sql
Table: reward_notification_template
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- template_code: VARCHAR(50) (Required, Unique, Indexed)
- template_name: VARCHAR(200) (Required)
- template_type: ENUM('Reward Notification', 'Approval Request', 'Approval Status', 'Payment Confirmation', 'Budget Alert', 'Policy Violation', 'Announcement')
- notification_channel: ENUM('Email', 'SMS', 'In-App', 'Push', 'Slack', 'Teams', 'Webhook')
- subject_template: VARCHAR(500) (Required)
- body_template: TEXT (Required)
- template_variables: JSON (Available template variables)
- language_code: VARCHAR(10) (Default: 'en')
- is_default: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_reward_notification_template_company_code (company_id, template_code)
- INDEX idx_company_id (company_id)
- INDEX idx_template_type (template_type)
- INDEX idx_notification_channel (notification_channel)
- INDEX idx_language_code (language_code)
- INDEX idx_is_default (is_default)
- INDEX idx_is_active (is_active)

Constraints:
- fk_reward_notification_template_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_notification_template_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_notification_template_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
```

```sql
Table: reward_notification_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- allocation_id: UUID (Foreign Key to reward_allocation)
- template_id: UUID (Foreign Key to reward_notification_template)
- recipient_id: UUID (Foreign Key to employee)
- recipient_type: ENUM('Employee', 'Manager', 'HR Admin', 'Finance', 'System Admin')
- notification_type: ENUM('Reward Notification', 'Approval Request', 'Approval Status', 'Payment Confirmation', 'Budget Alert', 'Policy Violation')
- notification_channel: ENUM('Email', 'SMS', 'In-App', 'Push', 'Slack', 'Teams', 'Webhook')
- subject: VARCHAR(500)
- message_body: TEXT (Required)
- recipient_email: VARCHAR(200)
- recipient_phone: VARCHAR(50)
- send_status: ENUM('Pending', 'Sent', 'Delivered', 'Failed', 'Bounced', 'Opened', 'Clicked')
- sent_at: TIMESTAMP
- delivered_at: TIMESTAMP
- opened_at: TIMESTAMP
- clicked_at: TIMESTAMP
- error_message: TEXT
- retry_count: INTEGER (Default: 0)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_allocation_id (allocation_id)
- INDEX idx_template_id (template_id)
- INDEX idx_recipient_id (recipient_id)
- INDEX idx_recipient_type (recipient_type)
- INDEX idx_notification_type (notification_type)
- INDEX idx_notification_channel (notification_channel)
- INDEX idx_send_status (send_status)
- INDEX idx_sent_at (sent_at)
- INDEX idx_retry_count (retry_count)

Constraints:
- fk_reward_notification_log_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_notification_log_allocation FOREIGN KEY (allocation_id) REFERENCES reward_allocation(id)
- fk_reward_notification_log_template FOREIGN KEY (template_id) REFERENCES reward_notification_template(id)
- fk_reward_notification_log_recipient FOREIGN KEY (recipient_id) REFERENCES employee(id)
- chk_retry_positive CHECK (retry_count >= 0)
```

## 7.3.9 User Preferences & Personalization Schema

```sql
Table: reward_user_preferences
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- user_id: UUID (Foreign Key to user)
- notification_preferences: JSON (Notification settings and preferences)
- email_notifications: BOOLEAN (Default: TRUE)
- sms_notifications: BOOLEAN (Default: FALSE)
- in_app_notifications: BOOLEAN (Default: TRUE)
- push_notifications: BOOLEAN (Default: TRUE)
- communication_frequency: ENUM('Real-time', 'Daily Digest', 'Weekly Summary', 'Monthly Report')
- language_preference: VARCHAR(10) (Default: 'en')
- timezone: VARCHAR(50) (Default: 'UTC')
- dashboard_widgets: JSON (Custom dashboard widget configuration)
- report_preferences: JSON (Report subscription and delivery preferences)
- alert_thresholds: JSON (Personal alert thresholds and triggers)
- privacy_settings: JSON (Privacy and data sharing preferences)
- accessibility_settings: JSON (Accessibility and display preferences)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_email_notifications (email_notifications)
- INDEX idx_sms_notifications (sms_notifications)
- INDEX idx_in_app_notifications (in_app_notifications)
- INDEX idx_push_notifications (push_notifications)
- INDEX idx_communication_frequency (communication_frequency)
- INDEX idx_language_preference (language_preference)

Constraints:
- fk_reward_user_preferences_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_user_preferences_user FOREIGN KEY (user_id) REFERENCES user(id)
```

## 7.3.10 Mobile & API Access Schema

```sql
Table: reward_mobile_app
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- app_version: VARCHAR(20) (Required)
- platform: ENUM('iOS', 'Android', 'Web', 'Hybrid')
- build_number: VARCHAR(20) (Required)
- release_date: DATE (Required)
- is_current: BOOLEAN (Default: FALSE)
- is_mandatory: BOOLEAN (Default: FALSE)
- min_supported_version: VARCHAR(20)
- features_enabled: JSON (Feature flags and capabilities)
- api_endpoints: JSON (Mobile-specific API endpoints)
- offline_capabilities: JSON (Offline functionality support)
- security_config: JSON (Mobile security settings)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_app_version (app_version)
- INDEX idx_platform (platform)
- INDEX idx_is_current (is_current)
- INDEX idx_is_mandatory (is_mandatory)
- INDEX idx_release_date (release_date)

Constraints:
- fk_reward_mobile_app_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_mobile_app_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

```sql
Table: reward_api_access
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- api_key: VARCHAR(200) (Required, Unique, Indexed)
- api_name: VARCHAR(200) (Required)
- api_description: TEXT
- api_version: VARCHAR(20) (Default: 'v1')
- endpoint_url: VARCHAR(500) (Required)
- authentication_type: ENUM('API Key', 'OAuth 2.0', 'JWT', 'Basic Auth')
- rate_limit_per_hour: INTEGER (Default: 1000)
- rate_limit_per_day: INTEGER (Default: 10000)
- allowed_methods: JSON (HTTP methods allowed)
- allowed_ips: JSON (IP whitelist)
- webhook_url: VARCHAR(500)
- webhook_events: JSON (Events that trigger webhooks)
- is_active: BOOLEAN (Default: TRUE)
- is_internal: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- last_used_at: TIMESTAMP
- usage_count: INTEGER (Default: 0)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_api_key (api_key)
- INDEX idx_api_version (api_version)
- INDEX idx_is_active (is_active)
- INDEX idx_is_internal (is_internal)
- INDEX idx_last_used_at (last_used_at)
- INDEX idx_usage_count (usage_count)

Constraints:
- fk_reward_api_access_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_api_access_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_rate_limits_positive CHECK (rate_limit_per_hour > 0 AND rate_limit_per_day > 0)
- chk_usage_positive CHECK (usage_count >= 0)
```

## 7.3.11 Security & Compliance Schema

```sql
Table: reward_security_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- security_policy_name: VARCHAR(200) (Required)
- policy_type: ENUM('Data Encryption', 'Access Control', 'Audit Logging', 'Session Management', 'Password Policy', 'Two-Factor Auth')
- security_level: ENUM('Basic', 'Standard', 'Enhanced', 'High', 'Maximum')
- configuration: JSON (Security configuration parameters)
- encryption_algorithm: VARCHAR(50)
- key_rotation_days: INTEGER (Default: 90)
- session_timeout_minutes: INTEGER (Default: 30)
- max_login_attempts: INTEGER (Default: 5)
- lockout_duration_minutes: INTEGER (Default: 15)
- password_min_length: INTEGER (Default: 8)
- password_complexity: JSON (Password complexity requirements)
- mfa_required: BOOLEAN (Default: FALSE)
- mfa_methods: JSON (Allowed MFA methods)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_policy_type (policy_type)
- INDEX idx_security_level (security_level)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_reward_security_config_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_security_config_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_security_config_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_positive_values CHECK (key_rotation_days > 0 AND session_timeout_minutes > 0 AND max_login_attempts > 0 AND lockout_duration_minutes > 0 AND password_min_length > 0)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

```sql
Table: reward_compliance_audit
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- audit_type: ENUM('SOX', 'GDPR', 'CCPA', 'HIPAA', 'ISO 27001', 'Internal', 'External')
- audit_scope: ENUM('Full System', 'Data Privacy', 'Security', 'Financial', 'Operational')
- audit_period_start: DATE (Required)
- audit_period_end: DATE (Required)
- auditor_name: VARCHAR(200)
- auditor_organization: VARCHAR(200)
- audit_status: ENUM('Planned', 'In Progress', 'Completed', 'Passed', 'Failed', 'Remediation Required')
- findings_count: INTEGER (Default: 0)
- critical_findings: INTEGER (Default: 0)
- high_findings: INTEGER (Default: 0)
- medium_findings: INTEGER (Default: 0)
- low_findings: INTEGER (Default: 0)
- compliance_score: DECIMAL(5,2) (Default: 0.00)
- remediation_plan: TEXT
- remediation_due_date: DATE
- audit_report_url: VARCHAR(500)
- evidence_documents: JSON (Links to evidence documents)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_audit_type (audit_type)
- INDEX idx_audit_scope (audit_scope)
- INDEX idx_audit_status (audit_status)
- INDEX idx_audit_period_start (audit_period_start)
- INDEX idx_audit_period_end (audit_period_end)
- INDEX idx_compliance_score (compliance_score)

Constraints:
- fk_reward_compliance_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_compliance_audit_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (audit_period_end >= audit_period_start)
- chk_positive_findings CHECK (findings_count >= 0 AND critical_findings >= 0 AND high_findings >= 0 AND medium_findings >= 0 AND low_findings >= 0)
- chk_score_range CHECK (compliance_score BETWEEN 0 AND 100)
```

## 7.3.12 Workflow & Process Automation Schema

```sql
Table: reward_workflow_definition
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_name: VARCHAR(200) (Required)
- workflow_type: ENUM('Reward Approval', 'Budget Approval', 'Policy Exception', 'Tax Review', 'Compliance Check')
- workflow_category: ENUM('Standard', 'Emergency', 'High Value', 'Executive', 'Bulk Processing')
- trigger_event: ENUM('Allocation Created', 'Budget Exceeded', 'Policy Violation', 'Scheduled Review', 'Manual Trigger')
- workflow_steps: JSON (Ordered workflow steps and configurations)
- approval_levels: JSON (Multi-level approval requirements)
- escalation_rules: JSON (Escalation conditions and paths)
- timeout_settings: JSON (Step timeout and reminder settings)
- notification_rules: JSON (Notification triggers and recipients)
- is_active: BOOLEAN (Default: TRUE)
- version: INTEGER (Default: 1)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_type (workflow_type)
- INDEX idx_workflow_category (workflow_category)
- INDEX idx_trigger_event (trigger_event)
- INDEX idx_is_active (is_active)
- INDEX idx_version (version)

Constraints:
- fk_reward_workflow_definition_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_workflow_definition_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_workflow_definition_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (version > 0)
```

```sql
Table: reward_workflow_instance
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_definition_id: UUID (Foreign Key to reward_workflow_definition)
- allocation_id: UUID (Foreign Key to reward_allocation)
- instance_name: VARCHAR(200) (Required)
- current_step: INTEGER (Default: 1)
- workflow_status: ENUM('Initiated', 'In Progress', 'Pending Approval', 'Approved', 'Rejected', 'Completed', 'Cancelled', 'Escalated')
- priority_level: ENUM('Low', 'Normal', 'High', 'Critical', 'Emergency')
- initiated_by_user_id: UUID (Foreign Key to user)
- current_assignee_id: UUID (Foreign Key to user)
- started_at: TIMESTAMP (Auto)
- due_date: TIMESTAMP
- completed_at: TIMESTAMP
- workflow_data: JSON (Workflow-specific data and context)
- step_history: JSON (History of completed steps)
- comments: TEXT
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_definition_id (workflow_definition_id)
- INDEX idx_allocation_id (allocation_id)
- INDEX idx_workflow_status (workflow_status)
- INDEX idx_priority_level (priority_level)
- INDEX idx_initiated_by_user_id (initiated_by_user_id)
- INDEX idx_current_assignee_id (current_assignee_id)
- INDEX idx_started_at (started_at)
- INDEX idx_due_date (due_date)

Constraints:
- fk_reward_workflow_instance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_workflow_instance_definition FOREIGN KEY (workflow_definition_id) REFERENCES reward_workflow_definition(id)
- fk_reward_workflow_instance_allocation FOREIGN KEY (allocation_id) REFERENCES reward_allocation(id)
- fk_reward_workflow_instance_initiated_by FOREIGN KEY (initiated_by_user_id) REFERENCES user(id)
- fk_reward_workflow_instance_current_assignee FOREIGN KEY (current_assignee_id) REFERENCES user(id)
- chk_step_positive CHECK (current_step > 0)
```

## 7.3.13 Data Archiving & Retention Schema

```sql
Table: reward_archival_policy
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- policy_name: VARCHAR(200) (Required)
- entity_type: ENUM('Allocation', 'Budget', 'Audit Log', 'Notification', 'Analytics', 'Tax Report')
- retention_period_years: INTEGER (Required)
- archival_trigger: ENUM('Age Based', 'Event Based', 'Manual', 'Scheduled')
- archival_condition: JSON (Conditions for archival)
- storage_location: ENUM('Cold Storage', 'Archive Database', 'File System', 'Cloud Archive')
- compression_enabled: BOOLEAN (Default: TRUE)
- encryption_enabled: BOOLEAN (Default: TRUE)
- access_restriction: ENUM('No Access', 'Read Only', 'Admin Only', 'Compliance Only')
- retention_after_archive_years: INTEGER (Default: 7)
- auto_delete_after_retention: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- last_run_date: DATE
- next_run_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_entity_type (entity_type)
- INDEX idx_archival_trigger (archival_trigger)
- INDEX idx_storage_location (storage_location)
- INDEX idx_is_active (is_active)
- INDEX idx_last_run_date (last_run_date)
- INDEX idx_next_run_date (next_run_date)

Constraints:
- fk_reward_archival_policy_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_archival_policy_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_reward_archival_policy_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (retention_period_years > 0 AND retention_after_archive_years >= 0)
```

```sql
Table: reward_archived_data
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- archival_policy_id: UUID (Foreign Key to reward_archival_policy)
- original_table_name: VARCHAR(100) (Required)
- original_record_id: UUID (Required)
- entity_type: ENUM('Allocation', 'Budget', 'Audit Log', 'Notification', 'Analytics', 'Tax Report')
- archived_data: JSON (Complete archived record data)
- archive_date: DATE (Required)
- archive_reason: VARCHAR(200)
- storage_path: VARCHAR(500)
- file_size_bytes: BIGINT
- checksum_hash: VARCHAR(256)
- compression_ratio: DECIMAL(5,2)
- access_count: INTEGER (Default: 0)
- last_accessed_at: TIMESTAMP
- scheduled_deletion_date: DATE
- is_deleted: BOOLEAN (Default: FALSE)
- deleted_at: TIMESTAMP
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_archival_policy_id (archival_policy_id)
- INDEX idx_original_table_name (original_table_name)
- INDEX idx_original_record_id (original_record_id)
- INDEX idx_entity_type (entity_type)
- INDEX idx_archive_date (archive_date)
- INDEX idx_scheduled_deletion_date (scheduled_deletion_date)
- INDEX idx_is_deleted (is_deleted)

Constraints:
- fk_reward_archived_data_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_reward_archived_data_policy FOREIGN KEY (archival_policy_id) REFERENCES reward_archival_policy(id)
- fk_reward_archived_data_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_file_size_positive CHECK (file_size_bytes >= 0)
- chk_access_positive CHECK (access_count >= 0)
- chk_compression_range CHECK (compression_ratio BETWEEN 0 AND 1)
```

--- END OF SECTION 7.3.13 ---
