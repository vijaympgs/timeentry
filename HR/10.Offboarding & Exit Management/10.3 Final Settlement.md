## 10.3 Final Settlement

## 10.3.1 Business Purpose & Scope

## 10.3.1.1 Business Purpose

Final Settlement management provides a systematic framework for processing all financial and non-financial settlements for departing employees, ensuring accurate calculation of final payments, benefits settlements, tax compliance, and statutory requirements. This enables streamlined payroll processing, compliance with labor laws, accurate deductions, timely payments, and proper documentation while protecting company interests and maintaining positive employee relationships during separation.

## 10.3.1.2 Business Scope

Enable comprehensive final settlement management including salary calculations, benefits processing, tax deductions, statutory compliance, reimbursements, asset charges, loan recoveries, and final documentation. The system supports automated calculations, multi-currency processing, compliance verification, audit trails, and integration with payroll and finance systems while ensuring alignment with organizational policies, legal requirements, and tax regulations.

## 10.3.2 Settlement Calculation Engine Schema

```
Table: settlement_calculation_template
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- template_name: VARCHAR(200) (Required)
- template_code: VARCHAR(50) (Required, Unique, Indexed)
- template_version: INTEGER (Default: 1)
- employee_category: ENUM('Executive', 'Management', 'Professional', 'Technical', 'Administrative', 'Operational', 'Contract', 'Intern')
- employment_type: ENUM('Full Time', 'Part Time', 'Contract', 'Temporary', 'Consultant', 'Intern')
- jurisdiction: VARCHAR(100) (Required)
- currency_code: VARCHAR(3) (Required)
- tax_regime: ENUM('STANDARD', 'SPECIAL', 'EXEMPT', 'TREATY')
- calculation_method: ENUM('PRO_RATA', 'ACTUAL_DAYS', 'FIXED_AMOUNT', 'HYBRID')
- is_active: BOOLEAN (Default: TRUE)
- is_deleted: BOOLEAN (Default: FALSE)
- deleted_at: TIMESTAMP
- effective_date: DATE (Required)
- expiry_date: DATE
- template_description: TEXT
- calculation_rules: JSON (Business rules and formulas)
- deduction_rules: JSON (Deduction calculations)
- compliance_requirements: JSON (Legal and tax requirements)
- created_by_user_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_template_code_company_version (template_code, company_id, template_version)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_category (employee_category)
- INDEX idx_employment_type (employment_type)
- INDEX idx_jurisdiction (jurisdiction)
- INDEX idx_currency_code (currency_code)
- INDEX idx_is_active (is_active)
- INDEX idx_is_deleted (is_deleted)
- INDEX idx_effective_date (effective_date)
- INDEX idx_template_version (template_version)

Constraints:
- fk_settlement_template_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_template_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_settlement_template_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (template_version > 0)
```

## 10.3.3 Employee Settlement Process Schema

```
Table: employee_settlement_process
Fields:
- id: UUID (Primary Key)
- employee_id: UUID (Foreign Key to employee)
- company_id: UUID (Foreign Key to company)
- template_id: UUID (Foreign Key to settlement_calculation_template)
- separation_request_id: UUID (Foreign Key to separation_request)
- settlement_number: VARCHAR(50) (Required, Unique, Indexed)
- settlement_status: ENUM('Initiated', 'In Progress', 'Calculated', 'Pending Approval', 'Approved', 'Processed', 'Paid', 'On Hold', 'Cancelled', 'Failed')
- settlement_date: DATE (Required)
- payment_date: DATE
- currency_code: VARCHAR(3) (Required)
- exchange_rate: DECIMAL(10,6)
- gross_amount: DECIMAL(15,2)
- total_deductions: DECIMAL(15,2)
- net_amount: DECIMAL(15,2)
- tax_withheld: DECIMAL(15,2)
- other_deductions: DECIMAL(15,2)
- reimbursements: DECIMAL(15,2)
- bonus_payments: DECIMAL(15,2)
- leave_encashment: DECIMAL(15,2)
- gratuity_amount: DECIMAL(15,2)
- notice_period_pay: DECIMAL(15,2)
- severance_pay: DECIMAL(15,2)
- settlement_notes: TEXT
- calculation_summary: JSON (Detailed breakdown)
- assigned_payroll_processor_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- processed_by_user_id: UUID (Foreign Key to user)
- processed_at: TIMESTAMP
- initiated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_settlement_number_company (settlement_number, company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_company_id (company_id)
- INDEX idx_template_id (template_id)
- INDEX idx_settlement_status (settlement_status)
- INDEX idx_settlement_date (settlement_date)
- INDEX idx_payment_date (payment_date)
- INDEX idx_currency_code (currency_code)
- INDEX idx_assigned_payroll_processor (assigned_payroll_processor_id)

Constraints:
- fk_employee_settlement_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_employee_settlement_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_employee_settlement_template FOREIGN KEY (template_id) REFERENCES settlement_calculation_template(id)
- fk_employee_settlement_separation FOREIGN KEY (separation_request_id) REFERENCES separation_request(id)
- fk_employee_settlement_processor FOREIGN KEY (assigned_payroll_processor_id) REFERENCES user(id)
- fk_employee_settlement_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_employee_settlement_processed_by FOREIGN KEY (processed_by_user_id) REFERENCES user(id)
- fk_employee_settlement_initiated_by FOREIGN KEY (initiated_by_user_id) REFERENCES user(id)
- chk_exchange_rate_positive CHECK (exchange_rate > 0)
- chk_amounts_non_negative CHECK (gross_amount >= 0 AND total_deductions >= 0 AND net_amount >= 0)
```

## 10.3.4 Settlement Component Breakdown Schema

```
Table: settlement_component_breakdown
Fields:
- id: UUID (Primary Key)
- settlement_process_id: UUID (Foreign Key to employee_settlement_process)
- component_type: ENUM('SALARY', 'BONUS', 'COMMISSION', 'OVERTIME', 'LEAVE_ENCASHMENT', 'GRATUITY', 'SEVERANCE', 'NOTICE_PERIOD', 'REIMBURSEMENT', 'ALLOWANCE', 'DEDUCTION', 'TAX', 'LOAN_RECOVERY', 'ASSET_CHARGE', 'OTHER')
- component_name: VARCHAR(200) (Required)
- component_description: TEXT
- calculation_basis: ENUM('FIXED_AMOUNT', 'PERCENTAGE', 'FORMULA', 'MANUAL', 'SYSTEM_CALCULATED')
- calculation_formula: TEXT
- component_amount: DECIMAL(15,2) (Required)
- taxable_amount: DECIMAL(15,2)
- tax_rate: DECIMAL(5,4)
- currency_code: VARCHAR(3) (Required)
- exchange_rate: DECIMAL(10,6)
- is_taxable: BOOLEAN (Default: TRUE)
- is_deductible: BOOLEAN (Default: FALSE)
- is_mandatory: BOOLEAN (Default: FALSE)
- approval_required: BOOLEAN (Default: FALSE)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- calculation_date: TIMESTAMP (Auto)
- calculation_notes: TEXT
- supporting_document_ids: JSON (Array of document IDs)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_settlement_process_id (settlement_process_id)
- INDEX idx_component_type (component_type)
- INDEX idx_component_name (component_name)
- INDEX idx_calculation_basis (calculation_basis)
- INDEX idx_is_taxable (is_taxable)
- INDEX idx_is_deductible (is_deductible)
- INDEX idx_approval_required (approval_required)
- INDEX idx_calculation_date (calculation_date)

Constraints:
- fk_settlement_component_process FOREIGN KEY (settlement_process_id) REFERENCES employee_settlement_process(id)
- fk_settlement_component_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_settlement_component_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_exchange_rate_positive CHECK (exchange_rate > 0)
- chk_tax_rate_valid CHECK (tax_rate >= 0 AND tax_rate <= 1)
```

## 10.3.5 Tax Calculation Schema

```
Table: settlement_tax_calculation
Fields:
- id: UUID (Primary Key)
- settlement_process_id: UUID (Foreign Key to employee_settlement_process)
- tax_authority: VARCHAR(100) (Required)
- tax_type: ENUM('INCOME_TAX', 'SOCIAL_SECURITY', 'MEDICARE', 'UNEMPLOYMENT', 'PROFESSIONAL_TAX', 'OTHER')
- tax_year: INTEGER (Required)
- tax_period: ENUM('MONTHLY', 'QUARTERLY', 'ANNUAL', 'FINAL')
- taxable_income: DECIMAL(15,2) (Required)
- tax_rate: DECIMAL(5,4) (Required)
- tax_amount: DECIMAL(15,2) (Required)
- tax_deduction_method: ENUM('STANDARD', 'PROGRESSIVE', 'FLAT', 'TAX_CREDIT')
- tax_exemptions: DECIMAL(15,2)
- tax_deductions: DECIMAL(15,2)
- tax_credits: DECIMAL(15,2)
- surcharge_amount: DECIMAL(15,2)
- penalty_amount: DECIMAL(15,2)
- refund_amount: DECIMAL(15,2)
- tax_certificate_required: BOOLEAN (Default: TRUE)
- tax_certificate_issued: BOOLEAN (Default: FALSE)
- tax_certificate_number: VARCHAR(100)
- tax_certificate_date: DATE
- calculation_reference: VARCHAR(200)
- calculated_by_user_id: UUID (Foreign Key to user)
- verified_by_user_id: UUID (Foreign Key to user)
- verification_date: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_settlement_process_id (settlement_process_id)
- INDEX idx_tax_authority (tax_authority)
- INDEX idx_tax_type (tax_type)
- INDEX idx_tax_year (tax_year)
- INDEX idx_tax_period (tax_period)
- INDEX idx_tax_certificate_required (tax_certificate_required)

Constraints:
- fk_settlement_tax_process FOREIGN KEY (settlement_process_id) REFERENCES employee_settlement_process(id)
- fk_settlement_tax_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- fk_settlement_tax_verified_by FOREIGN KEY (verified_by_user_id) REFERENCES user(id)
- chk_tax_year_valid CHECK (tax_year >= 1900 AND tax_year <= 2100)
- chk_tax_rate_valid CHECK (tax_rate >= 0 AND tax_rate <= 1)
```

## 10.3.6 Settlement Payment Processing Schema

```
Table: settlement_payment_processing
Fields:
- id: UUID (Primary Key)
- settlement_process_id: UUID (Foreign Key to employee_settlement_process)
- payment_batch_number: VARCHAR(50) (Required, Unique, Indexed)
- payment_method: ENUM('BANK_TRANSFER', 'CASH', 'CHEQUE', 'PAYROLL_CARD', 'DIGITAL_WALLET', 'CRYPTOCURRENCY')
- payment_status: ENUM('Pending', 'Processing', 'Completed', 'Failed', 'Cancelled', 'Reversed')
- payment_date: DATE (Required)
- processing_date: TIMESTAMP
- completion_date: TIMESTAMP
- bank_name: VARCHAR(200)
- bank_branch: VARCHAR(200)
- account_number: VARCHAR(50)
- account_holder_name: VARCHAR(200)
- routing_number: VARCHAR(50)
- swift_code: VARCHAR(20)
- iban: VARCHAR(34)
- payment_reference: VARCHAR(200)
- transaction_id: VARCHAR(100)
- authorization_code: VARCHAR(100)
- payment_amount: DECIMAL(15,2) (Required)
- currency_code: VARCHAR(3) (Required)
- exchange_rate: DECIMAL(10,6)
- processing_fees: DECIMAL(10,2)
- bank_charges: DECIMAL(10,2)
- net_payment_amount: DECIMAL(15,2)
- payment_confirmation_sent: BOOLEAN (Default: FALSE)
- payment_confirmation_date: TIMESTAMP
- payment_receipt_issued: BOOLEAN (Default: FALSE)
- receipt_number: VARCHAR(50)
- receipt_date: DATE
- failure_reason: TEXT
- retry_count: INTEGER (Default: 0)
- max_retries: INTEGER (Default: 3)
- processed_by_user_id: UUID (Foreign Key to user)
- verified_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_payment_batch_company (payment_batch_number, company_id)
- INDEX idx_settlement_process_id (settlement_process_id)
- INDEX idx_payment_method (payment_method)
- INDEX idx_payment_status (payment_status)
- INDEX idx_payment_date (payment_date)
- INDEX idx_bank_name (bank_name)
- INDEX idx_transaction_id (transaction_id)

Constraints:
- fk_settlement_payment_process FOREIGN KEY (settlement_process_id) REFERENCES employee_settlement_process(id)
- fk_settlement_payment_processed_by FOREIGN KEY (processed_by_user_id) REFERENCES user(id)
- fk_settlement_payment_verified_by FOREIGN KEY (verified_by_user_id) REFERENCES user(id)
- chk_exchange_rate_positive CHECK (exchange_rate > 0)
- chk_retry_count_valid CHECK (retry_count >= 0 AND retry_count <= max_retries)
- chk_payment_amount_positive CHECK (payment_amount > 0)
```

## 10.3.7 Settlement Documentation Schema

```
Table: settlement_documentation
Fields:
- id: UUID (Primary Key)
- settlement_process_id: UUID (Foreign Key to employee_settlement_process)
- document_type: ENUM('SETTLEMENT_LETTER', 'PAYSLIP', 'TAX_CERTIFICATE', 'FORM_16', 'EXPERIENCE_CERTIFICATE', 'RELIEVING_LETTER', 'FULL_AND_FINAL_SETTLEMENT', 'NON_DISCLOSURE_AGREEMENT', 'OTHER')
- document_name: VARCHAR(200) (Required)
- document_description: TEXT
- document_template_id: UUID (Foreign Key to document_template)
- document_number: VARCHAR(100)
- issue_date: DATE
- expiry_date: DATE
- document_status: ENUM('Generated', 'Signed', 'Submitted', 'Verified', 'Archived')
- document_format: ENUM('PDF', 'DOCX', 'HTML', 'JSON', 'XML')
- storage_location: VARCHAR(500)
- file_path: VARCHAR(500)
- file_size_bytes: INTEGER
- file_hash: VARCHAR(256)
- digital_signature_required: BOOLEAN (Default: FALSE)
- digital_signature_applied: BOOLEAN (Default: FALSE)
- signature_data: JSON (Digital signature information)
- employee_acknowledgment: BOOLEAN (Default: FALSE)
- acknowledgment_date: TIMESTAMP
- hr_representative_signature: BOOLEAN (Default: FALSE)
- hr_signature_date: TIMESTAMP
- legal_review_required: BOOLEAN (Default: FALSE)
- legal_review_completed: BOOLEAN (Default: FALSE)
- legal_review_date: TIMESTAMP
- distributed_to_employee: BOOLEAN (Default: FALSE)
- distribution_date: TIMESTAMP
- distribution_method: ENUM('EMAIL', 'PORTAL', 'POST', 'IN_PERSON', 'AUTOMATED')
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_settlement_process_id (settlement_process_id)
- INDEX idx_document_type (document_type)
- INDEX idx_document_number (document_number)
- INDEX idx_document_status (document_status)
- INDEX idx_issue_date (issue_date)
- INDEX idx_expiry_date (expiry_date)
- INDEX idx_digital_signature_required (digital_signature_required)

Constraints:
- fk_settlement_document_process FOREIGN KEY (settlement_process_id) REFERENCES employee_settlement_process(id)
- fk_settlement_document_template FOREIGN KEY (document_template_id) REFERENCES document_template(id)
- fk_settlement_document_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_file_size_positive CHECK (file_size_bytes >= 0)
```

## 10.3.8 Settlement Governance & Access Control Schema

```
Table: settlement_role_permission
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- role_name: VARCHAR(100) (Required, Unique, Indexed)
- role_description: TEXT
- role_type: ENUM('SYSTEM_ADMIN', 'PAYROLL_ADMIN', 'HR_MANAGER', 'FINANCE_MANAGER', 'COMPENSATION_ANALYST', 'SETTLEMENT_PROCESSOR', 'TAX_SPECIALIST', 'VIEWER', 'AUDITOR')
- can_create_templates: BOOLEAN (Default: FALSE)
- can_edit_templates: BOOLEAN (Default: FALSE)
- can_delete_templates: BOOLEAN (Default: FALSE)
- can_initiate_settlement: BOOLEAN (Default: FALSE)
- can_calculate_settlement: BOOLEAN (Default: FALSE)
- can_approve_settlement: BOOLEAN (Default: FALSE)
- can_process_payments: BOOLEAN (Default: FALSE)
- can_reverse_payments: BOOLEAN (Default: FALSE)
- can_manage_tax_calculations: BOOLEAN (Default: FALSE)
- can_generate_documents: BOOLEAN (Default: FALSE)
- can_view_analytics: BOOLEAN (Default: FALSE)
- can_export_reports: BOOLEAN (Default: FALSE)
- can_manage_compliance: BOOLEAN (Default: FALSE)
- can_view_audit_logs: BOOLEAN (Default: FALSE)
- data_access_level: ENUM('ALL', 'DEPARTMENT', 'OWN', 'NONE')
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_role_name_company (role_name, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_role_type (role_type)
- INDEX idx_is_active (is_active)
- INDEX idx_data_access_level (data_access_level)

Constraints:
- fk_settlement_role_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_role_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

```
Table: settlement_user_role_assignment
Fields:
- id: UUID (Primary Key)
- user_id: UUID (Foreign Key to user)
- role_id: UUID (Foreign Key to settlement_role_permission)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- assigned_by_user_id: UUID (Foreign Key to user)
- assigned_date: TIMESTAMP (Auto)
- expiry_date: DATE
- is_active: BOOLEAN (Default: TRUE)
- assignment_notes: TEXT
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_user_role_company (user_id, role_id, company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_role_id (role_id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_is_active (is_active)
- INDEX idx_expiry_date (expiry_date)

Constraints:
- fk_settlement_user_role_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_settlement_user_role_role FOREIGN KEY (role_id) REFERENCES settlement_role_permission(id)
- fk_settlement_user_role_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_user_role_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_settlement_user_role_assigned_by FOREIGN KEY (assigned_by_user_id) REFERENCES user(id)
```

## 10.3.9 Settlement Compliance Management Schema

```
Table: settlement_compliance_management
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- settlement_process_id: UUID (Foreign Key to employee_settlement_process)
- compliance_type: ENUM('LABOR_LAWS', 'TAX_REGULATIONS', 'MINIMUM_WAGE', 'GRATUITY_RULES', 'SEVERANCE_RULES', 'TIMELINE_COMPLIANCE', 'DOCUMENTATION', 'PAYMENT_PROCESSING', 'DATA_PRIVACY')
- compliance_requirement: VARCHAR(200) (Required)
- jurisdiction: VARCHAR(100) (Required)
- compliance_standard: VARCHAR(200) (Required)
- check_status: ENUM('Compliant', 'Non-Compliant', 'Requires Action', 'Exemption', 'Pending Review')
- risk_level: ENUM('Low', 'Medium', 'High', 'Critical')
- compliance_score: DECIMAL(5,2)
- violation_details: TEXT
- corrective_action_required: TEXT
- corrective_action_deadline: DATE
- corrective_action_status: ENUM('Not Started', 'In Progress', 'Completed', 'Overdue')
- exemption_approved: BOOLEAN (Default: FALSE)
- exemption_reason: TEXT
- exemption_approved_by_user_id: UUID (Foreign Key to user)
- exemption_approved_at: TIMESTAMP
- supporting_documents: JSON (Array of document IDs)
- checked_by_user_id: UUID (Foreign Key to user)
- next_review_date: DATE
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_settlement_process_id (settlement_process_id)
- INDEX idx_compliance_type (compliance_type)
- INDEX idx_jurisdiction (jurisdiction)
- INDEX idx_check_status (check_status)
- INDEX idx_risk_level (risk_level)
- INDEX idx_corrective_action_deadline (corrective_action_deadline)

Constraints:
- fk_settlement_compliance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_compliance_process FOREIGN KEY (settlement_process_id) REFERENCES employee_settlement_process(id)
- fk_settlement_compliance_exemption_approved_by FOREIGN KEY (exemption_approved_by_user_id) REFERENCES user(id)
- fk_settlement_compliance_checked_by FOREIGN KEY (checked_by_user_id) REFERENCES user(id)
- chk_compliance_score_range CHECK (compliance_score BETWEEN 0 AND 100)
```

## 10.3.10 Settlement Integration Framework Schema

```
Table: settlement_integration_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- integration_name: VARCHAR(200) (Required)
- integration_type: ENUM('PAYROLL_SYSTEM', 'BANKING_SYSTEM', 'TAX_SYSTEM', 'BENEFITS_SYSTEM', 'DOCUMENT_MANAGEMENT', 'NOTIFICATION', 'EMAIL', 'API_WEBHOOK')
- system_endpoint: VARCHAR(500) (Required)
- authentication_method: ENUM('API_KEY', 'OAUTH2', 'BASIC_AUTH', 'CERTIFICATE')
- authentication_config: JSON (Authentication credentials and settings)
- data_mapping: JSON (Field mapping between systems)
- sync_frequency: ENUM('REAL_TIME', 'HOURLY', 'DAILY', 'WEEKLY', 'MANUAL')
- sync_direction: ENUM('BIDIRECTIONAL', 'OUTBOUND', 'INBOUND')
- is_active: BOOLEAN (Default: TRUE)
- last_sync_timestamp: TIMESTAMP
- sync_status: ENUM('SUCCESS', 'FAILED', 'IN_PROGRESS', 'DISABLED')
- error_log: TEXT
- retry_count: INTEGER (Default: 0)
- max_retries: INTEGER (Default: 3)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_integration_type (integration_type)
- INDEX idx_is_active (is_active)
- INDEX idx_sync_status (sync_status)
- INDEX idx_last_sync_timestamp (last_sync_timestamp)

Constraints:
- fk_settlement_integration_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_integration_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retry_count_valid CHECK (retry_count >= 0 AND retry_count <= max_retries)
```

## 10.3.11 Settlement Performance Analytics Schema

```
Table: settlement_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- analysis_period: ENUM('Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- analysis_date: DATE (Required)
- total_settlements_processed: INTEGER
- completed_settlements: INTEGER
- average_processing_days: DECIMAL(5,2)
- on_time_completion_percentage: DECIMAL(5,2)
- average_settlement_amount: DECIMAL(15,2)
- total_tax_withheld: DECIMAL(15,2)
- total_deductions: DECIMAL(15,2)
- payment_success_rate: DECIMAL(5,2)
- document_generation_rate: DECIMAL(5,2)
- compliance_score: DECIMAL(5,2)
- employee_satisfaction_score: DECIMAL(3,2)
- processing_cost_per_settlement: DECIMAL(10,2)
- bottleneck_components: JSON (Components causing delays)
- improvement_opportunities: JSON (Areas for process improvement)
- regulatory_violations_count: INTEGER
- additional_metrics: JSON (Other KPIs and breakdowns)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)

Constraints:
- fk_settlement_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_settlement_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- chk_completion_rate_range CHECK (on_time_completion_percentage BETWEEN 0 AND 100)
- chk_satisfaction_score_range CHECK (employee_satisfaction_score BETWEEN 0 AND 5)
```

## 10.3.12 Settlement Audit Trail Schema

```
Table: settlement_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'Initiate', 'Calculate', 'Approve', 'Process', 'Pay', 'Cancel', 'Reverse', 'Generate', 'Export', 'Access')
- entity_type: ENUM('Settlement Process', 'Template', 'Component', 'Tax Calculation', 'Payment Processing', 'Documentation', 'Compliance Check', 'User Role')
- entity_id: UUID
- old_values: JSON (Previous values)
- new_values: JSON (Updated values)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- affected_employees: INTEGER (Default: 0)
- data_sensitivity_level: ENUM('Public', 'Internal', 'Confidential', 'Restricted')
- compliance_impact: TEXT
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_performed_by (performed_by_user_id)
- INDEX idx_timestamp (timestamp)
- INDEX idx_data_sensitivity_level (data_sensitivity_level)

Constraints:
- fk_settlement_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
```

## 10.3.13 Settlement Reporting Schema

```
Table: settlement_standard_reports
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- report_name: VARCHAR(200) (Required)
- report_code: VARCHAR(50) (Required, Unique, Indexed)
- report_category: ENUM('FINANCIAL', 'TAX', 'COMPLIANCE', 'OPERATIONAL', 'ANALYTICS', 'MANAGEMENT')
- report_type: ENUM('SUMMARY', 'DETAILED', 'TREND', 'COMPARATIVE', 'FORECAST')
- report_frequency: ENUM('ON_DEMAND', 'DAILY', 'WEEKLY', 'MONTHLY', 'QUARTERLY', 'ANNUALLY')
- report_format: ENUM('PDF', 'EXCEL', 'CSV', 'HTML', 'JSON')
- template_definition: JSON (Report template structure)
- data_sources: JSON (Data source configurations)
- filters: JSON (Available report filters)
- parameters: JSON (Report parameters)
- is_scheduled: BOOLEAN (Default: FALSE)
- schedule_config: JSON (Scheduling configuration)
- distribution_list: JSON (Email distribution settings)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_report_code_company (report_code, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_report_category (report_category)
- INDEX idx_report_type (report_type)
- INDEX idx_is_active (is_active)
- INDEX idx_is_scheduled (is_scheduled)

Constraints:
- fk_settlement_reports_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_settlement_reports_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

--- END OF SECTION 10.3 ---
