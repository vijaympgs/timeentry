# 12.2 Data Privacy

## 12.2.1 Business Purpose & Scope

## 12.2.1.1 Business Purpose

Data Privacy management provides a comprehensive framework for protecting Personally Identifiable Information (PII), ensuring compliance with global privacy regulations (GDPR, CCPA, HIPAA), and maintaining employee trust through transparent data handling practices. This enables organizations to manage data subject rights, implement privacy by design, conduct privacy impact assessments, and maintain regulatory compliance while enabling legitimate business use of personal data.

## 12.2.1.2 Business Scope

Enable complete data privacy management including PII identification and classification, consent management, data subject rights fulfillment, privacy impact assessments, breach notification, and regulatory compliance reporting. The system supports automated data discovery, consent lifecycle management, privacy policy enforcement, data anonymization, and integration with HR systems while ensuring adherence to privacy principles, employee rights, and legal obligations across all data processing activities.

## 12.2.2 PII Data Classification Schema

```
Table: pii_data_classification
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- data_element_name: VARCHAR(200) (Required)
- data_category: ENUM('Personal Identifiers', 'Contact Information', 'Financial Information', 'Health Information', 'Employment Data', 'Biometric Data', 'Geolocation Data', 'Behavioral Data', 'Demographic Data')
- sensitivity_level: ENUM('Public', 'Internal', 'Confidential', 'Restricted', 'Highly Restricted')
- pii_type: ENUM('Direct Identifier', 'Indirect Identifier', 'Quasi-Identifier', 'Sensitive PII', 'Special Category Data')
- data_format: ENUM('Structured', 'Unstructured', 'Semi-structured', 'Binary', 'Document')
- storage_location: VARCHAR(500)
- retention_period_days: INTEGER (Required)
- legal_basis: ENUM('Consent', 'Contract', 'Legal Obligation', 'Vital Interests', 'Public Task', 'Legitimate Interests')
- processing_purpose: TEXT (Required)
- data_subject_type: ENUM('Employee', 'Candidate', 'Former Employee', 'Dependent', 'Contractor', 'Vendor', 'Customer')
- encryption_required: BOOLEAN (Default: TRUE)
- anonymization_required: BOOLEAN (Default: FALSE)
- pseudonymization_required: BOOLEAN (Default: FALSE)
- access_restrictions: JSON (Access control requirements)
- processing_restrictions: JSON (Processing limitations)
- cross_border_transfer: BOOLEAN (Default: FALSE)
- third_party_sharing: BOOLEAN (Default: FALSE)
- automated_processing: BOOLEAN (Default: FALSE)
- profiling_allowed: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_data_category (data_category)
- INDEX idx_sensitivity_level (sensitivity_level)
- INDEX idx_pii_type (pii_type)
- INDEX idx_legal_basis (legal_basis)
- INDEX idx_data_subject_type (data_subject_type)
- INDEX idx_is_active (is_active)

Constraints:
- fk_pii_classification_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pii_classification_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (retention_period_days > 0)
```

## 12.2.3 Consent Management Schema

```
Table: privacy_consent
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- consent_request_id: UUID (Foreign Key to privacy_consent_request)
- consent_type: ENUM('Data Processing', 'Marketing Communications', 'Analytics', 'Third Party Sharing', 'Biometric Data', 'Health Data', 'Background Check', 'Monitoring')
- consent_purpose: TEXT (Required)
- consent_status: ENUM('Pending', 'Granted', 'Denied', 'Withdrawn', 'Expired', 'Revoked')
- consent_date: TIMESTAMP (Required)
- expiry_date: TIMESTAMP
- withdrawal_date: TIMESTAMP
- withdrawal_reason: TEXT
- consent_method: ENUM('Electronic', 'Written', 'Verbal', 'Implied', 'Opt-out')
- consent_channel: ENUM('Web Portal', 'Mobile App', 'Email', 'Paper Form', 'In-person', 'Phone')
- legal_basis: ENUM('Consent', 'Contract', 'Legal Obligation', 'Vital Interests', 'Public Task', 'Legitimate Interests')
- data_categories: JSON (Categories of data covered by consent)
- processing_activities: JSON (Allowed processing activities)
- third_parties: JSON (Third parties allowed to receive data)
- geographic_scope: JSON (Geographic limitations)
- duration_limit: VARCHAR(100)
- withdrawal_mechanism: TEXT
- privacy_policy_version: VARCHAR(20)
- cookie_consent: BOOLEAN (Default: FALSE)
- marketing_consent: BOOLEAN (Default: FALSE)
- analytics_consent: BOOLEAN (Default: FALSE)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- consent_proof: JSON (Evidence of consent)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_consent_request_id (consent_request_id)
- INDEX idx_consent_type (consent_type)
- INDEX idx_consent_status (consent_status)
- INDEX idx_consent_date (consent_date)
- INDEX idx_expiry_date (expiry_date)
- INDEX idx_legal_basis (legal_basis)
- INDEX idx_is_active (is_active)

Constraints:
- fk_privacy_consent_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_consent_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_privacy_consent_request FOREIGN KEY (consent_request_id) REFERENCES privacy_consent_request(id)
- fk_privacy_consent_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_consent_date_order CHECK (expiry_date IS NULL OR expiry_date >= consent_date)
- chk_withdrawal_order CHECK (withdrawal_date IS NULL OR withdrawal_date >= consent_date)
```

```
Table: privacy_consent_request
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- request_code: VARCHAR(50) (Required, Unique, Indexed)
- request_title: VARCHAR(200) (Required)
- request_description: TEXT (Required)
- request_type: ENUM('Initial Consent', 'Consent Renewal', 'Consent Update', 'Consent Withdrawal', 'Data Portability', 'Data Deletion')
- consent_purpose: TEXT (Required)
- legal_basis: ENUM('Consent', 'Contract', 'Legal Obligation', 'Vital Interests', 'Public Task', 'Legitimate Interests')
- data_categories: JSON (Data categories requiring consent)
- processing_activities: JSON (Processing activities covered)
- third_party_disclosure: JSON (Third parties data will be shared with)
- retention_period: VARCHAR(100)
- geographic_transfers: JSON (International data transfer details)
- automated_decision_making: BOOLEAN (Default: FALSE)
- profiling_activities: BOOLEAN (Default: FALSE)
- request_status: ENUM('Draft', 'Sent', 'Partially Completed', 'Completed', 'Expired', 'Cancelled')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- send_date: TIMESTAMP
- response_deadline: TIMESTAMP
- template_id: UUID (Foreign Key to privacy_consent_template)
- approval_required: BOOLEAN (Default: TRUE)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_privacy_consent_request_company_code (request_code, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_request_type (request_type)
- INDEX idx_legal_basis (legal_basis)
- INDEX idx_request_status (request_status)
- INDEX idx_priority (priority)
- INDEX idx_send_date (send_date)
- INDEX idx_response_deadline (response_deadline)
- INDEX idx_template_id (template_id)

Constraints:
- fk_privacy_consent_request_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_consent_request_template FOREIGN KEY (template_id) REFERENCES privacy_consent_template(id)
- fk_privacy_consent_request_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_privacy_consent_request_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_deadline_future CHECK (response_deadline IS NULL OR response_deadline >= send_date)
```

## 12.2.4 Data Subject Rights Management Schema

```
Table: data_subject_rights_request
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- request_number: VARCHAR(50) (Required, Unique, Indexed)
- employee_id: UUID (Foreign Key to employee)
- request_type: ENUM('Access Request', 'Rectification Request', 'Erasure Request', 'Portability Request', 'Restriction Request', 'Objection Request', 'Automated Decision Making', 'Consent Withdrawal')
- request_category: ENUM('Personal Data Access', 'Data Correction', 'Data Deletion', 'Data Export', 'Processing Restriction', 'Marketing Opt-out', 'Profiling Information')
- request_description: TEXT (Required)
- data_categories: JSON (Specific data categories requested)
- time_period: JSON (Time period for data request)
- processing_purpose: TEXT (Purpose of data processing)
- legal_basis: ENUM('Consent', 'Contract', 'Legal Obligation', 'Vital Interests', 'Public Task', 'Legitimate Interests')
- request_status: ENUM('Received', 'Under Review', 'Information Gathering', 'Processing', 'Ready for Response', 'Completed', 'Partially Completed', 'Rejected', 'Closed')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- request_date: TIMESTAMP (Required)
- response_deadline: TIMESTAMP (Required)
- completion_date: TIMESTAMP
- verification_method: ENUM('Identity Document', 'Email Verification', 'Phone Verification', 'In-person Verification', 'Two-Factor Auth')
- verification_status: ENUM('Pending', 'Verified', 'Failed', 'Exempt')
- verification_details: JSON (Verification evidence and documents)
- data_controller: VARCHAR(200)
- data_protection_officer: VARCHAR(200)
- processing_notes: TEXT
- decision_reason: TEXT
- appeal_available: BOOLEAN (Default: TRUE)
- appeal_deadline: TIMESTAMP
- appeal_status: ENUM('Not Filed', 'Filed', 'Under Review', 'Upheld', 'Overturned')
- gdpr_article: VARCHAR(10) (Relevant GDPR article reference)
- compliance_framework: ENUM('GDPR', 'CCPA', 'HIPAA', 'LGPD', 'PDPA', 'PIPEDA')
- created_by_user_id: UUID (Foreign Key to user)
- assigned_to_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_data_subject_rights_request_number (request_number, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_request_type (request_type)
- INDEX idx_request_category (request_category)
- INDEX idx_request_status (request_status)
- INDEX idx_priority (priority)
- INDEX idx_request_date (request_date)
- INDEX idx_response_deadline (response_deadline)
- INDEX idx_verification_status (verification_status)
- INDEX idx_compliance_framework (compliance_framework)
- INDEX idx_assigned_to_user_id (assigned_to_user_id)

Constraints:
- fk_data_subject_rights_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_data_subject_rights_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_data_subject_rights_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_data_subject_rights_assigned_to FOREIGN KEY (assigned_to_user_id) REFERENCES user(id)
- chk_deadline_future CHECK (response_deadline >= request_date)
- chk_completion_order CHECK (completion_date IS NULL OR completion_date >= request_date)
- chk_appeal_deadline_order CHECK (appeal_deadline IS NULL OR appeal_deadline >= completion_date)
```

```
Table: data_subject_rights_response
Fields:
- id: UUID (Primary Key)
- request_id: UUID (Foreign Key to data_subject_rights_request)
- response_type: ENUM('Data Package', 'Correction Confirmation', 'Deletion Confirmation', 'Portability File', 'Restriction Acknowledgment', 'Objection Response', 'Processing Details')
- response_format: ENUM('JSON', 'XML', 'CSV', 'PDF', 'Secure Link', 'Email Attachment')
- response_content: JSON (Response data and metadata)
- file_attachments: JSON (List of attached files)
- secure_download_url: VARCHAR(500)
- download_expiry_date: TIMESTAMP
- download_count: INTEGER (Default: 0)
- max_downloads: INTEGER (Default: 3)
- encryption_method: VARCHAR(50)
- data_package_size: BIGINT
- compression_ratio: DECIMAL(5,2)
- checksum_hash: VARCHAR(256)
- response_date: TIMESTAMP (Required)
- response_method: ENUM('Secure Portal', 'Email', 'Postal Mail', 'In-person', 'Courier')
- delivery_status: ENUM('Sent', 'Delivered', 'Failed', 'Bounced', 'Returned')
- delivery_attempts: INTEGER (Default: 0)
- tracking_number: VARCHAR(100)
- recipient_confirmation: BOOLEAN (Default: FALSE)
- confirmation_date: TIMESTAMP
- additional_notes: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_request_id (request_id)
- INDEX idx_response_type (response_type)
- INDEX idx_response_format (response_format)
- INDEX idx_response_date (response_date)
- INDEX idx_download_expiry_date (download_expiry_date)
- INDEX idx_delivery_status (delivery_status)
- INDEX idx_created_by_user_id (created_by_user_id)

Constraints:
- fk_data_subject_rights_response_request FOREIGN KEY (request_id) REFERENCES data_subject_rights_request(id)
- fk_data_subject_rights_response_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_download_expiry_future CHECK (download_expiry_date >= response_date)
- chk_download_count_valid CHECK (download_count <= max_downloads)
- chk_package_size_positive CHECK (data_package_size >= 0)
- chk_compression_range CHECK (compression_ratio BETWEEN 0 AND 1)
```

## 12.2.5 Privacy Impact Assessment Schema

```
Table: privacy_impact_assessment
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- assessment_code: VARCHAR(50) (Required, Unique, Indexed)
- assessment_name: VARCHAR(200) (Required)
- assessment_type: ENUM('System Development', 'Process Change', 'New Technology', 'Data Sharing', 'Third Party Processor', 'International Transfer', 'Automated Processing')
- assessment_category: ENUM('Mandatory', 'Voluntary', 'Contractual', 'Regulatory')
- project_name: VARCHAR(200) (Required)
- project_description: TEXT (Required)
- assessment_purpose: TEXT (Required)
- data_controller: VARCHAR(200) (Required)
- data_protection_officer: VARCHAR(200)
- assessment_scope: JSON (Systems and processes covered)
- data_types_processed: JSON (Categories of personal data)
- data_subjects_affected: JSON (Types of data subjects)
- processing_purposes: JSON (Purposes of processing)
- legal_basis: JSON (Legal basis for processing)
- necessity_test: JSON (Necessity and proportionality assessment)
- risk_assessment: JSON (Privacy risks identified)
- mitigation_measures: JSON (Risk mitigation strategies)
- compliance_frameworks: JSON (Applicable privacy regulations)
- international_transfers: JSON (Cross-border data transfers)
- third_party_processors: JSON (Third parties involved)
- data_retention: JSON (Data retention policies)
- security_measures: JSON (Security safeguards)
- privacy_by_design: JSON (Privacy by design implementation)
- data_protection_impact: JSON (Impact on data protection)
- assessment_status: ENUM('Initiated', 'In Progress', 'Under Review', 'Completed', 'Approved', 'Rejected', 'Requires Revision')
- risk_level: ENUM('Low', 'Medium', 'High', 'Critical')
- assessment_date: DATE (Required)
- reviewer_comments: TEXT
- approval_status: ENUM('Pending', 'Approved', 'Rejected', 'Conditional Approval')
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- review_required: BOOLEAN (Default: FALSE)
- next_review_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_privacy_impact_assessment_company_code (assessment_code, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_assessment_type (assessment_type)
- INDEX idx_assessment_category (assessment_category)
- INDEX idx_assessment_status (assessment_status)
- INDEX idx_risk_level (risk_level)
- INDEX idx_assessment_date (assessment_date)
- INDEX idx_approval_status (approval_status)
- INDEX idx_approved_by_user_id (approved_by_user_id)
- INDEX idx_next_review_date (next_review_date)

Constraints:
- fk_privacy_impact_assessment_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_impact_assessment_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_privacy_impact_assessment_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_next_review_future CHECK (next_review_date IS NULL OR next_review_date >= assessment_date)
```

```
Table: privacy_breach_management
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- breach_id: VARCHAR(50) (Required, Unique, Indexed)
- breach_title: VARCHAR(200) (Required)
- breach_description: TEXT (Required)
- breach_category: ENUM('Data Breach', 'Unauthorized Access', 'Data Loss', 'Data Theft', 'Ransomware', 'Insider Threat', 'Third Party Compromise', 'Physical Theft')
- severity_level: ENUM('Low', 'Medium', 'High', 'Critical')
- breach_date: TIMESTAMP (Required)
- discovery_date: TIMESTAMP (Required)
- containment_date: TIMESTAMP
- notification_deadline: TIMESTAMP
- data_types_affected: JSON (Types of personal data compromised)
- data_subjects_affected: INTEGER (Default: 0)
- employees_affected: INTEGER (Default: 0)
- customers_affected: INTEGER (Default: 0)
- other_subjects_affected: INTEGER (Default: 0)
- breach_cause: TEXT (Required)
- breach_vector: ENUM('Hacking', 'Malware', 'Phishing', 'Insider', 'Physical Theft', 'Accidental', 'Third Party', 'System Vulnerability')
- containment_actions: JSON (Immediate containment measures)
- recovery_actions: JSON (Recovery and remediation actions)
- notification_requirements: JSON (Regulatory notification requirements)
- notifications_sent: JSON (Details of notifications sent)
- supervisory_authority_notified: BOOLEAN (Default: FALSE)
- data_subjects_notified: BOOLEAN (Default: FALSE)
- media_coverage: BOOLEAN (Default: FALSE)
- financial_impact: DECIMAL(15,2) (Default: 0.00)
- reputational_impact: TEXT
- legal_consequences: TEXT
- breach_status: ENUM('Detected', 'Contained', 'Investigating', 'Resolved', 'Closed')
- investigation_status: ENUM('Not Started', 'In Progress', 'Completed', 'External Investigation')
- report_generated: BOOLEAN (Default: FALSE)
- lessons_learned: TEXT
- preventive_measures: JSON (Preventive actions implemented)
- created_by_user_id: UUID (Foreign Key to user)
- assigned_to_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_privacy_breach_company_breach_id (breach_id, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_breach_category (breach_category)
- INDEX idx_severity_level (severity_level)
- INDEX idx_breach_date (breach_date)
- INDEX idx_discovery_date (discovery_date)
- INDEX idx_notification_deadline (notification_deadline)
- INDEX idx_breach_status (breach_status)
- INDEX idx_investigation_status (investigation_status)
- INDEX idx_created_by_user_id (created_by_user_id)
- INDEX idx_assigned_to_user_id (assigned_to_user_id)

Constraints:
- fk_privacy_breach_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_breach_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_privacy_breach_assigned_to FOREIGN KEY (assigned_to_user_id) REFERENCES user(id)
- chk_breach_date_order CHECK (discovery_date >= breach_date AND containment_date >= discovery_date)
- chk_subjects_positive CHECK (data_subjects_affected >= 0 AND employees_affected >= 0 AND customers_affected >= 0 AND other_subjects_affected >= 0)
- chk_financial_impact_positive CHECK (financial_impact >= 0)
```

## 12.2.6 Privacy Integration & Audit Performance Schema

```
Table: privacy_integration_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- integration_name: VARCHAR(200) (Required)
- integration_type: ENUM('HRIS', 'PAYROLL', 'RECRUITMENT', 'PERFORMANCE', 'TIME_ATTENDANCE', 'BENEFITS', 'LEARNING_SYSTEM', 'THIRD_PARTY', 'API_WEBHOOK')
- external_system: VARCHAR(100) (Required)
- external_system_id: VARCHAR(200) (Required)
- integration_description: TEXT
- endpoint_url: VARCHAR(500)
- authentication_method: ENUM('API Key', 'OAuth 2.0', 'Basic Auth', 'Certificate', 'SAML', 'JWT', 'LDAP Bind')
- authentication_config: JSON (Encrypted authentication credentials)
- data_mapping: JSON (Field mapping between systems)
- sync_frequency: ENUM('Real-time', 'Hourly', 'Daily', 'Weekly', 'On-demand')
- sync_direction: ENUM('Bidirectional', 'Inbound', 'Outbound')
- data_format: ENUM('JSON', 'XML', 'CSV', 'LDIF', 'SCIM')
- compression_enabled: BOOLEAN (Default: TRUE)
- encryption_enabled: BOOLEAN (Default: TRUE)
- anonymization_enabled: BOOLEAN (Default: TRUE)
- pseudonymization_enabled: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- last_sync_at: TIMESTAMP
- next_sync_at: TIMESTAMP
- sync_status: ENUM('Active', 'Inactive', 'Error', 'Paused', 'Maintenance')
- error_log: TEXT
- retry_count: INTEGER (Default: 0)
- max_retries: INTEGER (Default: 3)
- performance_metrics: JSON (Sync performance and statistics)
- privacy_controls: JSON (Privacy-specific controls and validations)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_integration_type (integration_type)
- INDEX idx_external_system (external_system)
- INDEX idx_sync_status (sync_status)
- INDEX idx_last_sync_at (last_sync_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_privacy_integration_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_integration_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retry_count_valid CHECK (retry_count >= 0 AND retry_count <= max_retries)
```

```
Table: privacy_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'Access', 'Process', 'Share', 'Export', 'Archive', 'Anonymize', 'Pseudonymize')
- entity_type: ENUM('PII Data', 'Consent Record', 'Data Subject Request', 'Privacy Assessment', 'Breach Record', 'Privacy Policy', 'Integration Config')
- entity_id: UUID
- old_values: JSON (Previous values before change)
- new_values: JSON (New values after change)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- affected_data_subjects: INTEGER (Default: 0)
- data_sensitivity_level: ENUM('Public', 'Internal', 'Confidential', 'Restricted', 'Highly Restricted')
- compliance_impact: TEXT
- privacy_impact: JSON (Privacy impact assessment)
- integration_reference: VARCHAR(200) (Reference to related integration)
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- execution_time_ms: INTEGER (Default: 0)
- success: BOOLEAN (Default: TRUE)
- error_code: VARCHAR(50)
- error_message: TEXT
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_performed_by_user_id (performed_by_user_id)
- INDEX idx_timestamp (timestamp)
- idx_data_sensitivity_level (data_sensitivity_level)
- idx_success (success)
- idx_execution_time_ms (execution_time_ms)

Constraints:
- fk_privacy_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
- chk_affected_subjects_positive CHECK (affected_data_subjects >= 0)
- chk_execution_time_positive CHECK (execution_time_ms >= 0)
```

## 12.2.7 Privacy Analytics & Insights Schema

```
Table: privacy_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- analysis_type: ENUM('Consent Analytics', 'Data Subject Requests', 'Privacy Breaches', 'PII Classification', 'Processing Activities', 'Compliance Metrics', 'Risk Assessment', 'Trend Analysis')
- analysis_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- analysis_date: DATE (Required)
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2) (Required)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL (5,2)
- target_value: DECIMAL (15,2)
- achievement_percentage: DECIMAL (5,2)
- total_data_subjects: INTEGER (Default: 0)
- active_consents: INTEGER (Default: 0)
- expired_consents: INTEGER (Default: 0)
- withdrawn_consents: INTEGER (Default: 0)
- data_subject_requests: INTEGER (Default: 0)
- requests_completed: INTEGER (Default: 0)
- requests_pending: INTEGER (Default: 0)
- privacy_breaches: INTEGER (Default: 0)
- breaches_contained: INTEGER (Default: 0)
- high_risk_incidents: INTEGER (Default: 0)
- compliance_violations: INTEGER (Default: 0)
- audit_findings: INTEGER (Default: 0)
- pii_records_processed: INTEGER (Default: 0)
- anonymized_records: INTEGER (Default: 0)
- pseudonymized_records: INTEGER (Default: 0)
- data_retention_compliance: DECIMAL (5,2) (Default: 100.00)
- privacy_maturity_score: DECIMAL (3,2) (Default: 0.00)
- risk_assessment_score: DECIMAL (3,2) (Default: 0.00)
- employee_training_completion: DECIMAL (5,2) (Default: 0.00)
- additional_metrics: JSON (Other KPIs and breakdowns)
- data_quality_score: DECIMAL (3,2) (Default: 5.00)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_metric_name (metric_name)
- idx_total_data_subjects (total_data_subjects)
- idx_active_consents (active_consents)
- idx_data_subject_requests (data_subject_requests)
- idx_privacy_breaches (privacy_breaches)
- idx_compliance_violations (compliance_violations)
- idx_pii_records_processed (pii_records_processed)
- idx_anonymized_records (anonymized_records)
- idx_privacy_maturity_score (privacy_maturity_score)

Constraints:
- fk_privacy_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_privacy_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- chk_positive_subjects CHECK (total_data_subjects >= 0 AND active_consents >= 0 AND expired_consents >= 0 AND withdrawn_consents >= 0)
- chk_positive_requests CHECK (data_subject_requests >= 0 AND requests_completed >= 0 AND requests_pending >= 0)
- chk_positive_breaches CHECK (privacy_breaches >= 0 AND breaches_contained >= 0 AND high_risk_incidents >= 0)
- chk_positive_violations CHECK (compliance_violations >= 0 AND audit_findings >= 0)
- chk_positive_records CHECK (pii_records_processed >= 0 AND anonymized_records >= 0 AND pseudonymized_records >= 0)
- chk_compliance_range CHECK (data_retention_compliance BETWEEN 0 AND 100)
- chk_maturity_range CHECK (privacy_maturity_score BETWEEN 0 AND 5)
- chk_risk_range CHECK (risk_assessment_score BETWEEN 0 AND 5)
- chk_training_completion_range CHECK (employee_training_completion BETWEEN 0 AND 100)
- chk_achievement_range CHECK (achievement_percentage BETWEEN 0 AND 100)
- chk_data_quality_range CHECK (data_quality_score BETWEEN 1 AND 5)
```

```
Table: privacy_compliance_dashboard
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- dashboard_code: VARCHAR(50) (Required, Unique, Indexed)
- dashboard_name: VARCHAR(200) (Required)
- dashboard_type: ENUM('Executive', 'Management', 'Operational', 'Compliance', 'Risk', 'Legal')
- dashboard_category: ENUM('Consent Management', 'Data Subject Rights', 'Breach Management', 'PII Inventory', 'Processing Activities', 'Compliance Monitoring', 'Risk Assessment')
- dashboard_description: TEXT (Required)
- layout_config: JSON (Dashboard layout and widget configuration)
- data_sources: JSON (Data sources for the dashboard)
- refresh_frequency: ENUM('Real-time', 'Hourly', 'Daily', 'Weekly', 'Monthly')
- access_permissions: JSON (User access permissions and restrictions)
- widget_configurations: JSON (Widget configurations and settings)
- filter_options: JSON (Available filters and parameters)
- export_options: JSON (Export formats and options)
- sharing_settings: JSON (Dashboard sharing and collaboration settings)
- is_public: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- last_refreshed_at: TIMESTAMP
- refresh_status: ENUM('Success', 'Error', 'In Progress', 'Disabled')
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_privacy_compliance_dashboard_company_code (dashboard_code, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_dashboard_type (dashboard_type)
- INDEX idx_dashboard_category (dashboard_category)
- idx_is_public (is_public)
- idx_is_active (is_active)
- INDEX idx_last_refreshed_at (last_refreshed_at)
- INDEX idx_refresh_status (refresh_status)

Constraints:
- fk_privacy_compliance_dashboard_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_compliance_dashboard_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

## 12.2.8 Privacy Communication & Notification Schema

```
Table: privacy_notification_template
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- template_code: VARCHAR(50) (Required, Unique, Indexed)
- template_name: VARCHAR(200) (Required)
- template_type: ENUM('Consent Request', 'Data Breach', 'Privacy Policy Update', 'Data Subject Response', 'Compliance Notice', 'Reminder', 'Alert', 'Confirmation')
- template_category: ENUM('Informational', 'Action Required', 'Warning', 'Critical', 'Success', 'Reminder', 'Update', 'Legal Notice')
- template_subject: VARCHAR(500) (Required)
- template_body: TEXT (Required)
- template_format: ENUM('Plain Text', 'HTML', 'Markdown', 'JSON')
- language_code: VARCHAR(10) (Default: 'en')
- personalization_variables: JSON (Available personalization variables)
- default_sender: VARCHAR(200) (Required)
- default_recipients: JSON (Default recipient list)
- cc_recipients: JSON (CC recipient list)
- bcc_recipients: JSON (BCC recipient list)
- attachment_support: BOOLEAN (Default: FALSE)
- template_status: ENUM('Draft', 'Active', 'Inactive', 'Archived')
- approval_required: BOOLEAN (Default: FALSE)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- usage_count: INTEGER (Default: 0)
- last_used_at: TIMESTAMP
- compliance_framework: ENUM('GDPR', 'CCPA', 'HIPAA', 'LGPD', 'PDPA', 'PIPEDA', 'All')
- legal_review_required: BOOLEAN (Default: TRUE)
- legal_review_status: ENUM('Pending', 'Approved', 'Rejected', 'Requires Revision')
- legal_reviewer_id: UUID (Foreign Key to user)
- legal_review_date: TIMESTAMP
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_privacy_notification_template_company_code (template_code, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_template_type (template_type)
- INDEX idx_template_category (template_category)
- INDEX idx_template_status (template_status)
- INDEX idx_language_code (language_code)
- INDEX idx_usage_count (usage_count)
- INDEX idx_last_used_at (last_used_at)
- INDEX idx_compliance_framework (compliance_framework)
- INDEX idx_legal_review_status (legal_review_status)

Constraints:
- fk_privacy_notification_template_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_notification_template_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_privacy_notification_template_legal_reviewer FOREIGN KEY (legal_reviewer_id) REFERENCES user(id)
- fk_privacy_notification_template_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_usage_count_positive CHECK (usage_count >= 0)
```

```
Table: privacy_notification_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- template_id: UUID (Foreign Key to privacy_notification_template)
- notification_type: ENUM('Consent Request', 'Data Breach', 'Privacy Policy Update', 'Data Subject Response', 'Compliance Notice', 'Reminder', 'Alert', 'Confirmation')
- notification_category: ENUM('Informational', 'Action Required', 'Warning', 'Critical', 'Success', 'Reminder', 'Update', 'Legal Notice')
- recipient_type: ENUM('Employee', 'Candidate', 'Former Employee', 'Dependent', 'Contractor', 'Vendor', 'Customer', 'Data Subject', 'Regulatory Authority')
- recipient_id: UUID (Foreign Key to user)
- recipient_email: VARCHAR(200)
- recipient_name: VARCHAR(200)
- subject: VARCHAR(500) (Required)
- message_body: TEXT (Required)
- message_format: ENUM('Plain Text', 'HTML', 'Markdown', 'JSON')
- personalization_data: JSON (Personalization data used)
- attachment_count: INTEGER (Default: 0)
- attachment_files: JSON (List of attachment files)
- delivery_status: ENUM('Pending', 'Sent', 'Delivered', 'Failed', 'Bounced', 'Complained', 'Blocked')
- delivery_attempts: INTEGER (Default: 0)
- sent_at: TIMESTAMP
- delivered_at: TIMESTAMP
- opened_at: TIMESTAMP
- clicked_at: TIMESTAMP
- response_required: BOOLEAN (Default: FALSE)
- response_deadline: TIMESTAMP
- response_received_at: TIMESTAMP
- priority: ENUM('Low', 'Normal', 'High', 'Critical', 'Emergency')
- error_message: TEXT
- compliance_reference: VARCHAR(100) (Reference to compliance requirement)
- legal_acknowledgment_required: BOOLEAN (Default: FALSE)
- legal_acknowledgment_received: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_template_id (template_id)
- INDEX idx_notification_type (notification_type)
- INDEX idx_notification_category (notification_category)
- INDEX idx_recipient_type (recipient_type)
- INDEX idx_recipient_id (recipient_id)
- INDEX idx_delivery_status (delivery_status)
- INDEX idx_sent_at (sent_at)
- INDEX idx_priority (priority)
- INDEX idx_response_required (response_required)
- INDEX idx_legal_acknowledgment_required (legal_acknowledgment_required)

Constraints:
- fk_privacy_notification_log_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_notification_log_template FOREIGN KEY (template_id) REFERENCES privacy_notification_template(id)
- fk_privacy_notification_log_recipient FOREIGN KEY (recipient_id) REFERENCES user(id)
- fk_privacy_notification_log_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_delivery_attempts_positive CHECK (delivery_attempts >= 0)
- chk_attachment_count_positive CHECK (attachment_count >= 0)
```

## 12.2.9 Privacy User Preferences & Personalization Schema

```
Table: privacy_user_preference
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- user_id: UUID (Foreign Key to user)
- preference_category: ENUM('Privacy Settings', 'Communication Preferences', 'Data Access', 'Consent Management', 'Notification Settings', 'Security Settings', 'Display Settings')
- preference_key: VARCHAR(100) (Required)
- preference_value: JSON (Preference value and configuration)
- preference_type: ENUM('Boolean', 'String', 'Number', 'Array', 'Object', 'Date', 'Time')
- is_system_default: BOOLEAN (Default: FALSE)
- is_user_editable: BOOLEAN (Default: TRUE)
- validation_rules: JSON (Validation rules for the preference)
- default_value: JSON (Default system value)
- description: TEXT (Description of the preference)
- help_text: TEXT (Help text for the preference)
- display_order: INTEGER (Default: 0)
- is_active: BOOLEAN (Default: TRUE)
- privacy_impact: ENUM('Low', 'Medium', 'High', 'Critical')
- compliance_relevance: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_preference_category (preference_category)
- INDEX idx_preference_key (preference_key)
- INDEX idx_is_system_default (is_system_default)
- INDEX idx_is_user_editable (is_user_editable)
- INDEX idx_display_order (display_order)
- INDEX idx_is_active (is_active)
- INDEX idx_privacy_impact (privacy_impact)
- INDEX idx_compliance_relevance (compliance_relevance)

Constraints:
- fk_privacy_user_preference_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_user_preference_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_privacy_user_preference_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_display_order_positive CHECK (display_order >= 0)
```

```
Table: privacy_user_consent_summary
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- user_id: UUID (Foreign Key to user)
- total_consents: INTEGER (Default: 0)
- active_consents: INTEGER (Default: 0)
- expired_consents: INTEGER (Default: 0)
- withdrawn_consents: INTEGER (Default: 0)
- pending_consents: INTEGER (Default: 0)
- denied_consents: INTEGER (Default: 0)
- last_consent_update: TIMESTAMP
- next_consent_expiry: TIMESTAMP
- consent_completion_rate: DECIMAL(5,2) (Default: 0.00)
- privacy_score: DECIMAL(3,2) (Default: 0.00)
- data_sharing_preferences: JSON (User's data sharing preferences)
- communication_preferences: JSON (User's communication preferences)
- marketing_preferences: JSON (User's marketing preferences)
- analytics_preferences: JSON (User's analytics preferences)
- third_party_sharing: JSON (Third party sharing preferences)
- international_data_transfers: BOOLEAN (Default: FALSE)
- automated_decision_making: BOOLEAN (Default: FALSE)
- profiling_consent: BOOLEAN (Default: FALSE)
- sensitive_data_consent: BOOLEAN (Default: FALSE)
- biometric_data_consent: BOOLEAN (Default: FALSE)
- location_tracking_consent: BOOLEAN (Default: FALSE)
- cookie_preferences: JSON (Cookie consent preferences)
- do_not_sell_flag: BOOLEAN (Default: FALSE)
- right_to_object_flag: BOOLEAN (Default: FALSE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_active_consents (active_consents)
- INDEX idx_withdrawn_consents (withdrawn_consents)
- INDEX idx_last_consent_update (last_consent_update)
- INDEX idx_next_consent_expiry (next_consent_expiry)
- INDEX idx_consent_completion_rate (consent_completion_rate)
- INDEX idx_privacy_score (privacy_score)
- INDEX idx_do_not_sell_flag (do_not_sell_flag)
- INDEX idx_right_to_object_flag (right_to_object_flag)

Constraints:
- fk_privacy_user_consent_summary_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_user_consent_summary_user FOREIGN KEY (user_id) REFERENCES user(id)
- chk_positive_consents CHECK (total_consents >= 0 AND active_consents >= 0 AND expired_consents >= 0 AND withdrawn_consents >= 0 AND pending_consents >= 0 AND denied_consents >= 0)
- chk_completion_rate_range CHECK (consent_completion_rate BETWEEN 0 AND 100)
- chk_privacy_score_range CHECK (privacy_score BETWEEN 0 AND 5)
```

## 12.2.10 Privacy Mobile & API Access Schema

```
Table: privacy_mobile_app
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- app_version: VARCHAR(20) (Required)
- platform: ENUM('iOS', 'Android', 'Web', 'Hybrid')
- build_number: VARCHAR(20) (Required)
- release_date: DATE (Required)
- is_current: BOOLEAN (Default: FALSE)
- is_mandatory: BOOLEAN (Default: FALSE)
- min_supported_version: VARCHAR(20)
- features_enabled: JSON (Feature flags and capabilities)
- api_endpoints: JSON (Mobile-specific API endpoints)
- offline_capabilities: JSON (Offline functionality support)
- security_config: JSON (Mobile security settings)
- privacy_features: JSON (Privacy-specific mobile features)
- consent_management: BOOLEAN (Default: TRUE)
- data_subject_requests: BOOLEAN (Default: TRUE)
- privacy_dashboard: BOOLEAN (Default: TRUE)
- breach_notifications: BOOLEAN (Default: TRUE)
- biometric_auth_enabled: BOOLEAN (Default: TRUE)
- offline_data_retention_days: INTEGER (Default: 7)
- encryption_at_rest: BOOLEAN (Default: TRUE)
- encryption_in_transit: BOOLEAN (Default: TRUE)
- remote_wipe_capability: BOOLEAN (Default: TRUE)
- jailbreak_detection: BOOLEAN (Default: TRUE)
- certificate_pinning: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_app_version (app_version)
- INDEX idx_platform (platform)
- INDEX idx_is_current (is_current)
- INDEX idx_is_mandatory (is_mandatory)
- INDEX idx_release_date (release_date)

Constraints:
- fk_privacy_mobile_app_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_mobile_app_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (offline_data_retention_days >= 0)
```

```
Table: privacy_api_access
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- api_key: VARCHAR(200) (Required, Unique, Indexed)
- api_name: VARCHAR(200) (Required)
- api_description: TEXT
- api_version: VARCHAR(20) (Default: 'v1')
- endpoint_url: VARCHAR(500) (Required)
- authentication_type: ENUM('API Key', 'OAuth 2.0', 'JWT', 'Basic Auth', 'mTLS')
- rate_limit_per_hour: INTEGER (Default: 1000)
- rate_limit_per_day: INTEGER (Default: 10000)
- allowed_methods: JSON (HTTP methods allowed)
- allowed_ips: JSON (IP whitelist)
- webhook_url: VARCHAR(500)
- webhook_events: JSON (Events that trigger webhooks)
- data_access_level: ENUM('ALL', 'AGGREGATED_ONLY', 'SUMMARY_ONLY', 'METADATA_ONLY', 'ANONYMIZED_ONLY')
- privacy_controls: JSON (Privacy-specific access controls)
- consent_validation: BOOLEAN (Default: TRUE)
- data_masking: BOOLEAN (Default: TRUE)
- audit_logging: BOOLEAN (Default: TRUE)
- export_formats: JSON (Allowed export formats)
- gdpr_compliant: BOOLEAN (Default: TRUE)
- ccpa_compliant: BOOLEAN (Default: TRUE)
- hipaa_compliant: BOOLEAN (Default: FALSE)
- data_retention_policy: JSON (API data retention policy)
- is_internal: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- last_used_at: TIMESTAMP
- usage_count: INTEGER (Default: 0)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_api_key (api_key)
- INDEX idx_api_version (api_version)
- INDEX idx_is_active (is_active)
- INDEX idx_is_internal (is_internal)
- INDEX idx_last_used_at (last_used_at)
- INDEX idx_usage_count (usage_count)
- INDEX idx_data_access_level (data_access_level)
- INDEX idx_gdpr_compliant (gdpr_compliant)
- INDEX idx_ccpa_compliant (ccpa_compliant)

Constraints:
- fk_privacy_api_access_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_api_access_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_rate_limits_positive CHECK (rate_limit_per_hour > 0 AND rate_limit_per_day > 0)
- chk_usage_positive CHECK (usage_count >= 0)
```

## 12.2.11 Privacy Security & Compliance Schema

```
Table: privacy_security_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- security_policy_name: VARCHAR(200) (Required)
- policy_type: ENUM('Data Encryption', 'Access Control', 'Audit Logging', 'Session Management', 'Password Policy', 'Two-Factor Auth', 'Data Masking', 'Network Security', 'Privacy Controls')
- security_level: ENUM('Basic', 'Standard', 'Enhanced', 'High', 'Maximum')
- configuration: JSON (Security configuration parameters)
- encryption_algorithm: VARCHAR(50)
- key_rotation_days: INTEGER (Default: 90)
- session_timeout_minutes: INTEGER (Default: 30)
- max_login_attempts: INTEGER (Default: 5)
- lockout_duration_minutes: INTEGER (Default: 15)
- password_min_length: INTEGER (Default: 8)
- password_complexity: JSON (Password complexity requirements)
- mfa_required: BOOLEAN (Default: FALSE)
- mfa_methods: JSON (Allowed MFA methods)
- data_masking_rules: JSON (Data masking and anonymization rules)
- network_access_rules: JSON (IP whitelisting and restrictions)
- privacy_controls: JSON (Privacy-specific security controls)
- data_classification_enforced: BOOLEAN (Default: TRUE)
- consent_validation_required: BOOLEAN (Default: TRUE)
- audit_retention_days: INTEGER (Default: 2555)
- breach_detection_enabled: BOOLEAN (Default: TRUE)
- automated_response_enabled: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_policy_type (policy_type)
- INDEX idx_security_level (security_level)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_privacy_security_config_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_security_config_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_privacy_security_config_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_positive_values CHECK (key_rotation_days > 0 AND session_timeout_minutes > 0 AND max_login_attempts > 0 AND lockout_duration_minutes > 0 AND password_min_length > 0 AND audit_retention_days > 0)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

```
Table: privacy_compliance_audit
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- audit_type: ENUM('GDPR', 'CCPA', 'HIPAA', 'LGPD', 'PDPA', 'PIPEDA', 'Internal', 'External', 'Data Privacy', 'Security')
- audit_scope: ENUM('Full System', 'Data Privacy', 'Security', 'Consent Management', 'Data Subject Rights', 'Breach Management', 'PII Inventory', 'Processing Activities')
- audit_period_start: DATE (Required)
- audit_period_end: DATE (Required)
- auditor_name: VARCHAR(200)
- auditor_organization: VARCHAR(200)
- audit_status: ENUM('Planned', 'In Progress', 'Completed', 'Passed', 'Failed', 'Remediation Required', 'Under Review')
- findings_count: INTEGER (Default: 0)
- critical_findings: INTEGER (Default: 0)
- high_findings: INTEGER (Default: 0)
- medium_findings: INTEGER (Default: 0)
- low_findings: INTEGER (Default: 0)
- compliance_score: DECIMAL(5,2) (Default: 0.00)
- privacy_maturity_score: DECIMAL(3,2) (Default: 0.00)
- security_posture_score: DECIMAL(3,2) (Default: 0.00)
- remediation_plan: TEXT
- remediation_due_date: DATE
- audit_report_url: VARCHAR(500)
- evidence_documents: JSON (Links to evidence documents)
- data_privacy_impact: JSON (Data privacy impact assessment)
- security_assessment: JSON (Security assessment results)
- regulatory_requirements: JSON (Applicable regulatory requirements)
- gap_analysis: JSON (Compliance gap analysis)
- recommendations: JSON (Recommendations for improvement)
- action_items: JSON (Required actions and timelines)
- follow_up_required: BOOLEAN (Default: TRUE)
- follow_up_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_audit_type (audit_type)
- INDEX idx_audit_scope (audit_scope)
- INDEX idx_audit_status (audit_status)
- INDEX idx_audit_period_start (audit_period_start)
- INDEX idx_audit_period_end (audit_period_end)
- INDEX idx_compliance_score (compliance_score)
- INDEX idx_privacy_maturity_score (privacy_maturity_score)
- INDEX idx_security_posture_score (security_posture_score)
- INDEX idx_follow_up_required (follow_up_required)
- INDEX idx_follow_up_date (follow_up_date)

Constraints:
- fk_privacy_compliance_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_compliance_audit_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (audit_period_end >= audit_period_start)
- chk_positive_findings CHECK (findings_count >= 0 AND critical_findings >= 0 AND high_findings >= 0 AND medium_findings >= 0 AND low_findings >= 0)
- chk_compliance_score_range CHECK (compliance_score BETWEEN 0 AND 100)
- chk_maturity_score_range CHECK (privacy_maturity_score BETWEEN 0 AND 5)
- chk_security_posture_range CHECK (security_posture_score BETWEEN 0 AND 5)
- chk_follow_up_future CHECK (follow_up_date IS NULL OR follow_up_date >= audit_period_end)
```

## 12.2.12 Privacy Workflow & Process Automation Schema

```
Table: privacy_workflow_definition
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_name: VARCHAR(200) (Required)
- workflow_type: ENUM('Consent Management', 'Data Subject Request', 'Privacy Assessment', 'Breach Response', 'Compliance Review', 'Data Retention', 'Privacy Impact Assessment', 'Consent Renewal')
- workflow_category: ENUM('Standard', 'Emergency', 'High Value', 'Executive', 'Bulk Processing', 'Scheduled', 'Manual Trigger', 'Automated')
- trigger_event: ENUM('Consent Requested', 'Data Subject Request', 'Privacy Breach', 'Policy Update', 'Schedule Triggered', 'Manual Start', 'System Event', 'Compliance Deadline')
- workflow_steps: JSON (Ordered workflow steps and configurations)
- approval_levels: JSON (Multi-level approval requirements)
- escalation_rules: JSON (Escalation conditions and paths)
- timeout_settings: JSON (Step timeout and reminder settings)
- notification_rules: JSON (Notification triggers and recipients)
- retry_configuration: JSON (Retry logic and limits)
- performance_metrics: JSON (Workflow performance tracking)
- compliance_requirements: JSON (Regulatory compliance requirements)
- privacy_controls: JSON (Privacy-specific controls and validations)
- data_processing_rules: JSON (Data processing and handling rules)
- audit_requirements: JSON (Audit trail and documentation requirements)
- is_active: BOOLEAN (Default: TRUE)
- version: INTEGER (Default: 1)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_type (workflow_type)
- INDEX idx_workflow_category (workflow_category)
- INDEX idx_trigger_event (trigger_event)
- INDEX idx_is_active (is_active)
- INDEX idx_version (version)

Constraints:
- fk_privacy_workflow_definition_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_workflow_definition_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_privacy_workflow_definition_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (version > 0)
```

```
Table: privacy_workflow_instance
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_definition_id: UUID (Foreign Key to privacy_workflow_definition)
- user_id: UUID (Foreign Key to user)
- employee_id: UUID (Foreign Key to employee)
- instance_name: VARCHAR(200) (Required)
- current_step: INTEGER (Default: 1)
- workflow_status: ENUM('Initiated', 'In Progress', 'Pending Approval', 'Approved', 'Rejected', 'Completed', 'Cancelled', 'Escalated', 'Failed', 'On Hold')
- priority_level: ENUM('Low', 'Normal', 'High', 'Critical', 'Emergency')
- initiated_by_user_id: UUID (Foreign Key to user)
- current_assignee_id: UUID (Foreign Key to user)
- started_at: TIMESTAMP (Auto)
- due_date: TIMESTAMP
- completed_at: TIMESTAMP
- workflow_data: JSON (Workflow-specific data and context)
- step_history: JSON (History of completed steps)
- error_log: TEXT
- retry_count: INTEGER (Default: 0)
- performance_metrics: JSON (Instance performance data)
- compliance_tracking: JSON (Compliance requirement tracking)
- privacy_impact_assessment: JSON (Privacy impact assessment data)
- comments: TEXT
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_definition_id (workflow_definition_id)
- INDEX idx_user_id (user_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_workflow_status (workflow_status)
- INDEX idx_priority_level (priority_level)
- INDEX idx_initiated_by_user_id (initiated_by_user_id)
- INDEX idx_current_assignee_id (current_assignee_id)
- INDEX idx_started_at (started_at)
- INDEX idx_due_date (due_date)

Constraints:
- fk_privacy_workflow_instance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_workflow_instance_definition FOREIGN KEY (workflow_definition_id) REFERENCES privacy_workflow_definition(id)
- fk_privacy_workflow_instance_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_privacy_workflow_instance_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_privacy_workflow_instance_initiated_by FOREIGN KEY (initiated_by_user_id) REFERENCES user(id)
- fk_privacy_workflow_instance_current_assignee FOREIGN KEY (current_assignee_id) REFERENCES user(id)
- chk_step_positive CHECK (current_step > 0)
- chk_retry_positive CHECK (retry_count >= 0)
```

## 12.2.13 Privacy Data Archival & Retention Schema

```
Table: privacy_archival_policy
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- policy_name: VARCHAR(200) (Required)
- entity_type: ENUM('PII Data', 'Consent Records', 'Data Subject Requests', 'Privacy Assessments', 'Breach Records', 'Privacy Policies', 'Audit Logs', 'Analytics Data')
- retention_period_years: INTEGER (Required)
- archival_trigger: ENUM('Age Based', 'Event Based', 'Manual', 'Scheduled', 'Compliance Required', 'Legal Requirement')
- archival_condition: JSON (Conditions for archival)
- storage_location: ENUM('Cold Storage', 'Archive Database', 'File System', 'Cloud Archive', 'Compliance Archive', 'Secure Vault')
- compression_enabled: BOOLEAN (Default: TRUE)
- encryption_enabled: BOOLEAN (Default: TRUE)
- anonymization_enabled: BOOLEAN (Default: TRUE)
- access_restriction: ENUM('No Access', 'Read Only', 'Admin Only', 'Compliance Only', 'Audit Only', 'Legal Only')
- retention_after_archive_years: INTEGER (Default: 7)
- auto_delete_after_retention: BOOLEAN (Default: FALSE)
- compliance_requirements: JSON (Regulatory retention requirements)
- data_classification: ENUM('Public', 'Internal', 'Confidential', 'Restricted', 'Highly Restricted')
- privacy_impact_level: ENUM('Low', 'Medium', 'High', 'Critical')
- legal_hold_applicable: BOOLEAN (Default: FALSE)
- gdpr_right_to_erasure_applicable: BOOLEAN (Default: TRUE)
- ccpa_right_to_delete_applicable: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- last_run_date: DATE
- next_run_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_entity_type (entity_type)
- INDEX idx_archival_trigger (archival_trigger)
- INDEX idx_storage_location (storage_location)
- INDEX idx_access_restriction (access_restriction)
- INDEX idx_data_classification (data_classification)
- INDEX idx_privacy_impact_level (privacy_impact_level)
- INDEX idx_is_active (is_active)
- INDEX idx_last_run_date (last_run_date)
- INDEX idx_next_run_date (next_run_date)

Constraints:
- fk_privacy_archival_policy_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_archival_policy_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_privacy_archival_policy_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (retention_period_years > 0 AND retention_after_archive_years >= 0)
```

```
Table: privacy_archived_data
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- archival_policy_id: UUID (Foreign Key to privacy_archival_policy)
- original_table_name: VARCHAR(100) (Required)
- original_record_id: UUID (Required)
- entity_type: ENUM('PII Data', 'Consent Records', 'Data Subject Requests', 'Privacy Assessments', 'Breach Records', 'Privacy Policies', 'Audit Logs', 'Analytics Data')
- archived_data: JSON (Complete archived record data)
- archive_date: DATE (Required)
- archive_reason: VARCHAR(200)
- storage_path: VARCHAR(500)
- file_size_bytes: BIGINT
- checksum_hash: VARCHAR(256)
- compression_ratio: DECIMAL(5,2)
- anonymization_method: VARCHAR(100)
- data_sensitivity_level: ENUM('Public', 'Internal', 'Confidential', 'Restricted', 'Highly Restricted')
- privacy_impact_assessment: JSON (Privacy impact assessment at time of archival)
- legal_hold_status: ENUM('Not Applicable', 'Active', 'Released', 'Extended')
- gdpr_erasure_status: ENUM('Not Applicable', 'Eligible', 'Restricted', 'Permanently Deleted')
- ccpa_deletion_status: ENUM('Not Applicable', 'Eligible', 'Restricted', 'Permanently Deleted')
- access_count: INTEGER (Default: 0)
- last_accessed_at: TIMESTAMP
- last_accessed_by_user_id: UUID (Foreign Key to user)
- access_reason: TEXT
- scheduled_deletion_date: DATE
- is_deleted: BOOLEAN (Default: FALSE)
- deleted_at: TIMESTAMP
- deleted_by_user_id: UUID (Foreign Key to user)
- deletion_method: VARCHAR(100)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_archival_policy_id (archival_policy_id)
- INDEX idx_original_table_name (original_table_name)
- INDEX idx_original_record_id (original_record_id)
- INDEX idx_entity_type (entity_type)
- INDEX idx_archive_date (archive_date)
- INDEX idx_data_sensitivity_level (data_sensitivity_level)
- INDEX idx_legal_hold_status (legal_hold_status)
- INDEX idx_gdpr_erasure_status (gdpr_erasure_status)
- INDEX idx_ccpa_deletion_status (ccpa_deletion_status)
- INDEX idx_scheduled_deletion_date (scheduled_deletion_date)
- INDEX idx_is_deleted (is_deleted)
- INDEX idx_last_accessed_at (last_accessed_at)

Constraints:
- fk_privacy_archived_data_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_privacy_archived_data_policy FOREIGN KEY (archival_policy_id) REFERENCES privacy_archival_policy(id)
- fk_privacy_archived_data_last_accessed_by FOREIGN KEY (last_accessed_by_user_id) REFERENCES user(id)
- fk_privacy_archived_data_deleted_by FOREIGN KEY (deleted_by_user_id) REFERENCES user(id)
- fk_privacy_archived_data_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_file_size_positive CHECK (file_size_bytes >= 0)
- chk_access_positive CHECK (access_count >= 0)
- chk_compression_range CHECK (compression_ratio BETWEEN 0 AND 1)
```

--- END OF SECTION 12.2.13 ---
