## 8.1 Workforce Planning

```sql
Table: workforce_plan
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_code: VARCHAR(50) (Required, Unique, Indexed)
- plan_name: VARCHAR(200) (Required)
- plan_type: ENUM('Strategic', 'Operational', 'Contingency', 'Succession', 'Skills-based')
- plan_category: ENUM('Annual', 'Quarterly', 'Project-based', 'Department-specific')
- plan_description: TEXT (Required)
- planning_period_start: DATE (Required)
- planning_period_end: DATE (Required)
- business_objectives: JSON (Strategic objectives and goals)
- current_headcount: INTEGER (Default: 0)
- target_headcount: INTEGER (Default: 0)
- budget_allocated: DECIMAL(15,2)
- budget_spent: DECIMAL(15,2) (Default: 0.00)
- status: ENUM('Draft', 'Under Review', 'Approved', 'Active', 'Completed', 'Cancelled')
- plan_owner_id: UUID (Foreign Key to employee)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_plan_company_code (company_id, plan_code)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_type (plan_type)
- INDEX idx_plan_category (plan_category)
- INDEX idx_planning_period_start (planning_period_start)
- INDEX idx_planning_period_end (planning_period_end)
- INDEX idx_status (status)
- INDEX idx_plan_owner_id (plan_owner_id)
- INDEX idx_is_active (is_active)

Constraints:
- fk_workforce_plan_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_plan_owner FOREIGN KEY (plan_owner_id) REFERENCES employee(id)
- fk_workforce_plan_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_workforce_plan_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_plan_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (planning_period_end >= planning_period_start)
- chk_headcount_positive CHECK (current_headcount >= 0 AND target_headcount >= 0)
- chk_budget_positive CHECK (budget_allocated >= 0 AND budget_spent >= 0)
```

```sql
Table: workforce_demand
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_id: UUID (Foreign Key to workforce_plan)
- department_id: UUID (Foreign Key to department)
- job_id: UUID (Foreign Key to job)
- demand_type: ENUM('Growth', 'Replacement', 'Attrition', 'New Project', 'Skill Gap')
- demand_category: ENUM('Critical', 'High', 'Medium', 'Low')
- position_title: VARCHAR(200) (Required)
- required_positions: INTEGER (Default: 0)
- priority_level: ENUM('Immediate', 'Within 30 days', 'Within 60 days', 'Within 90 days', 'Within 6 months')
- skill_requirements: JSON (Required skills and qualifications)
- experience_level: ENUM('Entry', 'Junior', 'Mid', 'Senior', 'Lead', 'Manager', 'Director')
- salary_range_min: DECIMAL(10,2)
- salary_range_max: DECIMAL(10,2)
- location_requirement: VARCHAR(200)
- remote_allowed: BOOLEAN (Default: FALSE)
- demand_date: DATE (Required)
- justification: TEXT
- status: ENUM('Pending', 'Approved', 'Filled', 'Cancelled', 'On Hold')
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_id (plan_id)
- INDEX idx_department_id (department_id)
- INDEX idx_job_id (job_id)
- INDEX idx_demand_type (demand_type)
- INDEX idx_demand_category (demand_category)
- INDEX idx_priority_level (priority_level)
- INDEX idx_demand_date (demand_date)
- INDEX idx_status (status)

Constraints:
- fk_workforce_demand_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_demand_plan FOREIGN KEY (plan_id) REFERENCES workforce_plan(id)
- fk_workforce_demand_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_workforce_demand_job FOREIGN KEY (job_id) REFERENCES job(id)
- fk_workforce_demand_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_demand_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_positions_positive CHECK (required_positions >= 0)
- chk_salary_range CHECK (salary_range_max >= salary_range_min AND salary_range_min >= 0 AND salary_range_max >= 0)
```

## 8.1.2 Workforce Supply Schema

```sql
Table: workforce_supply
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_id: UUID (Foreign Key to workforce_plan)
- department_id: UUID (Foreign Key to department)
- job_id: UUID (Foreign Key to job)
- supply_type: ENUM('Internal', 'External', 'Contract', 'Temporary', 'Intern')
- supply_category: ENUM('Current Staff', 'Pipeline Candidates', 'Internal Mobility', 'Training Programs')
- position_title: VARCHAR(200) (Required)
- available_positions: INTEGER (Default: 0)
- experience_level: ENUM('Entry', 'Junior', 'Mid', 'Senior', 'Lead', 'Manager', 'Director')
- skill_inventory: JSON (Available skills and competencies)
- readiness_level: ENUM('Ready', 'Development Needed', 'Training Required', 'Not Ready')
- availability_date: DATE
- cost_per_position: DECIMAL(10,2)
- location: VARCHAR(200)
- remote_available: BOOLEAN (Default: FALSE)
- source: VARCHAR(200)
- quality_score: DECIMAL(3,2) (Check: 1.00 TO 5.00)
- status: ENUM('Available', 'Committed', 'Unavailable', 'In Progress')
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_id (plan_id)
- INDEX idx_department_id (department_id)
- INDEX idx_job_id (job_id)
- INDEX idx_supply_type (supply_type)
- INDEX idx_supply_category (supply_category)
- INDEX idx_experience_level (experience_level)
- INDEX idx_readiness_level (readiness_level)
- INDEX idx_availability_date (availability_date)
- INDEX idx_status (status)

Constraints:
- fk_workforce_supply_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_supply_plan FOREIGN KEY (plan_id) REFERENCES workforce_plan(id)
- fk_workforce_supply_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_workforce_supply_job FOREIGN KEY (job_id) REFERENCES job(id)
- fk_workforce_supply_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_supply_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_positions_positive CHECK (available_positions >= 0)
- chk_cost_positive CHECK (cost_per_position >= 0)
- chk_quality_range CHECK (quality_score BETWEEN 1 AND 5)
```

```sql
Table: internal_talent_pool
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- pool_type: ENUM('High Potential', 'Leadership Pipeline', 'Technical Experts', 'Cross-functional', 'Succession Candidates')
- pool_category: ENUM('Critical Roles', 'Key Positions', 'Skill Shortage Areas', 'Future Needs')
- current_role: VARCHAR(200) (Required)
- target_roles: JSON (Potential future roles)
- readiness_timeline: ENUM('Immediate', '6-12 months', '1-2 years', '2+ years')
- development_needs: JSON (Required development and training)
- skill_gaps: JSON (Identified skill gaps)
- performance_rating: DECIMAL(3,2) (Check: 1.00 TO 5.00)
- potential_rating: DECIMAL(3,2) (Check: 1.00 TO 5.00)
- mobility_willingness: ENUM('High', 'Medium', 'Low', 'Not Willing')
- relocation_required: BOOLEAN (Default: FALSE)
- pool_status: ENUM('Active', 'On Hold', 'Graduated', 'Exited')
- nominated_by_user_id: UUID (Foreign Key to employee)
- reviewed_by_user_id: UUID (Foreign Key to employee)
- last_review_date: DATE
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_pool_type (pool_type)
- INDEX idx_pool_category (pool_category)
- INDEX idx_readiness_timeline (readiness_timeline)
- INDEX idx_performance_rating (performance_rating)
- INDEX idx_potential_rating (potential_rating)
- INDEX idx_mobility_willingness (mobility_willingness)
- INDEX idx_pool_status (pool_status)
- INDEX idx_nominated_by_user_id (nominated_by_user_id)

Constraints:
- fk_internal_talent_pool_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_internal_talent_pool_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_internal_talent_pool_nominated_by FOREIGN KEY (nominated_by_user_id) REFERENCES employee(id)
- fk_internal_talent_pool_reviewed_by FOREIGN KEY (reviewed_by_user_id) REFERENCES employee(id)
- chk_rating_range CHECK (performance_rating BETWEEN 1 AND 5 AND potential_rating BETWEEN 1 AND 5)
```

## 8.1.3 Gap Analysis Schema

```sql
Table: workforce_gap_analysis
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_id: UUID (Foreign Key to workforce_plan)
- analysis_date: DATE (Required)
- analysis_period: ENUM('Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- department_id: UUID (Foreign Key to department)
- job_id: UUID (Foreign Key to job)
- gap_type: ENUM('Headcount', 'Skills', 'Experience', 'Leadership', 'Succession')
- gap_category: ENUM('Critical', 'High', 'Medium', 'Low')
- current_supply: INTEGER (Default: 0)
- projected_demand: INTEGER (Default: 0)
- gap_volume: INTEGER (Default: 0)
- gap_percentage: DECIMAL(5,2) (Default: 0.00)
- time_to_fill: INTEGER (Default: 0)
- financial_impact: DECIMAL(15,2)
- business_risk: ENUM('Low', 'Medium', 'High', 'Critical')
- mitigation_strategies: JSON (Recommended actions to close gaps)
- owner_id: UUID (Foreign Key to employee)
- status: ENUM('Identified', 'In Progress', 'Mitigated', 'Closed', 'Escalated')
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_id (plan_id)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_department_id (department_id)
- INDEX idx_job_id (job_id)
- INDEX idx_gap_type (gap_type)
- INDEX idx_gap_category (gap_category)
- INDEX idx_gap_volume (gap_volume)
- INDEX idx_business_risk (business_risk)
- INDEX idx_owner_id (owner_id)
- INDEX idx_status (status)

Constraints:
- fk_workforce_gap_analysis_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_gap_analysis_plan FOREIGN KEY (plan_id) REFERENCES workforce_plan(id)
- fk_workforce_gap_analysis_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_workforce_gap_analysis_job FOREIGN KEY (job_id) REFERENCES job(id)
- fk_workforce_gap_analysis_owner FOREIGN KEY (owner_id) REFERENCES employee(id)
- fk_workforce_gap_analysis_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_gap_analysis_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_volume_positive CHECK (current_supply >= 0 AND projected_demand >= 0 AND gap_volume >= 0)
- chk_percentage_range CHECK (gap_percentage BETWEEN -100 AND 100)
- chk_time_positive CHECK (time_to_fill >= 0)
```

```sql
Table: gap_mitigation_action
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- gap_analysis_id: UUID (Foreign Key to workforce_gap_analysis)
- action_type: ENUM('Recruitment', 'Training', 'Internal Mobility', 'Restructuring', 'Outsourcing', 'Process Improvement')
- action_category: ENUM('Short-term', 'Medium-term', 'Long-term', 'Immediate')
- action_description: TEXT (Required)
- target_positions: INTEGER (Default: 0)
- budget_required: DECIMAL(15,2)
- budget_approved: DECIMAL(15,2) (Default: 0.00)
- timeline_days: INTEGER (Default: 0)
- success_metrics: JSON (Measures of success)
- responsible_person_id: UUID (Foreign Key to employee)
- start_date: DATE (Required)
- target_completion_date: DATE (Required)
- actual_completion_date: DATE
- status: ENUM('Planned', 'In Progress', 'Completed', 'Delayed', 'Cancelled', 'On Hold')
- effectiveness_score: DECIMAL(3,2) (Check: 1.00 TO 5.00)
- lessons_learned: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_gap_analysis_id (gap_analysis_id)
- INDEX idx_action_type (action_type)
- INDEX idx_action_category (action_category)
- INDEX idx_target_positions (target_positions)
- INDEX idx_timeline_days (timeline_days)
- INDEX idx_responsible_person_id (responsible_person_id)
- INDEX idx_start_date (start_date)
- INDEX idx_target_completion_date (target_completion_date)
- INDEX idx_status (status)
- INDEX idx_effectiveness_score (effectiveness_score)

Constraints:
- fk_gap_mitigation_action_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_gap_mitigation_action_gap_analysis FOREIGN KEY (gap_analysis_id) REFERENCES workforce_gap_analysis(id)
- fk_gap_mitigation_action_responsible_person FOREIGN KEY (responsible_person_id) REFERENCES employee(id)
- fk_gap_mitigation_action_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_gap_mitigation_action_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_positions_positive CHECK (target_positions >= 0)
- chk_budget_positive CHECK (budget_required >= 0 AND budget_approved >= 0)
- chk_timeline_positive CHECK (timeline_days >= 0)
- chk_effectiveness_range CHECK (effectiveness_score BETWEEN 1 AND 5)
- chk_date_order CHECK (target_completion_date >= start_date)
```

## 8.1.4 Scenario Planning Schema

```sql
Table: workforce_scenario
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_id: UUID (Foreign Key to workforce_plan)
- scenario_code: VARCHAR(50) (Required, Unique, Indexed)
- scenario_name: VARCHAR(200) (Required)
- scenario_type: ENUM('Best Case', 'Worst Case', 'Most Likely', 'Growth', 'Downsizing', 'Market Expansion', 'Technology Disruption')
- scenario_category: ENUM('Strategic', 'Operational', 'Financial', 'Market', 'Regulatory')
- scenario_description: TEXT (Required)
- assumptions: JSON (Key assumptions and variables)
- probability_weight: DECIMAL(3,2) (Default: 0.00)
- time_horizon_months: INTEGER (Default: 12)
- business_growth_rate: DECIMAL(5,2) (Default: 0.00)
- attrition_rate: DECIMAL(5,2) (Default: 0.00)
- productivity_improvement: DECIMAL(5,2) (Default: 0.00)
- automation_impact: DECIMAL(5,2) (Default: 0.00)
- market_conditions: JSON (External market factors)
- financial_impact: DECIMAL(15,2)
- status: ENUM('Draft', 'Under Review', 'Approved', 'Active', 'Archived')
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_scenario_company_code (company_id, scenario_code)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_id (plan_id)
- INDEX idx_scenario_type (scenario_type)
- INDEX idx_scenario_category (scenario_category)
- INDEX idx_probability_weight (probability_weight)
- INDEX idx_time_horizon_months (time_horizon_months)
- INDEX idx_status (status)

Constraints:
- fk_workforce_scenario_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_scenario_plan FOREIGN KEY (plan_id) REFERENCES workforce_plan(id)
- fk_workforce_scenario_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_scenario_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_probability_range CHECK (probability_weight BETWEEN 0 AND 1)
- chk_horizon_positive CHECK (time_horizon_months > 0)
```

```sql
Table: scenario_projection
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- scenario_id: UUID (Foreign Key to workforce_scenario)
- projection_period: ENUM('Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- projection_date: DATE (Required)
- department_id: UUID (Foreign Key to department)
- job_category: VARCHAR(100)
- projected_headcount: INTEGER (Default: 0)
- projected_hires: INTEGER (Default: 0)
- projected_attrition: INTEGER (Default: 0)
- projected_internal_mobility: INTEGER (Default: 0)
- skill_requirements: JSON (Projected skill needs)
- cost_projection: DECIMAL(15,2)
- revenue_impact: DECIMAL(15,2)
- productivity_impact: DECIMAL(15,2)
- confidence_level: DECIMAL(3,2) (Default: 0.00)
- risk_factors: JSON (Identified risks and mitigations)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_scenario_id (scenario_id)
- INDEX idx_projection_period (projection_period)
- INDEX idx_projection_date (projection_date)
- INDEX idx_department_id (department_id)
- INDEX idx_projected_headcount (projected_headcount)
- INDEX idx_projected_hires (projected_hires)
- INDEX idx_confidence_level (confidence_level)

Constraints:
- fk_workforce_scenario_projection_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_scenario_projection_scenario FOREIGN KEY (scenario_id) REFERENCES workforce_scenario(id)
- fk_workforce_scenario_projection_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_workforce_scenario_projection_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_scenario_projection_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_headcount_positive CHECK (projected_headcount >= 0 AND projected_hires >= 0 AND projected_attrition >= 0 AND projected_internal_mobility >= 0)
- chk_confidence_range CHECK (confidence_level BETWEEN 0 AND 1)
```

## 8.1.5 Budget & Cost Analysis Schema

```sql
Table: workforce_budget
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- plan_id: UUID (Foreign Key to workforce_plan)
- budget_code: VARCHAR(50) (Required, Unique, Indexed)
- budget_name: VARCHAR(200) (Required)
- budget_type: ENUM('Recruitment', 'Training', 'Compensation', 'Benefits', 'Technology', 'Consulting', 'Contingency')
- budget_category: ENUM('Operating', 'Capital', 'Discretionary', 'Mandatory')
- fiscal_year: INTEGER (Required)
- fiscal_quarter: ENUM('Q1', 'Q2', 'Q3', 'Q4', 'Annual')
- department_id: UUID (Foreign Key to department)
- allocated_amount: DECIMAL(15,2) (Required)
- committed_amount: DECIMAL(15,2) (Default: 0.00)
- spent_amount: DECIMAL(15,2) (Default: 0.00)
- remaining_amount: DECIMAL(15,2) (Default: 0.00)
- currency: VARCHAR(3) (Default: 'USD')
- approval_status: ENUM('Draft', 'Submitted', 'Approved', 'Rejected', 'Modified')
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- budget_owner_id: UUID (Foreign Key to employee)
- status: ENUM('Active', 'Frozen', 'Closed', 'Cancelled')
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_budget_company_code (company_id, budget_code)
- INDEX idx_company_id (company_id)
- INDEX idx_plan_id (plan_id)
- INDEX idx_budget_type (budget_type)
- INDEX idx_budget_category (budget_category)
- INDEX idx_fiscal_year (fiscal_year)
- INDEX idx_fiscal_quarter (fiscal_quarter)
- INDEX idx_department_id (department_id)
- INDEX idx_allocated_amount (allocated_amount)
- INDEX idx_approval_status (approval_status)
- INDEX idx_budget_owner_id (budget_owner_id)
- INDEX idx_status (status)

Constraints:
- fk_workforce_budget_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_budget_plan FOREIGN KEY (plan_id) REFERENCES workforce_plan(id)
- fk_workforce_budget_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_workforce_budget_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_workforce_budget_owner FOREIGN KEY (budget_owner_id) REFERENCES employee(id)
- fk_workforce_budget_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_budget_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_amount_positive CHECK (allocated_amount >= 0 AND committed_amount >= 0 AND spent_amount >= 0 AND remaining_amount >= 0)
- chk_fiscal_positive CHECK (fiscal_year > 0)
```

```sql
Table: cost_analysis
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- budget_id: UUID (Foreign Key to workforce_budget)
- analysis_type: ENUM('Recruitment Cost', 'Training Cost', 'Turnover Cost', 'Productivity Cost', 'Opportunity Cost')
- analysis_category: ENUM('Per Hire', 'Per Employee', 'Department', 'Role', 'Skill Level')
- analysis_period_start: DATE (Required)
- analysis_period_end: DATE (Required)
- cost_center: VARCHAR(100)
- total_cost: DECIMAL(15,2) (Required)
- cost_per_unit: DECIMAL(10,2)
- cost_components: JSON (Detailed cost breakdown)
- efficiency_metrics: JSON (Cost efficiency indicators)
- benchmark_comparison: DECIMAL(10,2)
- variance_percentage: DECIMAL(5,2) (Default: 0.00)
- cost_drivers: JSON (Factors influencing costs)
- optimization_opportunities: JSON (Potential cost savings)
- roi_calculation: DECIMAL(5,2)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_budget_id (budget_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_category (analysis_category)
- INDEX idx_analysis_period_start (analysis_period_start)
- INDEX idx_analysis_period_end (analysis_period_end)
- INDEX idx_total_cost (total_cost)
- INDEX idx_cost_per_unit (cost_per_unit)
- INDEX idx_roi_calculation (roi_calculation)

Constraints:
- fk_workforce_cost_analysis_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_cost_analysis_budget FOREIGN KEY (budget_id) REFERENCES workforce_budget(id)
- fk_workforce_cost_analysis_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_cost_analysis_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (analysis_period_end >= analysis_period_start)
- chk_cost_positive CHECK (total_cost >= 0 AND cost_per_unit >= 0)
```

## 8.1.6 Integration & Workflow Schema

```sql
Table: workforce_integration
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- integration_name: VARCHAR(200) (Required)
- integration_type: ENUM('HRIS Integration', 'ATS Integration', 'Finance System', 'Time Tracking', 'Performance Management', 'Learning Management')
- integration_category: ENUM('Data Sync', 'API Integration', 'File Transfer', 'Webhook', 'Real-time Sync', 'Batch Processing')
- source_system: VARCHAR(200) (Required)
- target_system: VARCHAR(200) (Required)
- integration_description: TEXT (Required)
- data_flow_direction: ENUM('Inbound', 'Outbound', 'Bidirectional')
- sync_frequency: ENUM('Real-time', 'Every 5 minutes', 'Every 15 minutes', 'Every 30 minutes', 'Hourly', 'Daily')
- data_mapping: JSON (Field mapping between systems)
- transformation_rules: JSON (Data transformation logic)
- error_handling: JSON (Error handling and retry logic)
- authentication_method: ENUM('API Key', 'OAuth 2.0', 'Basic Auth', 'Certificate', 'Custom')
- connection_status: ENUM('Active', 'Inactive', 'Error', 'Testing', 'Maintenance')
- last_sync_at: TIMESTAMP
- next_sync_at: TIMESTAMP
- error_count: INTEGER (Default: 0)
- data_quality_score: DECIMAL(3,2) (Default: 0.00)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_integration_type (integration_type)
- INDEX idx_integration_category (integration_category)
- INDEX idx_source_system (source_system)
- INDEX idx_target_system (target_system)
- INDEX idx_sync_frequency (sync_frequency)
- INDEX idx_connection_status (connection_status)
- INDEX idx_last_sync_at (last_sync_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_workforce_integration_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_integration_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_integration_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_error_count_positive CHECK (error_count >= 0)
- chk_data_quality_range CHECK (data_quality_score BETWEEN 0 AND 5)
```

```sql
Table: workforce_workflow
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_name: VARCHAR(200) (Required)
- workflow_type: ENUM('Plan Approval', 'Budget Review', 'Gap Analysis', 'Scenario Planning', 'Cost Analysis', 'Report Generation')
- workflow_category: ENUM('Standard', 'Emergency', 'High Priority', 'Executive', 'Automated', 'Scheduled')
- trigger_event: ENUM('Schedule Trigger', 'Data Change', 'Threshold Breach', 'Manual Trigger', 'API Call', 'System Event')
- workflow_description: TEXT (Required)
- workflow_steps: JSON (Ordered workflow steps and configurations)
- approval_levels: JSON (Multi-level approval requirements)
- escalation_rules: JSON (Escalation conditions and paths)
- timeout_settings: JSON (Step timeout and reminder settings)
- notification_rules: JSON (Notification triggers and recipients)
- retry_configuration: JSON (Retry logic and limits)
- is_active: BOOLEAN (Default: TRUE)
- version: INTEGER (Default: 1)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_type (workflow_type)
- INDEX idx_workflow_category (workflow_category)
- INDEX idx_trigger_event (trigger_event)
- INDEX idx_is_active (is_active)
- INDEX idx_version (version)

Constraints:
- fk_workforce_workflow_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_workflow_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_workflow_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (version > 0)
```

## 8.1.7 Security & Access Control Schema

```sql
Table: workforce_access_control
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- user_id: UUID (Foreign Key to user)
- role_id: UUID (Foreign Key to role)
- access_scope: ENUM('All Plans', 'Department Plans', 'Own Plans', 'Specific Plans', 'Read Only Plans')
- plan_ids: JSON (Array of specific plan IDs)
- permission_level: ENUM('Read Only', 'Create', 'Edit', 'Delete', 'Admin', 'Full Access')
- data_access_level: ENUM('Aggregated Only', 'Department Level', 'Team Level', 'Individual Level', 'Raw Data')
- can_export_data: BOOLEAN (Default: FALSE)
- can_share_reports: BOOLEAN (Default: FALSE)
- can_configure_plans: BOOLEAN (Default: FALSE)
- can_approve_budgets: BOOLEAN (Default: FALSE)
- ip_restriction: JSON (IP address restrictions)
- time_restriction: JSON (Time-based access restrictions)
- granted_by_user_id: UUID (Foreign Key to user)
- granted_at: TIMESTAMP (Auto)
- expires_at: DATE
- is_active: BOOLEAN (Default: TRUE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_role_id (role_id)
- INDEX idx_access_scope (access_scope)
- INDEX idx_permission_level (permission_level)
- INDEX idx_data_access_level (data_access_level)
- INDEX idx_granted_by_user_id (granted_by_user_id)
- INDEX idx_expires_at (expires_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_workforce_access_control_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_access_control_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_workforce_access_control_role FOREIGN KEY (role_id) REFERENCES role(id)
- fk_workforce_access_control_granted_by FOREIGN KEY (granted_by_user_id) REFERENCES user(id)
- chk_expires_future CHECK (expires_at IS NULL OR expires_at >= granted_at)
```

```sql
Table: workforce_data_masking
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- masking_rule_name: VARCHAR(200) (Required)
- data_entity: ENUM('Plan Data', 'Budget Information', 'Employee Data', 'Salary Information', 'Gap Analysis', 'Scenario Data')
- masking_method: ENUM('Full Mask', 'Partial Mask', 'Tokenization', 'Pseudonymization', 'Hash', 'Aggregation')
- masking_pattern: VARCHAR(100) (Required)
- replacement_value: VARCHAR(200)
- applies_to_roles: JSON (Roles this masking applies to)
- applies_to_data_types: JSON (Data types this masking applies to)
- masking_conditions: JSON (Conditions when masking is applied)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_data_entity (data_entity)
- INDEX idx_masking_method (masking_method)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_workforce_data_masking_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_data_masking_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_data_masking_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

## 8.1.8 Audit & Compliance Schema

```sql
Table: workforce_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'View', 'Export', 'Share', 'Access', 'Login', 'Logout', 'Approve', 'Reject')
- entity_type: ENUM('Plan', 'Demand', 'Supply', 'Gap Analysis', 'Scenario', 'Budget', 'Integration', 'Workflow')
- entity_id: UUID
- old_values: JSON (Previous values before change)
- new_values: JSON (New values after change)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- affected_records: INTEGER (Default: 0)
- data_sensitivity: ENUM('Public', 'Internal', 'Confidential', 'Sensitive', 'Restricted')
- compliance_impact: ENUM('None', 'Low', 'Medium', 'High', 'Critical')
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_entity_id (entity_id)
- idx_performed_by_user_id (performed_by_user_id)
- idx_data_sensitivity (data_sensitivity)
- idx_compliance_impact (compliance_impact)
- idx_timestamp (timestamp)

Constraints:
- fk_workforce_audit_log_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_audit_log_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
- chk_affected_records_positive CHECK (affected_records >= 0)
```

```sql
Table: workforce_compliance_report
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- report_type: ENUM('Data Privacy', 'Access Control', 'Plan Compliance', 'Budget Compliance', 'Scenario Validation', 'Regulatory Compliance')
- report_period_start: DATE (Required)
- report_period_end: DATE (Required)
- compliance_framework: ENUM('GDPR', 'CCPA', 'HIPAA', 'SOX', 'ISO 27001', 'Internal Policy', 'Industry Standard')
- compliance_status: ENUM('Compliant', 'Non-Compliant', 'Partially Compliant', 'Under Review', 'Remediation Required')
- compliance_score: DECIMAL(5,2) (Default: 0.00)
- findings_count: INTEGER (Default: 0)
- critical_findings: INTEGER (Default: 0)
- high_findings: INTEGER (Default: 0)
- medium_findings: INTEGER (Default: 0)
- low_findings: INTEGER (Default: 0)
- remediation_actions: JSON (Required remediation actions)
- remediation_due_date: DATE
- evidence_documents: JSON (Links to evidence documents)
- reviewed_by_user_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- generated_at: TIMESTAMP (Auto)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_report_type (report_type)
- idx_compliance_framework (compliance_framework)
- idx_compliance_status (compliance_status)
- idx_report_period_start (report_period_start)
- INDEX idx_report_period_end (report_period_end)
- INDEX idx_compliance_score (compliance_score)

Constraints:
- fk_workforce_compliance_report_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_compliance_report_reviewed_by FOREIGN KEY (reviewed_by_user_id) REFERENCES user(id)
- fk_workforce_compliance_report_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (report_period_end >= report_period_start)
- chk_score_range CHECK (compliance_score BETWEEN 0 AND 100)
- chk_findings_positive CHECK (findings_count >= 0 AND critical_findings >= 0 AND high_findings >= 0 AND medium_findings >= 0 AND low_findings >= 0)
```

## 8.1.9 Performance & Optimization Schema

```sql
Table: workforce_performance_metric
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- metric_name: VARCHAR(100) (Required)
- metric_category: ENUM('System Performance', 'Data Processing', 'Query Performance', 'User Experience', 'Plan Calculation', 'Scenario Analysis')
- measurement_unit: VARCHAR(50)
- target_value: DECIMAL(15,2)
- warning_threshold: DECIMAL(15,2)
- critical_threshold: DECIMAL(15,2)
- current_value: DECIMAL(15,2)
- performance_trend: ENUM('Improving', 'Stable', 'Declining', 'Volatile')
- trend_percentage: DECIMAL(5,2) (Default: 0.00)
- sla_met: BOOLEAN (Default: TRUE)
- collection_frequency: ENUM('Real-time', 'Every minute', 'Every 5 minutes', 'Every 15 minutes', 'Hourly')
- last_measured_at: TIMESTAMP (Auto)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_metric_category (metric_category)
- INDEX idx_target_value (target_value)
- idx_warning_threshold (warning_threshold)
- idx_critical_threshold (critical_threshold)
- idx_current_value (current_value)
- idx_performance_trend (performance_trend)
- idx_sla_met (sla_met)
- idx_last_measured_at (last_measured_at)

Constraints:
- fk_workforce_performance_metric_company FOREIGN KEY (company_id) REFERENCES company(id)
- chk_threshold_order CHECK (warning_threshold <= critical_threshold AND target_value <= warning_threshold)
```

```sql
Table: workforce_optimization
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- optimization_type: ENUM('Query Performance', 'Data Processing', 'Plan Calculation', 'Scenario Analysis', 'Cache Management', 'Database Indexing')
- optimization_description: TEXT (Required)
- before_metrics: JSON (Performance metrics before optimization)
- after_metrics: JSON (Performance metrics after optimization)
- improvement_percentage: DECIMAL(5,2) (Default: 0.00)
- optimization_date: DATE (Required)
- implemented_by_user_id: UUID (Foreign Key to user)
- is_successful: BOOLEAN (Default: FALSE)
- rollback_available: BOOLEAN (Default: FALSE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_optimization_type (optimization_type)
- idx_optimization_date (optimization_date)
- idx_is_successful (is_successful)
- INDEX idx_improvement_percentage (improvement_percentage)

Constraints:
- fk_workforce_optimization_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_optimization_implemented_by FOREIGN KEY (implemented_by_user_id) REFERENCES user(id)
- chk_improvement_range CHECK (improvement_percentage BETWEEN -100 AND 100)
```

## 8.1.10 Reporting & Analytics Schema

```sql
Table: workforce_report
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- report_name: VARCHAR(200) (Required)
- report_code: VARCHAR(50) (Required, Unique, Indexed)
- report_type: ENUM('Headcount Report', 'Demand Analysis', 'Supply Analysis', 'Gap Analysis', 'Scenario Comparison', 'Budget Analysis', 'Performance Metrics', 'Compliance Report')
- report_category: ENUM('Executive', 'Management', 'Operational', 'Strategic', 'Regulatory', 'Custom')
- report_description: TEXT (Required)
- data_sources: JSON (Data sources and filters)
- report_parameters: JSON (Configurable parameters)
- output_format: ENUM('PDF', 'Excel', 'CSV', 'HTML', 'Dashboard', 'API')
- schedule_frequency: ENUM('On Demand', 'Daily', 'Weekly', 'Monthly', 'Quarterly', 'Annually')
- schedule_settings: JSON (Scheduling configuration)
- distribution_list: JSON (Email distribution list)
- is_template: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_report_company_code (company_id, report_code)
- INDEX idx_company_id (company_id)
- INDEX idx_report_type (report_type)
- INDEX idx_report_category (report_category)
- INDEX idx_schedule_frequency (schedule_frequency)
- INDEX idx_is_template (is_template)
- INDEX idx_is_active (is_active)

Constraints:
- fk_workforce_report_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_report_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_report_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
```

```sql
Table: workforce_report_instance
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- report_id: UUID (Foreign Key to workforce_report)
- instance_name: VARCHAR(200) (Required)
- report_period_start: DATE (Required)
- report_period_end: DATE (Required)
- generation_status: ENUM('Pending', 'In Progress', 'Completed', 'Failed', 'Cancelled')
- generation_start_time: TIMESTAMP
- generation_end_time: TIMESTAMP
- file_path: VARCHAR(500)
- file_size: INTEGER
- record_count: INTEGER (Default: 0)
- parameters_used: JSON (Parameters used for this instance)
- data_filters: JSON (Applied data filters)
- generated_by_user_id: UUID (Foreign Key to user)
- error_message: TEXT
- retry_count: INTEGER (Default: 0)
- is_archived: BOOLEAN (Default: FALSE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_report_id (report_id)
- INDEX idx_report_period_start (report_period_start)
- INDEX idx_report_period_end (report_period_end)
- INDEX idx_generation_status (generation_status)
- INDEX idx_generation_start_time (generation_start_time)
- INDEX idx_generated_by_user_id (generated_by_user_id)
- INDEX idx_is_archived (is_archived)

Constraints:
- fk_workforce_report_instance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_report_instance_report FOREIGN KEY (report_id) REFERENCES workforce_report(id)
- fk_workforce_report_instance_generated_by FOREIGN KEY (generated_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (report_period_end >= report_period_start)
- chk_retry_positive CHECK (retry_count >= 0)
```

```sql
Table: workforce_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- analytics_name: VARCHAR(200) (Required)
- analytics_type: ENUM('Trend Analysis', 'Predictive Analytics', 'Descriptive Analytics', 'Prescriptive Analytics', 'Diagnostic Analytics')
- analytics_category: ENUM('Headcount Trends', 'Turnover Analysis', 'Skill Gap Analysis', 'Cost Analysis', 'Productivity Analysis', 'Diversity Metrics')
- data_source: JSON (Data sources and connections)
- analysis_methodology: TEXT (Required)
- algorithms_used: JSON (ML algorithms and models)
- accuracy_score: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- confidence_level: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- prediction_horizon: INTEGER (Default: 12)
- refresh_frequency: ENUM('Real-time', 'Hourly', 'Daily', 'Weekly', 'Monthly')
- last_run_at: TIMESTAMP
- next_run_at: TIMESTAMP
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_analytics_type (analytics_type)
- INDEX idx_analytics_category (analytics_category)
- INDEX idx_accuracy_score (accuracy_score)
- INDEX idx_confidence_level (confidence_level)
- INDEX idx_refresh_frequency (refresh_frequency)
- INDEX idx_last_run_at (last_run_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_workforce_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_analytics_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_analytics_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_score_range CHECK (accuracy_score BETWEEN 0 AND 1 AND confidence_level BETWEEN 0 AND 1)
- chk_horizon_positive CHECK (prediction_horizon > 0)
```

## 8.1.11 API & Integration Schema

```sql
Table: workforce_api_endpoint
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- endpoint_name: VARCHAR(200) (Required)
- endpoint_path: VARCHAR(500) (Required, Unique, Indexed)
- http_method: ENUM('GET', 'POST', 'PUT', 'DELETE', 'PATCH')
- endpoint_category: ENUM('Plan Management', 'Demand Analysis', 'Supply Analysis', 'Gap Analysis', 'Scenario Planning', 'Reporting', 'Analytics')
- description: TEXT (Required)
- request_schema: JSON (Request body schema)
- response_schema: JSON (Response body schema)
- authentication_required: BOOLEAN (Default: TRUE)
- rate_limit_per_minute: INTEGER (Default: 60)
- timeout_seconds: INTEGER (Default: 30)
- is_active: BOOLEAN (Default: TRUE)
- is_public: BOOLEAN (Default: FALSE)
- version: VARCHAR(20) (Default: 'v1')
- deprecated: BOOLEAN (Default: FALSE)
- deprecation_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_api_endpoint_company_path (company_id, endpoint_path)
- INDEX idx_company_id (company_id)
- INDEX idx_http_method (http_method)
- INDEX idx_endpoint_category (endpoint_category)
- INDEX idx_is_active (is_active)
- INDEX idx_is_public (is_public)
- INDEX idx_version (version)
- INDEX idx_deprecated (deprecated)

Constraints:
- fk_workforce_api_endpoint_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_api_endpoint_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_api_endpoint_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_rate_limit_positive CHECK (rate_limit_per_minute > 0)
- chk_timeout_positive CHECK (timeout_seconds > 0)
- chk_deprecation_order CHECK (deprecation_date IS NULL OR deprecation_date >= created_at)
```

```sql
Table: workforce_api_key
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- key_name: VARCHAR(200) (Required)
- api_key: VARCHAR(500) (Required, Unique, Indexed)
- key_type: ENUM('Production', 'Development', 'Testing', 'Read Only', 'Full Access')
- permissions: JSON (Array of allowed endpoints and methods)
- rate_limit_per_minute: INTEGER (Default: 60)
- ip_whitelist: JSON (Allowed IP addresses)
- domain_whitelist: JSON (Allowed domains)
- expires_at: TIMESTAMP
- last_used_at: TIMESTAMP
- usage_count: INTEGER (Default: 0)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_api_key_company_key (company_id, api_key)
- INDEX idx_company_id (company_id)
- INDEX idx_key_type (key_type)
- INDEX idx_expires_at (expires_at)
- INDEX idx_last_used_at (last_used_at)
- INDEX idx_usage_count (usage_count)
- INDEX idx_is_active (is_active)

Constraints:
- fk_workforce_api_key_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_api_key_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_api_key_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_rate_limit_positive CHECK (rate_limit_per_minute > 0)
- chk_usage_positive CHECK (usage_count >= 0)
```

```sql
Table: workforce_api_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- api_key_id: UUID (Foreign Key to workforce_api_key)
- endpoint_path: VARCHAR(500) (Required)
- http_method: ENUM('GET', 'POST', 'PUT', 'DELETE', 'PATCH')
- request_headers: JSON
- request_body: JSON
- response_status_code: INTEGER
- response_headers: JSON
- response_body: JSON
- processing_time_ms: INTEGER (Default: 0)
- request_size_bytes: INTEGER (Default: 0)
- response_size_bytes: INTEGER (Default: 0)
- client_ip_address: VARCHAR(45)
- user_agent: TEXT
- error_message: TEXT
- success: BOOLEAN (Default: TRUE)
- timestamp: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_api_key_id (api_key_id)
- INDEX idx_endpoint_path (endpoint_path)
- INDEX idx_http_method (http_method)
- INDEX idx_response_status_code (response_status_code)
- INDEX idx_processing_time_ms (processing_time_ms)
- INDEX idx_client_ip_address (client_ip_address)
- INDEX idx_success (success)
- INDEX idx_timestamp (timestamp)

Constraints:
- fk_workforce_api_log_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_api_log_api_key FOREIGN KEY (api_key_id) REFERENCES workforce_api_key(id)
- chk_processing_time_positive CHECK (processing_time_ms >= 0)
- chk_size_positive CHECK (request_size_bytes >= 0 AND response_size_bytes >= 0)
```

## 8.1.12 Mobile & Notification Schema

```sql
Table: workforce_mobile_device
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- user_id: UUID (Foreign Key to user)
- device_name: VARCHAR(200) (Required)
- device_type: ENUM('iOS', 'Android', 'Tablet', 'Desktop')
- device_identifier: VARCHAR(500) (Required, Unique, Indexed)
- push_token: VARCHAR(500)
- app_version: VARCHAR(50)
- os_version: VARCHAR(50)
- device_model: VARCHAR(100)
- manufacturer: VARCHAR(100)
- screen_resolution: VARCHAR(50)
- network_type: ENUM('WiFi', 'Cellular', 'Ethernet', 'Unknown')
- is_active: BOOLEAN (Default: TRUE)
- last_seen_at: TIMESTAMP
- registered_at: TIMESTAMP (Auto)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_mobile_device_company_identifier (company_id, device_identifier)
- INDEX idx_company_id (company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_device_type (device_type)
- INDEX idx_is_active (is_active)
- INDEX idx_last_seen_at (last_seen_at)

Constraints:
- fk_workforce_mobile_device_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_mobile_device_user FOREIGN KEY (user_id) REFERENCES user(id)
```

```sql
Table: workforce_notification
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- notification_type: ENUM('Plan Update', 'Budget Alert', 'Gap Analysis', 'Scenario Change', 'Report Ready', 'Compliance Alert', 'System Notification')
- notification_category: ENUM('Information', 'Warning', 'Error', 'Success', 'Reminder', 'Alert')
- title: VARCHAR(200) (Required)
- message: TEXT (Required)
- priority_level: ENUM('Low', 'Medium', 'High', 'Critical', 'Urgent')
- target_audience: ENUM('All Users', 'Specific Users', 'Roles', 'Departments', 'Plan Owners')
- target_recipients: JSON (Array of user IDs, roles, or departments)
- delivery_channels: JSON (Email, Push, SMS, In-App)
- scheduled_at: TIMESTAMP
- expires_at: TIMESTAMP
- is_read: BOOLEAN (Default: FALSE)
- is_archived: BOOLEAN (Default: FALSE)
- action_required: BOOLEAN (Default: FALSE)
- action_url: VARCHAR(500)
- action_deadline: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_notification_type (notification_type)
- INDEX idx_notification_category (notification_category)
- INDEX idx_priority_level (priority_level)
- INDEX idx_target_audience (target_audience)
- INDEX idx_scheduled_at (scheduled_at)
- INDEX idx_expires_at (expires_at)
- INDEX idx_is_read (is_read)
- INDEX idx_action_required (action_required)
- INDEX idx_created_by_user_id (created_by_user_id)

Constraints:
- fk_workforce_notification_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_notification_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_schedule_order CHECK (expires_at IS NULL OR expires_at >= scheduled_at)
```

```sql
Table: workforce_notification_delivery
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- notification_id: UUID (Foreign Key to workforce_notification)
- recipient_user_id: UUID (Foreign Key to user)
- delivery_channel: ENUM('Email', 'Push Notification', 'SMS', 'In-App', 'Webhook')
- delivery_status: ENUM('Pending', 'Sent', 'Delivered', 'Failed', 'Bounced', 'Opened', 'Clicked')
- sent_at: TIMESTAMP
- delivered_at: TIMESTAMP
- opened_at: TIMESTAMP
- clicked_at: TIMESTAMP
- failure_reason: TEXT
- retry_count: INTEGER (Default: 0)
- device_id: UUID (Foreign Key to workforce_mobile_device)
- response_data: JSON (User interaction data)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_notification_id (notification_id)
- INDEX idx_recipient_user_id (recipient_user_id)
- INDEX idx_delivery_channel (delivery_channel)
- INDEX idx_delivery_status (delivery_status)
- INDEX idx_sent_at (sent_at)
- INDEX idx_delivered_at (delivered_at)
- INDEX idx_device_id (device_id)

Constraints:
- fk_workforce_notification_delivery_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_notification_delivery_notification FOREIGN KEY (notification_id) REFERENCES workforce_notification(id)
- fk_workforce_notification_delivery_recipient FOREIGN KEY (recipient_user_id) REFERENCES user(id)
- fk_workforce_notification_delivery_device FOREIGN KEY (device_id) REFERENCES workforce_mobile_device(id)
- chk_retry_positive CHECK (retry_count >= 0)
```

```sql
Table: workforce_user_preference
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- user_id: UUID (Foreign Key to user)
- preference_category: ENUM('Notifications', 'Reports', 'Dashboard', 'Mobile', 'Email', 'Security')
- preference_key: VARCHAR(100) (Required)
- preference_value: JSON (Required)
- data_type: ENUM('String', 'Number', 'Boolean', 'Array', 'Object')
- is_system_default: BOOLEAN (Default: FALSE)
- is_encrypted: BOOLEAN (Default: FALSE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_workforce_user_preference_company_user_key (company_id, user_id, preference_key)
- INDEX idx_company_id (company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_preference_category (preference_category)
- INDEX idx_preference_key (preference_key)
- INDEX idx_effective_from (effective_from)
- INDEX idx_effective_to (effective_to)

Constraints:
- fk_workforce_user_preference_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_user_preference_user FOREIGN KEY (user_id) REFERENCES user(id)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

## 8.1.13 Data Warehouse & Analytics Schema

```sql
Table: workforce_data_warehouse
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- warehouse_name: VARCHAR(200) (Required)
- warehouse_type: ENUM('Strategic', 'Operational', 'Analytical', 'Historical', 'Real-time')
- data_source: JSON (Source systems and connections)
- extraction_frequency: ENUM('Real-time', 'Every 5 minutes', 'Every 15 minutes', 'Every 30 minutes', 'Hourly', 'Daily')
- transformation_rules: JSON (ETL transformation logic)
- data_quality_rules: JSON (Data validation and quality checks)
- schema_version: VARCHAR(20) (Default: 'v1.0')
- partition_strategy: ENUM('By Date', 'By Department', 'By Plan Type', 'By Company', 'Custom')
- retention_period_days: INTEGER (Default: 2555)
- compression_enabled: BOOLEAN (Default: TRUE)
- encryption_enabled: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- last_extraction_at: TIMESTAMP
- next_extraction_at: TIMESTAMP
- data_volume_gb: DECIMAL(10,2) (Default: 0.00)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_warehouse_type (warehouse_type)
- INDEX idx_extraction_frequency (extraction_frequency)
- INDEX idx_is_active (is_active)
- INDEX idx_last_extraction_at (last_extraction_at)
- INDEX idx_next_extraction_at (next_extraction_at)

Constraints:
- fk_workforce_data_warehouse_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_data_warehouse_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_data_warehouse_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (retention_period_days > 0)
- chk_volume_positive CHECK (data_volume_gb >= 0)
```

```sql
Table: workforce_analytics_model
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- model_name: VARCHAR(200) (Required)
- model_type: ENUM('Predictive', 'Classification', 'Regression', 'Clustering', 'Time Series', 'Anomaly Detection')
- model_category: ENUM('Attrition Prediction', 'Skill Gap Analysis', 'Demand Forecasting', 'Performance Prediction', 'Cost Optimization')
- model_description: TEXT (Required)
- algorithm_used: VARCHAR(100) (Required)
- training_data_source: JSON (Training data sources and filters)
- feature_variables: JSON (Input features and variables)
- target_variable: VARCHAR(100)
- model_parameters: JSON (Model hyperparameters and settings)
- accuracy_score: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- precision_score: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- recall_score: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- f1_score: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- training_date: DATE (Required)
- validation_date: DATE
- last_updated_at: TIMESTAMP
- model_version: VARCHAR(20) (Default: 'v1.0')
- is_active: BOOLEAN (Default: TRUE)
- is_production_ready: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_model_type (model_type)
- INDEX idx_model_category (model_category)
- INDEX idx_algorithm_used (algorithm_used)
- INDEX idx_accuracy_score (accuracy_score)
- INDEX idx_training_date (training_date)
- INDEX idx_is_active (is_active)
- INDEX idx_is_production_ready (is_production_ready)

Constraints:
- fk_workforce_analytics_model_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_analytics_model_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_analytics_model_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_score_range CHECK (accuracy_score BETWEEN 0 AND 1 AND precision_score BETWEEN 0 AND 1 AND recall_score BETWEEN 0 AND 1 AND f1_score BETWEEN 0 AND 1)
- chk_validation_order CHECK (validation_date IS NULL OR validation_date >= training_date)
```

```sql
Table: workforce_business_intelligence
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- dashboard_name: VARCHAR(200) (Required)
- dashboard_type: ENUM('Executive', 'Operational', 'Strategic', 'Analytical', 'Real-time', 'Historical')
- dashboard_category: ENUM('Headcount Analytics', 'Financial Metrics', 'Performance KPIs', 'Compliance Dashboard', 'Planning Dashboard')
- dashboard_description: TEXT (Required)
- data_sources: JSON (Connected data sources and warehouses)
- widgets: JSON (Dashboard widgets and configurations)
- filters: JSON (Available filters and parameters)
- refresh_frequency: ENUM('Real-time', 'Every 5 minutes', 'Every 15 minutes', 'Every 30 minutes', 'Hourly', 'Daily')
- access_permissions: JSON (User roles and access levels)
- sharing_settings: JSON (Public sharing and embedding options)
- is_template: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- layout_version: INTEGER (Default: 1)
- last_refreshed_at: TIMESTAMP
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_dashboard_type (dashboard_type)
- INDEX idx_dashboard_category (dashboard_category)
- INDEX idx_refresh_frequency (refresh_frequency)
- INDEX idx_is_template (is_template)
- INDEX idx_is_active (is_active)
- INDEX idx_layout_version (layout_version)
- INDEX idx_last_refreshed_at (last_refreshed_at)

Constraints:
- fk_workforce_business_intelligence_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_workforce_business_intelligence_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_workforce_business_intelligence_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (layout_version > 0)
```

--- END OF SECTION 8.1.13 ---
