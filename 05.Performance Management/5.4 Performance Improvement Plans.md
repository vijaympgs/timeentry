# 5.4 Performance Improvement Plans

## 5.4.1 Business Purpose

Performance Improvement Plans provides comprehensive management of employee performance improvement initiatives, including plan creation, progress tracking, milestone monitoring, and outcome evaluation. This ensures structured, fair, and effective performance improvement processes while supporting various improvement methodologies, coaching frameworks, and integration with performance reviews and development systems.

## 5.4.2 Business Scope

Enable complete performance improvement plan management including plan creation, goal setting, progress monitoring, coaching support, and outcome evaluation. The system supports multiple improvement methodologies, automated tracking, compliance monitoring, and audit trails while ensuring accuracy, transparency, and regulatory compliance across all improvement processes and organizational levels.

## 5.4.3 PIP Template Schema

```
Table: pip_template
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- template_code: VARCHAR(50) (Required, Indexed)
- template_name: VARCHAR(200) (Required)
- template_type: ENUM('Performance Improvement', 'Behavioral Improvement', 'Skill Development', 'Attendance Improvement', 'Quality Improvement')
- template_category: ENUM('General', 'Sales', 'Customer Service', 'Technical', 'Leadership', 'Operations', 'Finance', 'HR', 'IT')
- template_description: TEXT
- improvement_areas: JSON (Predefined improvement areas and categories)
- goal_setting_framework: JSON (Goal setting methodology and structure)
- measurement_criteria: JSON (Measurement and evaluation criteria)
- timeline_structure: JSON (Timeline and milestone structure)
- coaching_guidelines: JSON (Coaching guidelines and best practices)
- documentation_requirements: JSON (Required documentation and evidence)
- review_frequency: ENUM('Weekly', 'Bi-Weekly', 'Monthly', 'Quarterly', 'Custom')
- default_duration_days: INTEGER (Default: 90)
- min_duration_days: INTEGER (Default: 30)
- max_duration_days: INTEGER (Default: 180)
- extension_allowed: BOOLEAN (Default: TRUE)
- max_extension_days: INTEGER (Default: 30)
- success_criteria: JSON (Success criteria and completion standards)
- failure_consequences: JSON (Failure consequences and next steps)
- support_resources: JSON (Available support resources and programs)
- legal_compliance: JSON (Legal compliance requirements and guidelines)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- usage_count: INTEGER (Default: 0)
- success_rate: DECIMAL(5,2) (Default: 0.00)
- average_completion_time: INTEGER (Default: 0)
- is_public: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_pip_template_company_code (company_id, template_code)
- INDEX idx_company_id (company_id)
- INDEX idx_template_type (template_type)
- INDEX idx_template_category (template_category)
- INDEX idx_review_frequency (review_frequency)
- INDEX idx_default_duration_days (default_duration_days)
- INDEX idx_usage_count (usage_count)
- INDEX idx_success_rate (success_rate)
- INDEX idx_is_public (is_public)
- INDEX idx_is_active (is_active)

Constraints:
- fk_pip_template_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_template_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_pip_template_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_duration_positive CHECK (default_duration_days > 0 AND min_duration_days > 0 AND max_duration_days > 0)
- chk_duration_order CHECK (max_duration_days >= default_duration_days AND default_duration_days >= min_duration_days)
- chk_positive_metrics CHECK (usage_count >= 0 AND average_completion_time >= 0)
- chk_success_rate CHECK (success_rate BETWEEN 0 AND 100)
```

## 5.4.4 Performance Improvement Plan Schema

```
Table: performance_improvement_plan
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- pip_template_id: UUID (Foreign Key to pip_template)
- plan_number: VARCHAR(50) (Required, Unique, Indexed)
- plan_type: ENUM('Performance Improvement', 'Behavioral Improvement', 'Skill Development', 'Attendance Improvement', 'Quality Improvement')
- plan_category: ENUM('General', 'Sales', 'Customer Service', 'Technical', 'Leadership', 'Operations', 'Finance', 'HR', 'IT')
- plan_status: ENUM('Draft', 'Proposed', 'Approved', 'Active', 'On Hold', 'Completed', 'Extended', 'Terminated', 'Failed')
- priority: ENUM('Low', 'Medium', 'High', 'Critical', 'Urgent')
- employee_id: UUID (Foreign Key to employee)
- manager_id: UUID (Foreign Key to employee)
- hr_representative_id: UUID (Foreign Key to employee)
- coach_id: UUID (Foreign Key to employee)
- mentor_id: UUID (Foreign Key to employee)
- start_date: DATE (Required)
- end_date: DATE (Required)
- original_end_date: DATE
- extension_count: INTEGER (Default: 0)
- max_extensions_allowed: INTEGER (Default: 1)
- improvement_reason: TEXT (Required)
- performance_issues: JSON (Detailed performance issues and concerns)
- business_impact: TEXT (Business impact of performance issues)
- improvement_objectives: JSON (Specific improvement objectives and goals)
- success_metrics: JSON (Success metrics and measurement criteria)
- action_items: JSON (Detailed action items and tasks)
- milestones: JSON (Milestones and target dates)
- support_resources: JSON (Support resources and accommodations)
- training_requirements: JSON (Training and development requirements)
- coaching_plan: JSON (Coaching schedule and approach)
- review_schedule: JSON (Review schedule and frequency)
- documentation_requirements: JSON (Required documentation and evidence)
- success_criteria: JSON (Success criteria and completion standards)
- failure_consequences: JSON (Failure consequences and next steps)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- employee_acknowledged: BOOLEAN (Default: FALSE)
- acknowledged_date: TIMESTAMP
- employee_comments: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_pip_number (plan_number)
- INDEX idx_company_id (company_id)
- INDEX idx_pip_template_id (pip_template_id)
- INDEX idx_plan_type (plan_type)
- INDEX idx_plan_category (plan_category)
- INDEX idx_plan_status (plan_status)
- INDEX idx_priority (priority)
- INDEX idx_employee_id (employee_id)
- INDEX idx_manager_id (manager_id)
- INDEX idx_hr_representative_id (hr_representative_id)
- INDEX idx_coach_id (coach_id)
- INDEX idx_mentor_id (mentor_id)
- INDEX idx_start_date (start_date)
- INDEX idx_end_date (end_date)
- INDEX idx_original_end_date (original_end_date)

Constraints:
- fk_pip_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_template FOREIGN KEY (pip_template_id) REFERENCES pip_template(id)
- fk_pip_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_pip_manager FOREIGN KEY (manager_id) REFERENCES employee(id)
- fk_pip_hr_representative FOREIGN KEY (hr_representative_id) REFERENCES employee(id)
- fk_pip_coach FOREIGN KEY (coach_id) REFERENCES employee(id)
- fk_pip_mentor FOREIGN KEY (mentor_id) REFERENCES employee(id)
- fk_pip_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_pip_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_pip_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_date_order CHECK (end_date >= start_date AND original_end_date >= start_date)
- chk_extension_count CHECK (extension_count >= 0 AND max_extensions_allowed >= 0)
```

## 5.4.5 PIP Goal Schema

```
Table: pip_goal
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- pip_id: UUID (Foreign Key to performance_improvement_plan)
- goal_number: VARCHAR(50) (Required, Indexed)
- goal_title: VARCHAR(200) (Required)
- goal_description: TEXT (Required)
- goal_category: ENUM('Performance', 'Behavioral', 'Skill', 'Knowledge', 'Attendance', 'Quality', 'Communication', 'Leadership')
- goal_type: ENUM('Measurable', 'Observable', 'Developmental', 'Corrective', 'Preventive')
- goal_status: ENUM('Not Started', 'In Progress', 'Completed', 'Delayed', 'Cancelled', 'On Hold')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- target_date: DATE (Required)
- completion_date: DATE
- success_criteria: TEXT (Required)
- measurement_method: TEXT (Required)
- target_value: VARCHAR(200)
- current_value: VARCHAR(200)
- unit_of_measure: VARCHAR(100)
- weight_percentage: DECIMAL(5,2) (Default: 0.00)
- difficulty_level: ENUM('Easy', 'Medium', 'Hard', 'Expert')
- required_resources: JSON (Resources and support needed)
- dependencies: JSON (Dependencies on other goals or activities)
- risks_and_mitigation: JSON (Risk assessment and mitigation strategies)
- progress_notes: TEXT
- evidence_required: BOOLEAN (Default: TRUE)
- evidence_ids: JSON (Array of evidence document IDs)
- assigned_to_user_id: UUID (Foreign Key to employee)
- reviewer_id: UUID (Foreign Key to employee)
- completion_percentage: DECIMAL(5,2) (Default: 0.00)
- quality_rating: DECIMAL(3,2) (Default: 0.00)
- timeliness_rating: DECIMAL(3,2) (Default: 0.00)
- effort_rating: DECIMAL(3,2) (Default: 0.00)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_pip_goal_number (goal_number)
- INDEX idx_company_id (company_id)
- INDEX idx_pip_id (pip_id)
- INDEX idx_goal_category (goal_category)
- INDEX idx_goal_type (goal_type)
- INDEX idx_goal_status (goal_status)
- INDEX idx_priority (priority)
- INDEX idx_target_date (target_date)
- INDEX idx_completion_date (completion_date)
- INDEX idx_weight_percentage (weight_percentage)
- INDEX idx_assigned_to_user_id (assigned_to_user_id)
- INDEX idx_reviewer_id (reviewer_id)
- INDEX idx_completion_percentage (completion_percentage)

Constraints:
- fk_pip_goal_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_goal_pip FOREIGN KEY (pip_id) REFERENCES performance_improvement_plan(id)
- fk_pip_goal_assigned_to FOREIGN KEY (assigned_to_user_id) REFERENCES employee(id)
- fk_pip_goal_reviewer FOREIGN KEY (reviewer_id) REFERENCES employee(id)
- fk_pip_goal_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_weight_range CHECK (weight_percentage BETWEEN 0 AND 100)
- chk_completion_range CHECK (completion_percentage BETWEEN 0 AND 100)
- chk_rating_ranges CHECK (quality_rating BETWEEN 0 AND 5 AND timeliness_rating BETWEEN 0 AND 5 AND effort_rating BETWEEN 0 AND 5)
```

## 5.4.6 PIP Milestone Schema

```
Table: pip_milestone
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- pip_id: UUID (Foreign Key to performance_improvement_plan)
- pip_goal_id: UUID (Foreign Key to pip_goal)
- milestone_title: VARCHAR(200) (Required)
- milestone_description: TEXT
- milestone_type: ENUM('Progress Check', 'Deliverable', 'Review Point', 'Decision Gate', 'Achievement')
- milestone_status: ENUM('Not Started', 'In Progress', 'Completed', 'Delayed', 'Cancelled', 'Overdue')
- sequence_number: INTEGER (Required)
- target_date: DATE (Required)
- completion_date: DATE
- target_value: VARCHAR(200)
- actual_value: VARCHAR(200)
- unit_of_measure: VARCHAR(100)
- completion_percentage: DECIMAL(5,2) (Default: 0.00)
- weight_percentage: DECIMAL(5,2) (Default: 0.00)
- dependencies: JSON (Dependencies on other milestones)
- deliverables: JSON (Required deliverables and outputs)
- acceptance_criteria: TEXT (Required)
- verification_method: TEXT (Required)
- assigned_to_user_id: UUID (Foreign Key to employee)
- reviewer_id: UUID (Foreign Key to employee)
- evidence_required: BOOLEAN (Default: TRUE)
- evidence_ids: JSON (Array of evidence document IDs)
- notes: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_pip_id (pip_id)
- INDEX idx_pip_goal_id (pip_goal_id)
- INDEX idx_milestone_type (milestone_type)
- INDEX idx_milestone_status (milestone_status)
- INDEX idx_sequence_number (sequence_number)
- INDEX idx_target_date (target_date)
- INDEX idx_completion_date (completion_date)
- INDEX idx_assigned_to_user_id (assigned_to_user_id)
- INDEX idx_reviewer_id (reviewer_id)

Constraints:
- fk_pip_milestone_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_milestone_pip FOREIGN KEY (pip_id) REFERENCES performance_improvement_plan(id)
- fk_pip_milestone_goal FOREIGN KEY (pip_goal_id) REFERENCES pip_goal(id)
- fk_pip_milestone_assigned_to FOREIGN KEY (assigned_to_user_id) REFERENCES employee(id)
- fk_pip_milestone_reviewer FOREIGN KEY (reviewer_id) REFERENCES employee(id)
- fk_pip_milestone_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_sequence_positive CHECK (sequence_number > 0)
- chk_completion_range CHECK (completion_percentage BETWEEN 0 AND 100)
- chk_weight_range CHECK (weight_percentage BETWEEN 0 AND 100)
```

## 5.4.7 PIP Progress Schema

```
Table: pip_progress
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- pip_id: UUID (Foreign Key to performance_improvement_plan)
- pip_goal_id: UUID (Foreign Key to pip_goal)
- pip_milestone_id: UUID (Foreign Key to pip_milestone)
- progress_date: DATE (Required)
- progress_type: ENUM('Manual Update', 'System Calculated', 'Milestone Completion', 'Review Assessment', 'Auto-Progress')
- current_value: VARCHAR(200)
- target_value: VARCHAR(200)
- progress_percentage: DECIMAL(5,2) (Default: 0.00)
- achievement_rate: DECIMAL(5,2) (Default: 0.00)
- status: ENUM('On Track', 'Ahead of Schedule', 'Behind Schedule', 'At Risk', 'Completed', 'Not Started')
- confidence_level: ENUM('Very Low', 'Low', 'Medium', 'High', 'Very High')
- progress_notes: TEXT
- challenges_and_barriers: TEXT
- support_needed: TEXT
- next_steps: TEXT
- evidence_ids: JSON (Array of evidence document IDs)
- kpi_data: JSON (KPI measurements and metrics)
- quality_rating: DECIMAL(3,2) (Default: 0.00)
- timeliness_rating: DECIMAL(3,2) (Default: 0.00)
- effort_rating: DECIMAL(3,2) (Default: 0.00)
- engagement_rating: DECIMAL(3,2) (Default: 0.00)
- updated_by_user_id: UUID (Foreign Key to user)
- reviewed_by_user_id: UUID (Foreign Key to user)
- reviewed_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_pip_id (pip_id)
- INDEX idx_pip_goal_id (pip_goal_id)
- INDEX idx_pip_milestone_id (pip_milestone_id)
- INDEX idx_progress_date (progress_date)
- INDEX idx_progress_type (progress_type)
- INDEX idx_status (status)
- INDEX idx_confidence_level (confidence_level)
- INDEX idx_progress_percentage (progress_percentage)
- INDEX idx_achievement_rate (achievement_rate)
- INDEX idx_updated_by_user_id (updated_by_user_id)
- INDEX idx_reviewed_by_user_id (reviewed_by_user_id)

Constraints:
- fk_pip_progress_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_progress_pip FOREIGN KEY (pip_id) REFERENCES performance_improvement_plan(id)
- fk_pip_progress_goal FOREIGN KEY (pip_goal_id) REFERENCES pip_goal(id)
- fk_pip_progress_milestone FOREIGN KEY (pip_milestone_id) REFERENCES pip_milestone(id)
- fk_pip_progress_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- fk_pip_progress_reviewed_by FOREIGN KEY (reviewed_by_user_id) REFERENCES user(id)
- chk_progress_range CHECK (progress_percentage BETWEEN 0 AND 100 AND achievement_rate BETWEEN 0 AND 100)
- chk_rating_ranges CHECK (quality_rating BETWEEN 0 AND 5 AND timeliness_rating BETWEEN 0 AND 5 AND effort_rating BETWEEN 0 AND 5 AND engagement_rating BETWEEN 0 AND 5)
```

## 5.4.8 PIP Coaching Schema

```
Table: pip_coaching
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- pip_id: UUID (Foreign Key to performance_improvement_plan)
- coaching_session_number: VARCHAR(50) (Required, Indexed)
- coaching_type: ENUM('Performance Coaching', 'Skill Development', 'Behavioral Coaching', 'Career Coaching', 'Leadership Coaching')
- coaching_category: ENUM('Individual', 'Group', 'Team', 'Peer', 'Self-Coaching')
- coaching_status: ENUM('Scheduled', 'In Progress', 'Completed', 'Cancelled', 'Rescheduled', 'No Show')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- employee_id: UUID (Foreign Key to employee)
- coach_id: UUID (Foreign Key to employee)
- co_coach_id: UUID (Foreign Key to employee)
- scheduled_date: DATE (Required)
- scheduled_time: TIME (Required)
- duration_minutes: INTEGER (Default: 60)
- actual_start_time: TIMESTAMP
- actual_end_time: TIMESTAMP
- location: VARCHAR(200)
- meeting_type: ENUM('In-Person', 'Virtual', 'Phone', 'Hybrid')
- coaching_objectives: JSON (Specific coaching objectives and goals)
- coaching_focus_areas: JSON (Focus areas and topics)
- preparation_notes: TEXT
- session_agenda: JSON (Detailed session agenda)
- key_discussions: TEXT
- insights_and_observations: TEXT
- action_items: JSON (Action items and follow-up tasks)
- progress_assessment: TEXT
- next_steps: TEXT
- resources_provided: JSON (Resources and materials provided)
- homework_assignments: JSON (Homework and assignments)
- follow_up_required: BOOLEAN (Default: TRUE)
- follow_up_date: DATE
- coaching_effectiveness: DECIMAL(3,2) (Default: 0.00)
- employee_satisfaction: DECIMAL(3,2) (Default: 0.00)
- coach_notes: TEXT
- employee_feedback: TEXT
- attachment_ids: JSON (Array of attachment document IDs)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_pip_coaching_session_number (coaching_session_number)
- INDEX idx_company_id (company_id)
- INDEX idx_pip_id (pip_id)
- INDEX idx_coaching_type (coaching_type)
- INDEX idx_coaching_category (coaching_category)
- INDEX idx_coaching_status (coaching_status)
- INDEX idx_priority (priority)
- INDEX idx_employee_id (employee_id)
- INDEX idx_coach_id (coach_id)
- INDEX idx_co_coach_id (co_coach_id)
- INDEX idx_scheduled_date (scheduled_date)
- INDEX idx_follow_up_date (follow_up_date)
- INDEX idx_coaching_effectiveness (coaching_effectiveness)
- INDEX idx_employee_satisfaction (employee_satisfaction)

Constraints:
- fk_pip_coaching_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_coaching_pip FOREIGN KEY (pip_id) REFERENCES performance_improvement_plan(id)
- fk_pip_coaching_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_pip_coaching_coach FOREIGN KEY (coach_id) REFERENCES employee(id)
- fk_pip_coaching_co_coach FOREIGN KEY (co_coach_id) REFERENCES employee(id)
- fk_pip_coaching_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_duration_positive CHECK (duration_minutes > 0)
- chk_effectiveness_range CHECK (coaching_effectiveness BETWEEN 0 AND 5 AND employee_satisfaction BETWEEN 0 AND 5)
```

## 5.4.9 PIP Review Schema

```
Table: pip_review
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- pip_id: UUID (Foreign Key to performance_improvement_plan)
- review_type: ENUM('Progress Review', 'Milestone Review', 'Mid-Term Review', 'Final Review', 'Extension Review', 'Termination Review')
- review_category: ENUM('Formal', 'Informal', 'Self-Assessment', 'Peer Review', '360-Degree')
- review_status: ENUM('Scheduled', 'In Progress', 'Completed', 'Cancelled', 'Overdue')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- review_period_start: DATE (Required)
- review_period_end: DATE (Required)
- review_date: DATE (Required)
- reviewer_id: UUID (Foreign Key to employee)
- reviewee_id: UUID (Foreign Key to employee)
- overall_rating: DECIMAL(3,2) (Default: 0.00)
- progress_rating: DECIMAL(3,2) (Default: 0.00)
- effort_rating: DECIMAL(3,2) (Default: 0.00)
- attitude_rating: DECIMAL(3,2) (Default: 0.00)
- quality_rating: DECIMAL(3,2) (Default: 0.00)
- timeliness_rating: DECIMAL(3,2) (Default: 0.00)
- section_ratings: JSON (Individual section ratings)
- progress_summary: TEXT
- achievements: TEXT
- challenges: TEXT
- areas_for_improvement: TEXT
- strengths: TEXT
- development_needs: TEXT
- next_steps: TEXT
- recommendations: TEXT
- extension_required: BOOLEAN (Default: FALSE)
- extension_details: TEXT
- extension_duration_days: INTEGER (Default: 0)
- termination_recommended: BOOLEAN (Default: FALSE)
- termination_reason: TEXT
- additional_resources: JSON (Additional resources and support)
- recognition: TEXT
- feedback_from_others: JSON (Feedback from peers, stakeholders, etc.)
- evidence_ids: JSON (Array of evidence document IDs)
- follow_up_required: BOOLEAN (Default: FALSE)
- follow_up_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- completed_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_pip_id (pip_id)
- INDEX idx_review_type (review_type)
- INDEX idx_review_category (review_category)
- INDEX idx_review_status (review_status)
- INDEX idx_priority (priority)
- INDEX idx_review_period_start (review_period_start)
- INDEX idx_review_period_end (review_period_end)
- INDEX idx_review_date (review_date)
- INDEX idx_reviewer_id (reviewer_id)
- INDEX idx_reviewee_id (reviewee_id)
- INDEX idx_overall_rating (overall_rating)
- INDEX idx_follow_up_date (follow_up_date)

Constraints:
- fk_pip_review_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_review_pip FOREIGN KEY (pip_id) REFERENCES performance_improvement_plan(id)
- fk_pip_review_reviewer FOREIGN KEY (reviewer_id) REFERENCES employee(id)
- fk_pip_review_reviewee FOREIGN KEY (reviewee_id) REFERENCES employee(id)
- fk_pip_review_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (review_period_end >= review_period_start)
- chk_rating_ranges CHECK (overall_rating BETWEEN 0 AND 5 AND progress_rating BETWEEN 0 AND 5 AND effort_rating BETWEEN 0 AND 5 AND attitude_rating BETWEEN 0 AND 5 AND quality_rating BETWEEN 0 AND 5 AND timeliness_rating BETWEEN 0 AND 5)
- chk_extension_duration CHECK (extension_duration_days >= 0)
```

## 5.4.10 PIP Analytics Schema

```
Table: pip_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- team_id: UUID (Foreign Key to team)
- employee_id: UUID (Foreign Key to employee)
- pip_id: UUID (Foreign Key to performance_improvement_plan)
- analysis_type: ENUM('PIP Success Rate', 'Completion Time', 'Progress Tracking', 'Coaching Effectiveness', 'Trend Analysis', 'Predictive Analytics')
- analysis_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Semi-Annual', 'Annual')
- analysis_date: DATE (Required)
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- target_value: DECIMAL(15,2)
- achievement_percentage: DECIMAL(5,2)
- total_pips: INTEGER (Default: 0)
- completed_pips: INTEGER (Default: 0)
- successful_pips: INTEGER (Default: 0)
- failed_pips: INTEGER (Default: 0)
- extended_pips: INTEGER (Default: 0)
- terminated_pips: INTEGER (Default: 0)
- success_rate: DECIMAL(5,2) (Default: 0.00)
- average_completion_time: INTEGER (Default: 0)
- average_coaching_sessions: DECIMAL(5,2) (Default: 0.00)
- coaching_effectiveness_score: DECIMAL(3,2) (Default: 0.00)
- employee_satisfaction_score: DECIMAL(3,2) (Default: 0.00)
- cost_per_pip: DECIMAL(10,2) (Default: 0.00)
- roi_percentage: DECIMAL(5,2) (Default: 0.00)
- additional_metrics: JSON (Additional KPIs and breakdowns)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_team_id (team_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_pip_id (pip_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_metric_name (metric_name)

Constraints:
- fk_pip_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_pip_analytics_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_pip_analytics_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_pip_analytics_pip FOREIGN KEY (pip_id) REFERENCES performance_improvement_plan(id)
- fk_pip_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- chk_success_rate CHECK (success_rate BETWEEN 0 AND 100)
- chk_effectiveness_range CHECK (coaching_effectiveness_score BETWEEN 0 AND 5 AND employee_satisfaction_score BETWEEN 0 AND 5)
- chk_positive_metrics CHECK (total_pips >= 0 AND average_completion_time >= 0 AND average_coaching_sessions >= 0 AND cost_per_pip >= 0)
```

## 5.4.11 PIP Communication Schema

```
Table: pip_communication
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- communication_type: ENUM('PIP Assignment', 'Progress Update', 'Coaching Session', 'Review Notification', 'Milestone Achievement', 'Extension Request', 'Termination Notice', 'Completion Notification')
- communication_title: VARCHAR(200) (Required)
- communication_purpose: TEXT
- delivery_method: ENUM('Email', 'SMS', 'Push Notification', 'Portal Alert', 'Manager Notification', 'HR Notification', 'Legal Notification')
- communication_status: ENUM('Draft', 'Scheduled', 'Sent', 'Delivered', 'Failed', 'Read', 'Acknowledged', 'Action Required')
- pip_id: UUID (Foreign Key to performance_improvement_plan)
- pip_review_id: UUID (Foreign Key to pip_review)
- pip_coaching_id: UUID (Foreign Key to pip_coaching)
- scheduled_time: TIMESTAMP
- sent_time: TIMESTAMP
- delivery_time: TIMESTAMP
- read_time: TIMESTAMP
- acknowledged_time: TIMESTAMP
- content_type: ENUM('Text', 'HTML', 'PDF', 'Link', 'Interactive', 'Video')
- content_summary: TEXT
- content_details: JSON (Full communication content)
- priority: ENUM('Low', 'Medium', 'High', 'Urgent', 'Critical')
- requires_action: BOOLEAN (Default: FALSE)
- action_deadline: DATE
- action_completed: BOOLEAN (Default: FALSE)
- action_completion_date: DATE
- template_used: VARCHAR(200)
- personalization_data: JSON (Personalization variables and values)
- escalation_sent: BOOLEAN (Default: FALSE)
- escalation_level: INTEGER (Default: 0)
- response_tracking: JSON (Response tracking and analytics)
- legal_copy_required: BOOLEAN (Default: FALSE)
- legal_acknowledgment: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_communication_type (communication_type)
- INDEX idx_delivery_method (delivery_method)
- INDEX idx_communication_status (communication_status)
- INDEX idx_pip_id (pip_id)
- INDEX idx_pip_review_id (pip_review_id)
- INDEX idx_pip_coaching_id (pip_coaching_id)
- INDEX idx_scheduled_time (scheduled_time)
- INDEX idx_priority (priority)
- INDEX idx_requires_action (requires_action)
- INDEX idx_action_deadline (action_deadline)
- INDEX idx_legal_copy_required (legal_copy_required)
- INDEX idx_legal_acknowledgment (legal_acknowledgment)

Constraints:
- fk_pip_communication_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_pip_communication_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_pip_communication_pip FOREIGN KEY (pip_id) REFERENCES performance_improvement_plan(id)
- fk_pip_communication_review FOREIGN KEY (pip_review_id) REFERENCES pip_review(id)
- fk_pip_communication_coaching FOREIGN KEY (pip_coaching_id) REFERENCES pip_coaching(id)
- fk_pip_communication_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
