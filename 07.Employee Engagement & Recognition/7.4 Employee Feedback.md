# 7.4 Employee Feedback

## 7.4.1 Business Purpose & Scope

The Employee Feedback module provides a comprehensive framework for collecting, managing, and analyzing employee feedback across multiple channels and formats. This system enables organizations to gather continuous insights through surveys, pulse checks, 360-degree feedback, sentiment analysis, and real-time feedback mechanisms to drive organizational improvement and employee engagement.

Business Scope includes feedback collection management, survey design and deployment, response tracking and analysis, sentiment analysis, feedback aggregation and reporting, action planning and follow-up, integration with performance management, anonymous feedback handling, and comprehensive analytics for organizational insights and improvement initiatives.

## 7.4.2 Feedback Collection Master Schema

```sql
Table: feedback_campaign
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- campaign_code: VARCHAR(50) (Required, Unique, Indexed)
- campaign_name: VARCHAR(200) (Required)
- campaign_type: ENUM('Annual Survey', 'Pulse Survey', '360-Degree Feedback', 'Onboarding Feedback', 'Exit Interview', 'Performance Feedback', 'Culture Assessment', 'Satisfaction Survey')
- campaign_category: ENUM('Employee Engagement', 'Performance Management', 'Culture & Values', 'Leadership', 'Work Environment', 'Benefits & Compensation', 'Learning & Development')
- campaign_description: TEXT (Required)
- campaign_objectives: JSON (Specific goals and success criteria)
- target_audience: JSON (Target employee groups and demographics)
- collection_method: ENUM('Online Survey', 'Mobile App', 'Email', 'In-Person', 'Focus Group', 'Interview')
- anonymity_level: ENUM('Fully Anonymous', 'Partially Anonymous', 'Identified', 'Mixed')
- response_format: ENUM('Multiple Choice', 'Rating Scale', 'Open Text', 'Mixed Format')
- start_date: DATE (Required)
- end_date: DATE (Required)
- reminder_schedule: JSON (Automated reminder configuration)
- incentive_offered: BOOLEAN (Default: FALSE)
- incentive_details: JSON (Incentive type and value)
- expected_response_rate: DECIMAL(5,2) (Default: 75.00)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_feedback_campaign_company_code (company_id, campaign_code)
- INDEX idx_company_id (company_id)
- INDEX idx_campaign_type (campaign_type)
- INDEX idx_campaign_category (campaign_category)
- INDEX idx_collection_method (collection_method)
- INDEX idx_anonymity_level (anonymity_level)
- INDEX idx_start_date (start_date)
- INDEX idx_end_date (end_date)
- INDEX idx_is_active (is_active)

Constraints:
- fk_feedback_campaign_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_campaign_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_feedback_campaign_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_date_order CHECK (end_date >= start_date)
- chk_response_rate_range CHECK (expected_response_rate BETWEEN 0 AND 100)
```

```sql
Table: feedback_question
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- campaign_id: UUID (Foreign Key to feedback_campaign)
- question_code: VARCHAR(50) (Required, Indexed)
- question_text: TEXT (Required)
- question_type: ENUM('Multiple Choice Single', 'Multiple Choice Multiple', 'Rating Scale 1-5', 'Rating Scale 1-10', 'Likert Scale', 'Open Text', 'Yes/No', 'Ranking', 'Matrix')
- question_category: VARCHAR(100)
- response_required: BOOLEAN (Default: TRUE)
- display_order: INTEGER (Required)
- conditional_logic: JSON (Conditional display rules)
- validation_rules: JSON (Response validation requirements)
- scoring_enabled: BOOLEAN (Default: FALSE)
- scoring_weight: DECIMAL(5,2) (Default: 1.00)
- benchmark_comparison: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_campaign_id (campaign_id)
- INDEX idx_question_code (question_code)
- INDEX idx_question_type (question_type)
- INDEX idx_question_category (question_category)
- INDEX idx_display_order (display_order)
- INDEX idx_is_active (is_active)

Constraints:
- fk_feedback_question_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_question_campaign FOREIGN KEY (campaign_id) REFERENCES feedback_campaign(id)
- fk_feedback_question_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_feedback_question_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_display_order_positive CHECK (display_order > 0)
- chk_scoring_weight_positive CHECK (scoring_weight > 0)
```

## 7.4.3 Response Collection & Management Schema

```sql
Table: feedback_response
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- campaign_id: UUID (Foreign Key to feedback_campaign)
- respondent_id: UUID (Foreign Key to employee)
- response_token: VARCHAR(200) (Unique, Indexed)
- response_status: ENUM('Invited', 'Started', 'In Progress', 'Completed', 'Partially Completed', 'Expired')
- start_time: TIMESTAMP
- completion_time: TIMESTAMP
- time_spent_minutes: INTEGER
- device_type: ENUM('Desktop', 'Mobile', 'Tablet', 'Unknown')
- browser_info: VARCHAR(200)
- ip_address: VARCHAR(45)
- location_data: JSON (Geographic and location information)
- anonymity_level: ENUM('Fully Anonymous', 'Partially Anonymous', 'Identified')
- response_quality_score: DECIMAL(5,2) (Check: 1.00 TO 5.00)
- completion_percentage: DECIMAL(5,2) (Default: 0.00)
- incentive_claimed: BOOLEAN (Default: FALSE)
- follow_up_required: BOOLEAN (Default: FALSE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_campaign_id (campaign_id)
- INDEX idx_respondent_id (respondent_id)
- INDEX idx_response_token (response_token)
- INDEX idx_response_status (response_status)
- INDEX idx_start_time (start_time)
- INDEX idx_completion_time (completion_time)
- INDEX idx_anonymity_level (anonymity_level)
- INDEX idx_response_quality_score (response_quality_score)

Constraints:
- fk_feedback_response_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_response_campaign FOREIGN KEY (campaign_id) REFERENCES feedback_campaign(id)
- fk_feedback_response_respondent FOREIGN KEY (respondent_id) REFERENCES employee(id)
- chk_time_spent_positive CHECK (time_spent_minutes >= 0)
- chk_completion_range CHECK (completion_percentage BETWEEN 0 AND 100)
```

```sql
Table: feedback_answer
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- response_id: UUID (Foreign Key to feedback_response)
- question_id: UUID (Foreign Key to feedback_question)
- answer_value: TEXT (Required)
- answer_type: ENUM('Text', 'Number', 'Rating', 'Boolean', 'JSON Array', 'JSON Object')
- numeric_value: DECIMAL(10,2)
- rating_value: INTEGER
- is_skipped: BOOLEAN (Default: FALSE)
- skip_reason: VARCHAR(200)
- response_time_seconds: INTEGER
- confidence_level: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- sentiment_score: DECIMAL(5,2) (Check: -1.00 TO 1.00)
- emotion_detected: VARCHAR(50)
- keywords_extracted: JSON (Key terms and phrases)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_response_id (response_id)
- INDEX idx_question_id (question_id)
- INDEX idx_answer_type (answer_type)
- INDEX idx_numeric_value (numeric_value)
- INDEX idx_rating_value (rating_value)
- INDEX idx_is_skipped (is_skipped)
- INDEX idx_sentiment_score (sentiment_score)
- INDEX idx_emotion_detected (emotion_detected)

Constraints:
- fk_feedback_answer_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_answer_response FOREIGN KEY (response_id) REFERENCES feedback_response(id)
- fk_feedback_answer_question FOREIGN KEY (question_id) REFERENCES feedback_question(id)
- chk_response_time_positive CHECK (response_time_seconds >= 0)
- chk_confidence_range CHECK (confidence_level BETWEEN 0 AND 1)
- chk_sentiment_range CHECK (sentiment_score BETWEEN -1 AND 1)
```

## 7.4.5 Analytics & Insights Schema

```sql
Table: feedback_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- campaign_id: UUID (Foreign Key to feedback_campaign)
- analysis_type: ENUM('Response Rate', 'Completion Rate', 'Satisfaction Score', 'Engagement Level', 'Sentiment Analysis', 'Trend Analysis', 'Demographic Breakdown', 'Comparative Analysis')
- metric_name: VARCHAR(100) (Required)
- metric_value: DECIMAL(15,2) (Required)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- target_value: DECIMAL(15,2)
- achievement_percentage: DECIMAL(5,2)
- analysis_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Campaign', 'Year to Date')
- analysis_date: DATE (Required)
- demographic_filter: JSON (Demographic segmentation applied)
- department_id: UUID (Foreign Key to department)
- team_id: UUID (Foreign Key to team)
- sample_size: INTEGER (Default: 0)
- confidence_level: DECIMAL(3,2) (Default: 0.95)
- margin_of_error: DECIMAL(5,2)
- statistical_significance: BOOLEAN (Default: FALSE)
- additional_metrics: JSON (Supporting metrics and breakdowns)
- data_quality_score: DECIMAL(3,2) (Check: 1.00 TO 5.00)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_campaign_id (campaign_id)
- INDEX idx_analysis_type (analysis_type)
- INDEX idx_metric_name (metric_name)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_department_id (department_id)
- INDEX idx_team_id (team_id)
- INDEX idx_statistical_significance (statistical_significance)

Constraints:
- fk_feedback_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_analytics_campaign FOREIGN KEY (campaign_id) REFERENCES feedback_campaign(id)
- fk_feedback_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_feedback_analytics_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_feedback_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
- chk_sample_size_positive CHECK (sample_size >= 0)
- chk_confidence_range CHECK (confidence_level BETWEEN 0 AND 1)
- chk_achievement_range CHECK (achievement_percentage BETWEEN 0 AND 100)
- chk_data_quality_range CHECK (data_quality_score BETWEEN 1 AND 5)
```

```sql
Table: feedback_sentiment_analysis
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- campaign_id: UUID (Foreign Key to feedback_campaign)
- response_id: UUID (Foreign Key to feedback_response)
- text_content: TEXT (Required)
- overall_sentiment: ENUM('Positive', 'Negative', 'Neutral', 'Mixed')
- sentiment_score: DECIMAL(5,2) (Check: -1.00 TO 1.00)
- confidence_score: DECIMAL(3,2) (Check: 0.00 TO 1.00)
- emotions_detected: JSON (Array of emotions with scores)
- key_phrases: JSON (Extracted key phrases and topics)
- entities_mentioned: JSON (Named entities and their types)
- themes_identified: JSON (Primary themes and categories)
- urgency_level: ENUM('Low', 'Medium', 'High', 'Critical')
- action_required: BOOLEAN (Default: FALSE)
- escalation_needed: BOOLEAN (Default: FALSE)
- analysis_model_version: VARCHAR(20)
- processing_time_ms: INTEGER
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_campaign_id (campaign_id)
- INDEX idx_response_id (response_id)
- INDEX idx_overall_sentiment (overall_sentiment)
- INDEX idx_sentiment_score (sentiment_score)
- INDEX idx_urgency_level (urgency_level)
- INDEX idx_action_required (action_required)
- INDEX idx_escalation_needed (escalation_needed)

Constraints:
- fk_feedback_sentiment_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_sentiment_campaign FOREIGN KEY (campaign_id) REFERENCES feedback_campaign(id)
- fk_feedback_sentiment_response FOREIGN KEY (response_id) REFERENCES feedback_response(id)
- chk_sentiment_range CHECK (sentiment_score BETWEEN -1 AND 1)
- chk_confidence_range CHECK (confidence_score BETWEEN 0 AND 1)
- chk_processing_time_positive CHECK (processing_time_ms >= 0)
```

## 7.4.6 Action Planning & Follow-up Schema

```sql
Table: feedback_action_plan
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- campaign_id: UUID (Foreign Key to feedback_campaign)
- action_plan_code: VARCHAR(50) (Required, Unique, Indexed)
- action_plan_name: VARCHAR(200) (Required)
- action_category: ENUM('Leadership Development', 'Process Improvement', 'Policy Change', 'Communication Enhancement', 'Training Program', 'Work Environment', 'Benefits & Compensation', 'Culture Initiative')
- priority_level: ENUM('Critical', 'High', 'Medium', 'Low')
- action_description: TEXT (Required)
- business_justification: TEXT
- success_metrics: JSON (Measurable success criteria)
- target_completion_date: DATE (Required)
- actual_completion_date: DATE
- status: ENUM('Draft', 'Proposed', 'Approved', 'In Progress', 'Completed', 'On Hold', 'Cancelled')
- owner_id: UUID (Foreign Key to employee)
- department_id: UUID (Foreign Key to department)
- budget_allocated: DECIMAL(15,2)
- budget_spent: DECIMAL(15,2) (Default: 0.00)
- stakeholder_ids: JSON (Array of stakeholder user IDs)
- dependencies: JSON (Dependencies on other actions)
- risk_assessment: JSON (Potential risks and mitigation)
- progress_percentage: DECIMAL(5,2) (Default: 0.00)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_feedback_action_plan_company_code (company_id, action_plan_code)
- INDEX idx_company_id (company_id)
- INDEX idx_campaign_id (campaign_id)
- INDEX idx_action_category (action_category)
- INDEX idx_priority_level (priority_level)
- INDEX idx_status (status)
- INDEX idx_owner_id (owner_id)
- INDEX idx_department_id (department_id)
- INDEX idx_target_completion_date (target_completion_date)
- INDEX idx_progress_percentage (progress_percentage)

Constraints:
- fk_feedback_action_plan_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_action_plan_campaign FOREIGN KEY (campaign_id) REFERENCES feedback_campaign(id)
- fk_feedback_action_plan_owner FOREIGN KEY (owner_id) REFERENCES employee(id)
- fk_feedback_action_plan_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_feedback_action_plan_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_feedback_action_plan_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_budget_positive CHECK (budget_allocated >= 0 AND budget_spent >= 0)
- chk_progress_range CHECK (progress_percentage BETWEEN 0 AND 100)
```

```sql
Table: feedback_action_task
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action_plan_id: UUID (Foreign Key to feedback_action_plan)
- task_name: VARCHAR(200) (Required)
- task_description: TEXT (Required)
- task_type: ENUM('Research', 'Analysis', 'Planning', 'Implementation', 'Communication', 'Training', 'Review', 'Reporting')
- priority_level: ENUM('Critical', 'High', 'Medium', 'Low')
- assignee_id: UUID (Foreign Key to employee)
- reviewer_id: UUID (Foreign Key to employee)
- due_date: DATE (Required)
- completion_date: DATE
- status: ENUM('Not Started', 'In Progress', 'Completed', 'Blocked', 'Cancelled')
- estimated_hours: DECIMAL(8,2)
- actual_hours: DECIMAL(8,2) (Default: 0.00)
- completion_percentage: DECIMAL(5,2) (Default: 0.00)
- dependencies: JSON (Task dependencies)
- deliverables: JSON (Expected deliverables and outputs)
- resources_required: JSON (Resources needed for completion)
- blockers: JSON (Current blockers and issues)
- notes: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action_plan_id (action_plan_id)
- INDEX idx_task_type (task_type)
- INDEX idx_priority_level (priority_level)
- INDEX idx_assignee_id (assignee_id)
- INDEX idx_reviewer_id (reviewer_id)
- INDEX idx_due_date (due_date)
- INDEX idx_status (status)
- INDEX idx_completion_percentage (completion_percentage)

Constraints:
- fk_feedback_action_task_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_action_task_plan FOREIGN KEY (action_plan_id) REFERENCES feedback_action_plan(id)
- fk_feedback_action_task_assignee FOREIGN KEY (assignee_id) REFERENCES employee(id)
- fk_feedback_action_task_reviewer FOREIGN KEY (reviewer_id) REFERENCES employee(id)
- fk_feedback_action_task_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_feedback_action_task_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_hours_positive CHECK (estimated_hours >= 0 AND actual_hours >= 0)
- chk_completion_range CHECK (completion_percentage BETWEEN 0 AND 100)
```

## 7.4.7 Integration & Communication Schema

```sql
Table: feedback_integration
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- integration_type: ENUM('HRIS', 'Performance Management', 'Learning Management', 'Payroll', 'Communication Platform', 'Analytics Platform', 'External Survey Tool')
- external_system: VARCHAR(100) (Required)
- external_system_id: VARCHAR(200) (Required)
- integration_name: VARCHAR(200) (Required)
- integration_description: TEXT
- endpoint_url: VARCHAR(500)
- authentication_method: ENUM('API Key', 'OAuth 2.0', 'Basic Auth', 'Certificate', 'SAML')
- authentication_config: JSON (Encrypted authentication credentials)
- sync_frequency: ENUM('Real-time', 'Hourly', 'Daily', 'Weekly', 'On-demand')
- sync_direction: ENUM('Bidirectional', 'Inbound', 'Outbound')
- data_mapping: JSON (Field mapping configuration)
- sync_status: ENUM('Active', 'Inactive', 'Error', 'Paused', 'Testing')
- last_sync_at: TIMESTAMP
- next_sync_at: TIMESTAMP
- error_count: INTEGER (Default: 0)
- max_retry_attempts: INTEGER (Default: 3)
- retry_delay_minutes: INTEGER (Default: 60)
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_integration_type (integration_type)
- INDEX idx_external_system (external_system)
- INDEX idx_external_system_id (external_system_id)
- INDEX idx_sync_status (sync_status)
- INDEX idx_sync_frequency (sync_frequency)
- INDEX idx_last_sync_at (last_sync_at)
- INDEX idx_next_sync_at (next_sync_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_feedback_integration_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_integration_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retry_positive CHECK (max_retry_attempts >= 0 AND retry_delay_minutes >= 0)
```

```sql
Table: feedback_communication
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- campaign_id: UUID (Foreign Key to feedback_campaign)
- communication_type: ENUM('Invitation', 'Reminder', 'Thank You', 'Results Summary', 'Action Plan Update', 'Follow-up Survey', 'Announcement')
- recipient_type: ENUM('All Participants', 'Completed Participants', 'Pending Participants', 'Department Heads', 'Leadership Team', 'Custom Group')
- recipient_ids: JSON (Specific recipient user IDs)
- subject: VARCHAR(500) (Required)
- message_body: TEXT (Required)
- communication_channel: ENUM('Email', 'SMS', 'In-App', 'Push Notification', 'Slack', 'Teams', 'Portal Banner')
- template_id: UUID (Foreign Key to communication_template)
- send_status: ENUM('Draft', 'Scheduled', 'Sending', 'Sent', 'Delivered', 'Failed', 'Cancelled')
- scheduled_at: TIMESTAMP
- sent_at: TIMESTAMP
- delivery_rate: DECIMAL(5,2) (Default: 0.00)
- open_rate: DECIMAL(5,2) (Default: 0.00)
- click_rate: DECIMAL(5,2) (Default: 0.00)
- bounce_count: INTEGER (Default: 0)
- unsubscribe_count: INTEGER (Default: 0)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_campaign_id (campaign_id)
- INDEX idx_communication_type (communication_type)
- INDEX idx_recipient_type (recipient_type)
- INDEX idx_communication_channel (communication_channel)
- INDEX idx_template_id (template_id)
- INDEX idx_send_status (send_status)
- INDEX idx_scheduled_at (scheduled_at)
- INDEX idx_sent_at (sent_at)

Constraints:
- fk_feedback_communication_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_communication_campaign FOREIGN KEY (campaign_id) REFERENCES feedback_campaign(id)
- fk_feedback_communication_template FOREIGN KEY (template_id) REFERENCES communication_template(id)
- fk_feedback_communication_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_rate_ranges CHECK (delivery_rate BETWEEN 0 AND 100 AND open_rate BETWEEN 0 AND 100 AND click_rate BETWEEN 0 AND 100)
- chk_counts_positive CHECK (bounce_count >= 0 AND unsubscribe_count >= 0)
```

## 7.4.8 Security & Privacy Schema

```sql
Table: feedback_privacy_settings
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- setting_name: VARCHAR(200) (Required)
- setting_type: ENUM('Data Retention', 'Anonymity', 'Access Control', 'Encryption', 'Consent Management', 'Data Masking')
- privacy_level: ENUM('Basic', 'Standard', 'Enhanced', 'Maximum')
- configuration: JSON (Privacy configuration parameters)
- data_retention_days: INTEGER (Default: 2555)
- anonymization_enabled: BOOLEAN (Default: TRUE)
- encryption_at_rest: BOOLEAN (Default: TRUE)
- encryption_in_transit: BOOLEAN (Default: TRUE)
- consent_required: BOOLEAN (Default: TRUE)
- consent_text: TEXT
- data_masking_rules: JSON (Field-level masking rules)
- access_log_retention_days: INTEGER (Default: 1095)
- gdpr_compliant: BOOLEAN (Default: TRUE)
- ccpa_compliant: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_setting_type (setting_type)
- INDEX idx_privacy_level (privacy_level)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_feedback_privacy_settings_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_privacy_settings_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_feedback_privacy_settings_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (data_retention_days > 0 AND access_log_retention_days > 0)
- chk_effective_order CHECK (effective_to IS NULL OR effective_to >= effective_from)
```

```sql
Table: feedback_access_control
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- user_id: UUID (Foreign Key to user)
- role_id: UUID (Foreign Key to role)
- access_scope: ENUM('All Campaigns', 'Department Campaigns', 'Team Campaigns', 'Own Campaigns', 'Specific Campaigns')
- campaign_ids: JSON (Array of specific campaign IDs)
- permission_level: ENUM('Read Only', 'Create', 'Edit', 'Delete', 'Admin', 'Full Access')
- data_access_level: ENUM('Aggregated Only', 'Anonymized', 'Partially Identified', 'Fully Identified')
- can_view_responses: BOOLEAN (Default: FALSE)
- can_export_data: BOOLEAN (Default: FALSE)
- can_view_analytics: BOOLEAN (Default: TRUE)
- can_manage_actions: BOOLEAN (Default: FALSE)
- ip_restriction: JSON (IP address restrictions)
- time_restriction: JSON (Time-based access restrictions)
- granted_by_user_id: UUID (Foreign Key to user)
- granted_at: TIMESTAMP (Auto)
- expires_at: DATE
- is_active: BOOLEAN (Default: TRUE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_role_id (role_id)
- INDEX idx_access_scope (access_scope)
- INDEX idx_permission_level (permission_level)
- INDEX idx_data_access_level (data_access_level)
- INDEX idx_granted_by_user_id (granted_by_user_id)
- INDEX idx_expires_at (expires_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_feedback_access_control_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_access_control_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_feedback_access_control_role FOREIGN KEY (role_id) REFERENCES role(id)
- fk_feedback_access_control_granted_by FOREIGN KEY (granted_by_user_id) REFERENCES user(id)
- chk_expires_future CHECK (expires_at IS NULL OR expires_at >= granted_at)
```

## 7.4.9 Audit & Compliance Schema

```sql
Table: feedback_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'View', 'Export', 'Share', 'Archive', 'Restore')
- entity_type: ENUM('Campaign', 'Question', 'Response', 'Answer', 'Action Plan', 'Analytics', 'Report')
- entity_id: UUID
- old_values: JSON (Previous values before change)
- new_values: JSON (New values after change)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- affected_records: INTEGER (Default: 0)
- data_sensitivity: ENUM('Public', 'Internal', 'Confidential', 'Sensitive', 'Restricted')
- compliance_impact: ENUM('None', 'Low', 'Medium', 'High', 'Critical')
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_entity_id (entity_id)
- INDEX idx_performed_by_user_id (performed_by_user_id)
- INDEX idx_data_sensitivity (data_sensitivity)
- INDEX idx_compliance_impact (compliance_impact)
- INDEX idx_timestamp (timestamp)

Constraints:
- fk_feedback_audit_log_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_audit_log_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
- chk_affected_records_positive CHECK (affected_records >= 0)
```

```sql
Table: feedback_compliance_report
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- report_type: ENUM('GDPR Data Processing', 'CCPA Privacy Rights', 'Data Retention', 'Access Log', 'Security Audit', 'Consent Management')
- report_period_start: DATE (Required)
- report_period_end: DATE (Required)
- compliance_framework: ENUM('GDPR', 'CCPA', 'HIPAA', 'SOX', 'ISO 27001', 'Internal Policy')
- compliance_status: ENUM('Compliant', 'Non-Compliant', 'Partially Compliant', 'Under Review', 'Remediation Required')
- compliance_score: DECIMAL(5,2) (Default: 0.00)
- findings_count: INTEGER (Default: 0)
- critical_findings: INTEGER (Default: 0)
- high_findings: INTEGER (Default: 0)
- medium_findings: INTEGER (Default: 0)
- low_findings: INTEGER (Default: 0)
- remediation_actions: JSON (Required remediation actions)
- remediation_due_date: DATE
- report_data: JSON (Detailed compliance data and metrics)
- evidence_documents: JSON (Links to evidence documents)
- reviewed_by_user_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- generated_at: TIMESTAMP (Auto)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_report_type (report_type)
- INDEX idx_compliance_framework (compliance_framework)
- INDEX idx_compliance_status (compliance_status)
- INDEX idx_report_period_start (report_period_start)
- INDEX idx_report_period_end (report_period_end)
- INDEX idx_compliance_score (compliance_score)

Constraints:
- fk_feedback_compliance_report_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_compliance_report_reviewed_by FOREIGN KEY (reviewed_by_user_id) REFERENCES user(id)
- fk_feedback_compliance_report_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- chk_period_order CHECK (report_period_end >= report_period_start)
- chk_score_range CHECK (compliance_score BETWEEN 0 AND 100)
- chk_findings_positive CHECK (findings_count >= 0 AND critical_findings >= 0 AND high_findings >= 0 AND medium_findings >= 0 AND low_findings >= 0)
```

## 7.4.10 Mobile & API Access Schema

```sql
Table: feedback_mobile_app
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- app_version: VARCHAR(20) (Required)
- platform: ENUM('iOS', 'Android', 'Web', 'Hybrid')
- build_number: VARCHAR(20) (Required)
- release_date: DATE (Required)
- is_current: BOOLEAN (Default: FALSE)
- is_mandatory: BOOLEAN (Default: FALSE)
- min_supported_version: VARCHAR(20)
- features_enabled: JSON (Feature flags and capabilities)
- offline_capabilities: JSON (Offline functionality support)
- security_config: JSON (Mobile security settings)
- push_notification_enabled: BOOLEAN (Default: TRUE)
- biometric_auth_enabled: BOOLEAN (Default: FALSE)
- data_sync_frequency: ENUM('Real-time', 'Every 5 minutes', 'Every 15 minutes', 'Every 30 minutes', 'Hourly')
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_app_version (app_version)
- INDEX idx_platform (platform)
- INDEX idx_is_current (is_current)
- INDEX idx_is_mandatory (is_mandatory)
- INDEX idx_release_date (release_date)

Constraints:
- fk_feedback_mobile_app_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_mobile_app_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

```sql
Table: feedback_api_access
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- api_key: VARCHAR(200) (Required, Unique, Indexed)
- api_name: VARCHAR(200) (Required)
- api_description: TEXT
- api_version: VARCHAR(20) (Default: 'v1')
- endpoint_url: VARCHAR(500) (Required)
- authentication_type: ENUM('API Key', 'OAuth 2.0', 'JWT', 'Basic Auth')
- rate_limit_per_hour: INTEGER (Default: 1000)
- rate_limit_per_day: INTEGER (Default: 10000)
- allowed_methods: JSON (HTTP methods allowed)
- allowed_endpoints: JSON (Specific endpoints allowed)
- data_access_level: ENUM('Aggregated Only', 'Anonymized', 'Partially Identified', 'Fully Identified')
- ip_whitelist: JSON (Allowed IP addresses)
- webhook_url: VARCHAR(500)
- webhook_events: JSON (Events that trigger webhooks)
- is_active: BOOLEAN (Default: TRUE)
- is_internal: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- last_used_at: TIMESTAMP
- usage_count: INTEGER (Default: 0)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_api_key (api_key)
- INDEX idx_api_version (api_version)
- INDEX idx_data_access_level (data_access_level)
- INDEX idx_is_active (is_active)
- INDEX idx_is_internal (is_internal)
- INDEX idx_last_used_at (last_used_at)
- INDEX idx_usage_count (usage_count)

Constraints:
- fk_feedback_api_access_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_api_access_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_rate_limits_positive CHECK (rate_limit_per_hour > 0 AND rate_limit_per_day > 0)
- chk_usage_positive CHECK (usage_count >= 0)
```

## 7.4.11 Workflow & Process Automation Schema

```sql
Table: feedback_workflow_definition
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_name: VARCHAR(200) (Required)
- workflow_type: ENUM('Campaign Approval', 'Response Review', 'Action Plan Approval', 'Compliance Check', 'Data Export', 'Report Generation')
- workflow_category: ENUM('Standard', 'Emergency', 'High Priority', 'Executive', 'Automated')
- trigger_event: ENUM('Campaign Created', 'Response Submitted', 'Action Plan Created', 'Compliance Alert', 'Scheduled Review', 'Manual Trigger')
- workflow_steps: JSON (Ordered workflow steps and configurations)
- approval_levels: JSON (Multi-level approval requirements)
- escalation_rules: JSON (Escalation conditions and paths)
- timeout_settings: JSON (Step timeout and reminder settings)
- notification_rules: JSON (Notification triggers and recipients)
- is_active: BOOLEAN (Default: TRUE)
- version: INTEGER (Default: 1)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_type (workflow_type)
- INDEX idx_workflow_category (workflow_category)
- INDEX idx_trigger_event (trigger_event)
- INDEX idx_is_active (is_active)
- INDEX idx_version (version)

Constraints:
- fk_feedback_workflow_definition_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_workflow_definition_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_feedback_workflow_definition_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (version > 0)
```

```sql
Table: feedback_workflow_instance
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_definition_id: UUID (Foreign Key to feedback_workflow_definition)
- campaign_id: UUID (Foreign Key to feedback_campaign)
- instance_name: VARCHAR(200) (Required)
- current_step: INTEGER (Default: 1)
- workflow_status: ENUM('Initiated', 'In Progress', 'Pending Approval', 'Approved', 'Rejected', 'Completed', 'Cancelled', 'Escalated')
- priority_level: ENUM('Low', 'Normal', 'High', 'Critical', 'Emergency')
- initiated_by_user_id: UUID (Foreign Key to user)
- current_assignee_id: UUID (Foreign Key to user)
- started_at: TIMESTAMP (Auto)
- due_date: TIMESTAMP
- completed_at: TIMESTAMP
- workflow_data: JSON (Workflow-specific data and context)
- step_history: JSON (History of completed steps)
- comments: TEXT
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_definition_id (workflow_definition_id)
- INDEX idx_campaign_id (campaign_id)
- INDEX idx_workflow_status (workflow_status)
- INDEX idx_priority_level (priority_level)
- INDEX idx_initiated_by_user_id (initiated_by_user_id)
- INDEX idx_current_assignee_id (current_assignee_id)
- INDEX idx_started_at (started_at)
- INDEX idx_due_date (due_date)

Constraints:
- fk_feedback_workflow_instance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_workflow_instance_definition FOREIGN KEY (workflow_definition_id) REFERENCES feedback_workflow_definition(id)
- fk_feedback_workflow_instance_campaign FOREIGN KEY (campaign_id) REFERENCES feedback_campaign(id)
- fk_feedback_workflow_instance_initiated_by FOREIGN KEY (initiated_by_user_id) REFERENCES user(id)
- fk_feedback_workflow_instance_current_assignee FOREIGN KEY (current_assignee_id) REFERENCES user(id)
- chk_step_positive CHECK (current_step > 0)
```

## 7.4.13 Data Archiving & Retention Schema

```sql
Table: feedback_archival_policy
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- policy_name: VARCHAR(200) (Required)
- entity_type: ENUM('Campaign', 'Response', 'Answer', 'Analytics', 'Action Plan', 'Audit Log', 'Communication')
- retention_period_years: INTEGER (Required)
- archival_trigger: ENUM('Age Based', 'Event Based', 'Manual', 'Scheduled', 'Campaign Completion')
- archival_condition: JSON (Conditions for archival)
- storage_location: ENUM('Cold Storage', 'Archive Database', 'File System', 'Cloud Archive')
- compression_enabled: BOOLEAN (Default: TRUE)
- encryption_enabled: BOOLEAN (Default: TRUE)
- access_restriction: ENUM('No Access', 'Read Only', 'Admin Only', 'Compliance Only', 'Legal Only')
- retention_after_archive_years: INTEGER (Default: 7)
- auto_delete_after_retention: BOOLEAN (Default: FALSE)
- gdpr_anonymization: BOOLEAN (Default: TRUE)
- anonymization_method: ENUM('Full Hash', 'Partial Mask', 'Tokenization', 'Pseudonymization')
- is_active: BOOLEAN (Default: TRUE)
- last_run_date: DATE
- next_run_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_entity_type (entity_type)
- INDEX idx_archival_trigger (archival_trigger)
- INDEX idx_storage_location (storage_location)
- INDEX idx_access_restriction (access_restriction)
- INDEX idx_is_active (is_active)
- INDEX idx_last_run_date (last_run_date)
- INDEX idx_next_run_date (next_run_date)

Constraints:
- fk_feedback_archival_policy_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_archival_policy_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_feedback_archival_policy_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (retention_period_years > 0 AND retention_after_archive_years >= 0)
```

```sql
Table: feedback_archived_data
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- archival_policy_id: UUID (Foreign Key to feedback_archival_policy)
- original_table_name: VARCHAR(100) (Required)
- original_record_id: UUID (Required)
- entity_type: ENUM('Campaign', 'Response', 'Answer', 'Analytics', 'Action Plan', 'Audit Log', 'Communication')
- archived_data: JSON (Complete archived record data)
- archive_date: DATE (Required)
- archive_reason: VARCHAR(200)
- storage_path: VARCHAR(500)
- file_size_bytes: BIGINT
- checksum_hash: VARCHAR(256)
- compression_ratio: DECIMAL(5,2)
- anonymization_applied: BOOLEAN (Default: FALSE)
- anonymization_fields: JSON (Fields that were anonymized)
- access_count: INTEGER (Default: 0)
- last_accessed_at: TIMESTAMP
- access_log: JSON (Log of all access attempts)
- scheduled_deletion_date: DATE
- is_deleted: BOOLEAN (Default: FALSE)
- deleted_at: TIMESTAMP
- deletion_reason: VARCHAR(200)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_archival_policy_id (archival_policy_id)
- INDEX idx_original_table_name (original_table_name)
- INDEX idx_original_record_id (original_record_id)
- INDEX idx_entity_type (entity_type)
- INDEX idx_archive_date (archive_date)
- INDEX idx_scheduled_deletion_date (scheduled_deletion_date)
- INDEX idx_is_deleted (is_deleted)
- INDEX idx_anonymization_applied (anonymization_applied)

Constraints:
- fk_feedback_archived_data_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_feedback_archived_data_policy FOREIGN KEY (archival_policy_id) REFERENCES feedback_archival_policy(id)
- fk_feedback_archived_data_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_file_size_positive CHECK (file_size_bytes >= 0)
- chk_access_positive CHECK (access_count >= 0)
- chk_compression_range CHECK (compression_ratio BETWEEN 0 AND 1)
```

--- END OF SECTION 7.4.13 ---
