# 2.2 Candidate Management

## 2.2.1 Business Purpose

Candidate Management provides a comprehensive system for tracking, evaluating, and managing job applicants throughout the recruitment lifecycle. It enables efficient candidate sourcing, resume parsing, skill assessment, communication tracking, and collaborative evaluation while maintaining candidate relationships and ensuring compliance with recruitment regulations and data privacy requirements.

## 2.2.2 Business Scope

Enable end-to-end candidate management including resume parsing and storage, candidate tracking system (ATS), communication history management, interview feedback collection, assessment results tracking, talent pool development, and integration with job requisitions. The system supports automated screening, AI-powered matching, collaborative evaluation, and comprehensive reporting while ensuring candidate experience and data security.

## 2.2.3 Candidate Master Schema

```
Table: candidate
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- candidate_number: VARCHAR(50) (Unique, Indexed)
- first_name: VARCHAR(100) (Required)
- middle_name: VARCHAR(100)
- last_name: VARCHAR(100) (Required)
- display_name: VARCHAR(200) (Computed)
- email: VARCHAR(200) (Required, Indexed)
- phone: VARCHAR(50)
- mobile: VARCHAR(50)
- address_id: UUID (Foreign Key to address)
- date_of_birth: DATE
- gender: ENUM('Male', 'Female', 'Other', 'Prefer not to say')
- nationality: VARCHAR(100)
- work_authorization: ENUM('Citizen', 'Permanent Resident', 'Work Permit', 'Student Visa', 'H1B', 'Other')
- visa_status: VARCHAR(100)
- visa_expiry_date: DATE
- linkedin_url: VARCHAR(500)
- portfolio_url: VARCHAR(500)
- github_url: VARCHAR(500)
- current_employer: VARCHAR(200)
- current_position: VARCHAR(200)
- experience_years: INTEGER
- expected_salary: DECIMAL(15,2)
- salary_currency: VARCHAR(10) (Default: 'USD')
- notice_period_days: INTEGER
- availability_date: DATE
- source: ENUM('Company Website', 'Job Board', 'LinkedIn', 'Referral', 'Agency', 'Campus', 'Walk-in', 'Social Media')
- source_details: VARCHAR(200)
- referred_by_employee_id: UUID (Foreign Key to employee)
- status: ENUM('New', 'Screening', 'In Review', 'Interview', 'Offer', 'Rejected', 'Withdrawn', 'Hired', 'On Hold')
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- created_by_user_id: UUID (Foreign Key to user)
- assigned_recruiter_id: UUID (Foreign Key to user)
- assigned_coordinator_id: UUID (Foreign Key to user)
- tags: JSON (Array of tags)
- notes: TEXT
- is_active: BOOLEAN (Default: TRUE)
- consent_to_contact: BOOLEAN (Default: TRUE)
- gdpr_consent: BOOLEAN (Default: FALSE)
- data_retention_date: DATE
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_candidate_number (candidate_number)
- INDEX idx_company_id (company_id)
- INDEX idx_email (email)
- INDEX idx_first_name (first_name)
- INDEX idx_last_name (last_name)
- INDEX idx_status (status)
- INDEX idx_priority (priority)
- INDEX idx_source (source)
- INDEX idx_created_by (created_by_user_id)
- INDEX idx_assigned_recruiter (assigned_recruiter_id)
- INDEX idx_created_at (created_at)

Constraints:
- fk_candidate_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_candidate_address FOREIGN KEY (address_id) REFERENCES address(id)
- fk_candidate_referred_by FOREIGN KEY (referred_by_employee_id) REFERENCES employee(id)
- fk_candidate_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_candidate_assigned_recruiter FOREIGN KEY (assigned_recruiter_id) REFERENCES user(id)
- fk_candidate_assigned_coordinator FOREIGN KEY (assigned_coordinator_id) REFERENCES user(id)
- chk_experience_positive CHECK (experience_years >= 0)
- chk_notice_period_positive CHECK (notice_period_days >= 0)
```

## 2.2.4 Resume Management Schema

```
Table: candidate_resume
Fields:
- id: UUID (Primary Key)
- candidate_id: UUID (Foreign Key to candidate)
- file_name: VARCHAR(500) (Required)
- file_path: VARCHAR(1000) (Required)
- file_size: BIGINT (Required)
- file_type: VARCHAR(100) (Required)
- mime_type: VARCHAR(200) (Required)
- file_hash: VARCHAR(256) (Required, SHA-256)
- upload_date: TIMESTAMP (Auto)
- is_primary: BOOLEAN (Default: FALSE)
- is_parsed: BOOLEAN (Default: FALSE)
- parsed_data: JSON (Parsed resume content)
- skills_extracted: JSON (Array of skills)
- experience_extracted: JSON (Array of experience)
- education_extracted: JSON (Array of education)
- certifications_extracted: JSON (Array of certifications)
- parsing_confidence: DECIMAL(3,2)
- parsing_version: VARCHAR(50)
- uploaded_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_candidate_id (candidate_id)
- INDEX idx_is_primary (is_primary)
- INDEX idx_is_parsed (is_parsed)
- INDEX idx_upload_date (upload_date)
- INDEX idx_file_hash (file_hash)

Constraints:
- fk_resume_candidate FOREIGN KEY (candidate_id) REFERENCES candidate(id)
- fk_resume_uploaded_by FOREIGN KEY (uploaded_by_user_id) REFERENCES user(id)
- chk_file_size_positive CHECK (file_size > 0)
- chk_parsing_confidence_range CHECK (parsing_confidence BETWEEN 0 AND 1)
```

## 2.2.5 Candidate Application Schema

```
Table: candidate_application
Fields:
- id: UUID (Primary Key)
- candidate_id: UUID (Foreign Key to candidate)
- requisition_id: UUID (Foreign Key to job_requisition)
- application_number: VARCHAR(50) (Unique, Indexed)
- application_date: TIMESTAMP (Auto)
- source: ENUM('Company Website', 'Job Board', 'LinkedIn', 'Referral', 'Agency', 'Campus', 'Walk-in', 'Social Media')
- source_details: VARCHAR(200)
- referral_employee_id: UUID (Foreign Key to employee)
- status: ENUM('Applied', 'Screening', 'Phone Screen', 'Assessment', 'Interview', 'Final Interview', 'Offer', 'Rejected', 'Withdrawn', 'Hired')
- sub_status: VARCHAR(100)
- priority: ENUM('Low', 'Medium', 'High', 'Critical')
- stage: INTEGER (Default: 1)
- max_stage: INTEGER (Default: 5)
- applied_position: VARCHAR(200)
- expected_salary: DECIMAL(15,2)
- salary_currency: VARCHAR(10) (Default: 'USD')
- notice_period_days: INTEGER
- availability_date: DATE
- relocation_required: BOOLEAN (Default: FALSE)
- relocation_assistance: BOOLEAN (Default: FALSE)
- cover_letter: TEXT
- screening_notes: TEXT
- rejection_reason: VARCHAR(500)
- rejection_stage: VARCHAR(100)
- withdrawn_reason: TEXT
- assigned_recruiter_id: UUID (Foreign Key to user)
- assigned_coordinator_id: UUID (Foreign Key to user)
- hiring_manager_id: UUID (Foreign Key to employee)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_application_number (application_number)
- INDEX idx_candidate_id (candidate_id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_application_date (application_date)
- INDEX idx_status (status)
- INDEX idx_priority (priority)
- INDEX idx_stage (stage)
- INDEX idx_assigned_recruiter (assigned_recruiter_id)
- INDEX idx_hiring_manager (hiring_manager_id)

Constraints:
- fk_application_candidate FOREIGN KEY (candidate_id) REFERENCES candidate(id)
- fk_application_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_application_referral_employee FOREIGN KEY (referral_employee_id) REFERENCES employee(id)
- fk_application_assigned_recruiter FOREIGN KEY (assigned_recruiter_id) REFERENCES user(id)
- fk_application_assigned_coordinator FOREIGN KEY (assigned_coordinator_id) REFERENCES user(id)
- fk_application_hiring_manager FOREIGN KEY (hiring_manager_id) REFERENCES employee(id)
- fk_application_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_stage_range CHECK (stage BETWEEN 1 AND max_stage)
```

## 2.2.6 Interview Feedback Schema

```
Table: interview_feedback
Fields:
- id: UUID (Primary Key)
- application_id: UUID (Foreign Key to candidate_application)
- interview_id: UUID (Foreign Key to interview_schedule)
- interviewer_id: UUID (Foreign Key to user)
- interview_type: ENUM('Phone Screen', 'Technical', 'Behavioral', 'Panel', 'Final', 'Cultural Fit')
- interview_round: INTEGER
- overall_rating: INTEGER (1-5)
- recommendation: ENUM('Strong No', 'No', 'Maybe', 'Yes', 'Strong Yes')
- hire_recommendation: ENUM('Do Not Hire', 'Consider for Other Role', 'Hire', 'Strong Hire')
- technical_skills_rating: INTEGER (1-5)
- communication_skills_rating: INTEGER (1-5)
- problem_solving_rating: INTEGER (1-5)
- cultural_fit_rating: INTEGER (1-5)
- leadership_potential: INTEGER (1-5)
- strengths: TEXT
- weaknesses: TEXT
- feedback_comments: TEXT
- follow_up_required: BOOLEAN (Default: FALSE)
- follow_up_notes: TEXT
- feedback_date: TIMESTAMP (Auto)
- is_submitted: BOOLEAN (Default: FALSE)
- submitted_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_application_id (application_id)
- INDEX idx_interview_id (interview_id)
- INDEX idx_interviewer_id (interviewer_id)
- INDEX idx_interview_type (interview_type)
- INDEX idx_overall_rating (overall_rating)
- INDEX idx_recommendation (recommendation)
- INDEX idx_feedback_date (feedback_date)

Constraints:
- fk_feedback_application FOREIGN KEY (application_id) REFERENCES candidate_application(id)
- fk_feedback_interview FOREIGN KEY (interview_id) REFERENCES interview_schedule(id)
- fk_feedback_interviewer FOREIGN KEY (interviewer_id) REFERENCES user(id)
- chk_rating_range CHECK (overall_rating BETWEEN 1 AND 5)
- chk_technical_skills_range CHECK (technical_skills_rating BETWEEN 1 AND 5)
- chk_communication_skills_range CHECK (communication_skills_rating BETWEEN 1 AND 5)
- chk_problem_solving_range CHECK (problem_solving_rating BETWEEN 1 AND 5)
- chk_cultural_fit_range CHECK (cultural_fit_rating BETWEEN 1 AND 5)
- chk_leadership_potential_range CHECK (leadership_potential BETWEEN 1 AND 5)
```

## 2.2.7 Candidate Assessment Schema

```
Table: candidate_assessment
Fields:
- id: UUID (Primary Key)
- application_id: UUID (Foreign Key to candidate_application)
- assessment_type: ENUM('Technical Test', 'Aptitude Test', 'Personality Test', 'Psychometric Test', 'Coding Challenge', 'Case Study', 'Presentation')
- assessment_name: VARCHAR(200) (Required)
- assessment_provider: VARCHAR(200)
- assessment_url: VARCHAR(1000)
- instructions: TEXT
- duration_minutes: INTEGER
- max_score: DECIMAL(10,2)
- obtained_score: DECIMAL(10,2)
- percentage_score: DECIMAL(5,2)
- grade: ENUM('A+', 'A', 'B+', 'B', 'C+', 'C', 'D', 'F')
- status: ENUM('Not Started', 'In Progress', 'Completed', 'Expired', 'Failed')
- start_date: TIMESTAMP
- completion_date: TIMESTAMP
- expiry_date: TIMESTAMP
- assessment_data: JSON (Assessment responses and details)
- results_summary: TEXT
- evaluator_id: UUID (Foreign Key to user)
- evaluator_comments: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_application_id (application_id)
- INDEX idx_assessment_type (assessment_type)
- INDEX idx_status (status)
- INDEX idx_percentage_score (percentage_score)
- INDEX idx_grade (grade)
- INDEX idx_completion_date (completion_date)
- INDEX idx_evaluator_id (evaluator_id)

Constraints:
- fk_assessment_application FOREIGN KEY (application_id) REFERENCES candidate_application(id)
- fk_assessment_evaluator FOREIGN KEY (evaluator_id) REFERENCES user(id)
- fk_assessment_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_duration_positive CHECK (duration_minutes > 0)
- chk_score_range CHECK (obtained_score BETWEEN 0 AND max_score)
- chk_percentage_range CHECK (percentage_score BETWEEN 0 AND 100)
```

## 2.2.8 Talent Pool Schema

```
Table: talent_pool
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- pool_name: VARCHAR(200) (Required)
- pool_type: ENUM('General', 'Technical', 'Leadership', 'Diversity', 'Alumni', 'Intern', 'Executive', 'Specialized')
- description: TEXT
- department_id: UUID (Foreign Key to department)
- position_id: UUID (Foreign Key to position)
- skill_requirements: JSON (Array of required skills)
- experience_level: ENUM('Entry', 'Junior', 'Mid', 'Senior', 'Lead', 'Executive')
- location_preference: JSON (Array of preferred locations)
- salary_range_min: DECIMAL(15,2)
- salary_range_max: DECIMAL(15,2)
- currency_code: VARCHAR(10) (Default: 'USD')
- is_active: BOOLEAN (Default: TRUE)
- auto_add_criteria: JSON (Automatic addition criteria)
- notification_settings: JSON (Email and notification preferences)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_pool_type (pool_type)
- INDEX idx_department_id (department_id)
- INDEX idx_position_id (position_id)
- INDEX idx_experience_level (experience_level)
- INDEX idx_is_active (is_active)

Constraints:
- fk_talent_pool_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_talent_pool_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_talent_pool_position FOREIGN KEY (position_id) REFERENCES position(id)
- fk_talent_pool_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_salary_range CHECK (salary_range_max >= salary_range_min OR salary_range_min IS NULL OR salary_range_max IS NULL)
```

## 2.2.9 Candidate Communication Schema

```
Table: candidate_communication
Fields:
- id: UUID (Primary Key)
- candidate_id: UUID (Foreign Key to candidate)
- application_id: UUID (Foreign Key to candidate_application)
- communication_type: ENUM('Email', 'Phone', 'SMS', 'In-App', 'Letter', 'Portal Message')
- direction: ENUM('Inbound', 'Outbound')
- subject: VARCHAR(500)
- message_content: TEXT (Required)
- template_id: UUID (Foreign Key to communication_template)
- template_name: VARCHAR(200)
- sender_id: UUID (Foreign Key to user)
- recipient_email: VARCHAR(200)
- recipient_phone: VARCHAR(50)
- status: ENUM('Draft', 'Sent', 'Delivered', 'Failed', 'Bounced', 'Opened', 'Clicked', 'Replied')
- sent_date: TIMESTAMP
- delivered_date: TIMESTAMP
- opened_date: TIMESTAMP
- clicked_date: TIMESTAMP
- replied_date: TIMESTAMP
- error_message: TEXT
- attachments: JSON (Array of document IDs)
- priority: ENUM('Low', 'Medium', 'High', 'Urgent')
- auto_generated: BOOLEAN (Default: FALSE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_candidate_id (candidate_id)
- INDEX idx_application_id (application_id)
- INDEX idx_communication_type (communication_type)
- INDEX idx_direction (direction)
- INDEX idx_sender_id (sender_id)
- INDEX idx_status (status)
- INDEX idx_sent_date (sent_date)
- INDEX idx_priority (priority)

Constraints:
- fk_communication_candidate FOREIGN KEY (candidate_id) REFERENCES candidate(id)
- fk_communication_application FOREIGN KEY (application_id) REFERENCES candidate_application(id)
- fk_communication_template FOREIGN KEY (template_id) REFERENCES communication_template(id)
- fk_communication_sender FOREIGN KEY (sender_id) REFERENCES user(id)
```

## 2.2.10 Candidate Analytics Schema

```
Table: candidate_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- candidate_id: UUID (Foreign Key to candidate)
- application_id: UUID (Foreign Key to candidate_application)
- requisition_id: UUID (Foreign Key to job_requisition)
- department_id: UUID (Foreign Key to department)
- position_id: UUID (Foreign Key to position)
- source: ENUM('Company Website', 'Job Board', 'LinkedIn', 'Referral', 'Agency', 'Campus', 'Walk-in', 'Social Media')
- metric_type: ENUM('Application Rate', 'Screening Rate', 'Interview Rate', 'Offer Rate', 'Acceptance Rate', 'Time to Hire', 'Cost per Application', 'Quality Score')
- metric_value: DECIMAL(15,2)
- metric_unit: VARCHAR(50)
- benchmark_value: DECIMAL(15,2)
- variance_percentage: DECIMAL(5,2)
- measurement_date: DATE (Required)
- comparison_period: ENUM('Week', 'Month', 'Quarter', 'Year')
- additional_metrics: JSON (Additional KPIs and measurements)
- calculated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_candidate_id (candidate_id)
- INDEX idx_application_id (application_id)
- INDEX idx_requisition_id (requisition_id)
- INDEX idx_source (source)
- INDEX idx_metric_type (metric_type)
- INDEX idx_measurement_date (measurement_date)
- INDEX idx_comparison_period (comparison_period)

Constraints:
- fk_candidate_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_candidate_analytics_candidate FOREIGN KEY (candidate_id) REFERENCES candidate(id)
- fk_candidate_analytics_application FOREIGN KEY (application_id) REFERENCES candidate_application(id)
- fk_candidate_analytics_requisition FOREIGN KEY (requisition_id) REFERENCES job_requisition(id)
- fk_candidate_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_candidate_analytics_position FOREIGN KEY (position_id) REFERENCES position(id)
- fk_candidate_analytics_calculated_by FOREIGN KEY (calculated_by_user_id) REFERENCES user(id)
```

## 2.2.11 Candidate Audit Log Schema

```
Table: candidate_audit_log
Fields:
- id: UUID (Primary Key)
- candidate_id: UUID (Foreign Key to candidate)
- application_id: UUID (Foreign Key to candidate_application)
- company_id: UUID (Foreign Key to company)
- action: ENUM('Create', 'Update', 'Delete', 'Status Change', 'Application', 'Interview', 'Assessment', 'Communication', 'Offer')
- entity_type: ENUM('Candidate', 'Application', 'Resume', 'Feedback', 'Assessment', 'Communication', 'Talent Pool')
- entity_id: UUID
- old_values: JSON (Previous values)
- new_values: JSON (Updated values)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_candidate_id (candidate_id)
- INDEX idx_application_id (application_id)
- INDEX idx_company_id (company_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_performed_by (performed_by_user_id)
- INDEX idx_timestamp (timestamp)

Constraints:
- fk_candidate_audit_candidate FOREIGN KEY (candidate_id) REFERENCES candidate(id)
- fk_candidate_audit_application FOREIGN KEY (application_id) REFERENCES candidate_application(id)
- fk_candidate_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_candidate_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
