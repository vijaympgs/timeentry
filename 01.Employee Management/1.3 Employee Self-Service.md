# 1.3 Employee Self-Service

## 1.3.1 Business Purpose

Employee Self-Service (ESS) empowers employees to manage their personal information, submit requests, and access HR services without HR intervention. It reduces administrative overhead, improves data accuracy, and enhances employee experience by providing 24/7 access to HR functions. The system ensures proper validation, approval workflows, and audit trails for all self-service transactions.

## 1.3.2 Business Scope

Enable employees to update personal information, submit leave requests, access payslips, manage benefits, submit expense claims, and request documents. The system includes configurable approval workflows, real-time notifications, mobile accessibility, and integration with downstream HR systems while maintaining data security and compliance requirements.

## 1.3.3 Change Request Schema

```
Table: employee_change_request
Fields:
- id: UUID (Primary Key)
- employee_id: UUID (Foreign Key to employee)
- request_type: ENUM('Personal Info', 'Contact Info', 'Bank Details', 'Emergency Contact', 'Tax Info', 'Address')
- field_name: VARCHAR(100) (Required)
- old_value: TEXT
- new_value: TEXT (Required)
- change_reason: TEXT
- supporting_document_id: UUID (Foreign Key to document)
- status: ENUM('Draft', 'Submitted', 'Pending Approval', 'Approved', 'Rejected', 'Completed')
- priority: ENUM('Low', 'Medium', 'High', 'Urgent')
- submitted_at: TIMESTAMP
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- rejection_reason: TEXT
- completed_at: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_request_type (request_type)
- INDEX idx_status (status)
- INDEX idx_priority (priority)
- INDEX idx_submitted_at (submitted_at)
- INDEX idx_approved_by (approved_by_user_id)

Constraints:
- fk_change_request_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_change_request_document FOREIGN KEY (supporting_document_id) REFERENCES document(id)
- fk_change_request_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
```

## 1.3.4 Approval Matrix Schema

```
Table: approval_matrix
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- request_type: ENUM('Personal Info', 'Contact Info', 'Bank Details', 'Emergency Contact', 'Tax Info', 'Address')
- employee_category: ENUM('All', 'Staff', 'Worker', 'Executive', 'Management')
- department_id: UUID (Foreign Key to department)
- location_id: UUID (Foreign Key to location)
- approval_level: INTEGER (Required)
- approver_type: ENUM('Manager', 'HR Admin', 'Department Head', 'Specific User')
- approver_id: UUID (Foreign Key to user)
- is_required: BOOLEAN (Default: TRUE)
- is_parallel: BOOLEAN (Default: FALSE)
- time_limit_hours: INTEGER (Default: 48)
- auto_approve: BOOLEAN (Default: FALSE)
- conditions: JSON (Approval conditions)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_request_type (request_type)
- INDEX idx_employee_category (employee_category)
- INDEX idx_department_id (department_id)
- INDEX idx_location_id (location_id)
- INDEX idx_approval_level (approval_level)
- INDEX idx_approver_type (approver_type)
- INDEX idx_approver_id (approver_id)
- INDEX idx_is_active (is_active)

Constraints:
- fk_approval_matrix_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_approval_matrix_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_approval_matrix_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_approval_matrix_approver FOREIGN KEY (approver_id) REFERENCES user(id)
```

## 1.3.5 Approval Workflow Schema

```
Table: approval_workflow
Fields:
- id: UUID (Primary Key)
- request_id: UUID (Foreign Key to employee_change_request)
- matrix_id: UUID (Foreign Key to approval_matrix)
- approver_id: UUID (Foreign Key to user)
- approval_level: INTEGER
- status: ENUM('Pending', 'Approved', 'Rejected', 'Delegated', 'Escalated')
- decision: ENUM('Approve', 'Reject', 'Request More Info', 'Delegate')
- comments: TEXT
- attachments: JSON (Array of document IDs)
- delegated_to_user_id: UUID (Foreign Key to user)
- escalated_to_user_id: UUID (Foreign Key to user)
- due_date: TIMESTAMP
- action_date: TIMESTAMP
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_request_id (request_id)
- INDEX idx_matrix_id (matrix_id)
- INDEX idx_approver_id (approver_id)
- INDEX idx_approval_level (approval_level)
- INDEX idx_status (status)
- INDEX idx_decision (decision)
- INDEX idx_due_date (due_date)

Constraints:
- fk_approval_workflow_request FOREIGN KEY (request_id) REFERENCES employee_change_request(id)
- fk_approval_workflow_matrix FOREIGN KEY (matrix_id) REFERENCES approval_matrix(id)
- fk_approval_workflow_approver FOREIGN KEY (approver_id) REFERENCES user(id)
- fk_approval_workflow_delegated_to FOREIGN KEY (delegated_to_user_id) REFERENCES user(id)
- fk_approval_workflow_escalated_to FOREIGN KEY (escalated_to_user_id) REFERENCES user(id)
```

## 1.3.6 Self-Service Configuration Schema

```
Table: ess_configuration
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- module_name: VARCHAR(100) (Required)
- feature_name: VARCHAR(100) (Required)
- is_enabled: BOOLEAN (Default: TRUE)
- configuration: JSON (Feature-specific settings)
- access_roles: JSON (Array of role IDs)
- employee_categories: JSON (Array of categories)
- departments: JSON (Array of department IDs)
- locations: JSON (Array of location IDs)
- validation_rules: JSON (Field validation rules)
- notification_settings: JSON (Email/SMS templates)
- approval_required: BOOLEAN (Default: FALSE)
- auto_approve_conditions: JSON (Auto-approval rules)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_module_name (module_name)
- INDEX idx_feature_name (feature_name)
- INDEX idx_is_enabled (is_enabled)

Constraints:
- fk_ess_config_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_ess_config_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

## 1.3.7 Notification Schema

```
Table: ess_notification
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- notification_type: ENUM('Request Submitted', 'Approval Required', 'Request Approved', 'Request Rejected', 'Request Completed', 'Reminder', 'Escalation')
- template_name: VARCHAR(100) (Required)
- subject_template: TEXT (Required)
- body_template: TEXT (Required)
- channel: ENUM('Email', 'SMS', 'In-App', 'Push Notification')
- recipient_type: ENUM('Employee', 'Manager', 'HR Admin', 'Approver', 'Custom')
- recipient_roles: JSON (Array of role IDs)
- trigger_events: JSON (Array of trigger events)
- variables: JSON (Template variables)
- is_active: BOOLEAN (Default: TRUE)
- send_immediately: BOOLEAN (Default: TRUE)
- schedule_delay_minutes: INTEGER (Default: 0)
- retry_count: INTEGER (Default: 3)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_notification_type (notification_type)
- INDEX idx_template_name (template_name)
- INDEX idx_channel (channel)
- INDEX idx_is_active (is_active)

Constraints:
- fk_ess_notification_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_ess_notification_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

## 1.3.8 Service Catalog Schema

```
Table: ess_service_catalog
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- service_code: VARCHAR(50) (Required, Indexed)
- service_name: VARCHAR(200) (Required)
- service_category: ENUM('Personal Info', 'Benefits', 'Payroll', 'Leave', 'Documents', 'Training', 'IT Support')
- service_description: TEXT
- service_type: ENUM('Form', 'Document Request', 'Information', 'Approval Request', 'Automated Process')
- target_audience: JSON (Employee categories, roles, departments)
- prerequisites: JSON (Required conditions)
- process_steps: JSON (Step-by-step process)
- sla_hours: INTEGER (Default: 48)
- auto_approve: BOOLEAN (Default: FALSE)
- fee_applicable: BOOLEAN (Default: FALSE)
- fee_amount: DECIMAL(10,2)
- is_active: BOOLEAN (Default: TRUE)
- display_order: INTEGER (Default: 0)
- icon_name: VARCHAR(100)
- help_text: TEXT
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_service_company_code (company_id, service_code)
- INDEX idx_company_id (company_id)
- INDEX idx_service_category (service_category)
- INDEX idx_service_type (service_type)
- INDEX idx_is_active (is_active)
- INDEX idx_display_order (display_order)

Constraints:
- fk_service_catalog_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_service_catalog_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

## 1.3.9 Service Request Schema

```
Table: ess_service_request
Fields:
- id: UUID (Primary Key)
- request_number: VARCHAR(50) (Unique, Indexed)
- employee_id: UUID (Foreign Key to employee)
- service_id: UUID (Foreign Key to ess_service_catalog)
- request_data: JSON (Form data and attachments)
- status: ENUM('Draft', 'Submitted', 'In Progress', 'Pending Info', 'Completed', 'Cancelled', 'Rejected')
- priority: ENUM('Low', 'Medium', 'High', 'Urgent')
- assigned_to_user_id: UUID (Foreign Key to user)
- submitted_at: TIMESTAMP
- due_date: TIMESTAMP
- completed_at: TIMESTAMP
- completion_notes: TEXT
- employee_rating: INTEGER (1-5)
- employee_feedback: TEXT
- processing_time_hours: DECIMAL(8,2)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_request_number (request_number)
- INDEX idx_employee_id (employee_id)
- INDEX idx_service_id (service_id)
- INDEX idx_status (status)
- INDEX idx_priority (priority)
- INDEX idx_assigned_to (assigned_to_user_id)
- INDEX idx_submitted_at (submitted_at)
- INDEX idx_due_date (due_date)

Constraints:
- fk_service_request_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_service_request_service FOREIGN KEY (service_id) REFERENCES ess_service_catalog(id)
- fk_service_request_assigned_to FOREIGN KEY (assigned_to_user_id) REFERENCES user(id)
- chk_rating_range CHECK (employee_rating BETWEEN 1 AND 5)
```

## 1.3.10 ESS Analytics Schema

```
Table: ess_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- action_type: ENUM('Login', 'View Service', 'Submit Request', 'Update Profile', 'Download Document', 'Track Request')
- service_category: VARCHAR(100)
- service_id: UUID (Foreign Key to ess_service_catalog)
- request_id: UUID (Foreign Key to ess_service_request)
- session_id: VARCHAR(100)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- device_type: ENUM('Desktop', 'Mobile', 'Tablet')
- browser: VARCHAR(100)
- action_timestamp: TIMESTAMP (Auto)
- processing_time_ms: INTEGER
- success_flag: BOOLEAN (Default: TRUE)
- error_message: TEXT

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_action_type (action_type)
- INDEX idx_service_category (service_category)
- INDEX idx_service_id (service_id)
- INDEX idx_request_id (request_id)
- INDEX idx_action_timestamp (action_timestamp)
- INDEX idx_device_type (device_type)

Constraints:
- fk_ess_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_ess_analytics_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_ess_analytics_service FOREIGN KEY (service_id) REFERENCES ess_service_catalog(id)
- fk_ess_analytics_request FOREIGN KEY (request_id) REFERENCES ess_service_request(id)
```

## 1.3.11 ESS Audit Log Schema

```
Table: ess_audit_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- action: ENUM('Create', 'Update', 'Delete', 'Submit', 'Approve', 'Reject', 'View', 'Download')
- entity_type: ENUM('Change Request', 'Service Request', 'Personal Info', 'Document', 'Approval Workflow')
- entity_id: UUID
- old_values: JSON (Previous values)
- new_values: JSON (Updated values)
- field_changes: JSON (Specific field changes)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- INDEX idx_entity_id (entity_id)
- INDEX idx_timestamp (timestamp)

Constraints:
- fk_ess_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_ess_audit_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
