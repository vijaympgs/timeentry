# 1.5 Employee Lifecycle

## 1.5.1 Business Purpose

Employee Lifecycle Management automates and tracks all employee status transitions from hire to retire, ensuring consistent processes, compliance with regulations, and smooth employee experiences. It provides a state machine framework for managing employment status changes, automates workflow triggers, maintains complete audit trails, and integrates with all HR modules to ensure data consistency across the employee journey.

## 1.5.2 Business Scope

Enable comprehensive management of employee lifecycle events including onboarding, status changes, promotions, transfers, leaves, and offboarding. The system includes configurable state machines, automated workflow triggers, compliance monitoring, document generation, and integration with payroll, benefits, and access management systems while maintaining audit trails and reporting capabilities.

## 1.5.3 Lifecycle State Machine Schema

```
Table: lifecycle_state_machine
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- state_machine_name: VARCHAR(200) (Required)
- current_state: VARCHAR(100) (Required)
- previous_state: VARCHAR(100)
- target_state: VARCHAR(100)
- transition_event: VARCHAR(100) (Required)
- transition_condition: JSON (Condition evaluation rules)
- action_required: BOOLEAN (Default: TRUE)
- auto_transition: BOOLEAN (Default: FALSE)
- transition_timeout_hours: INTEGER
- approval_required: BOOLEAN (Default: FALSE)
- approver_type: ENUM('Manager', 'HR Admin', 'Department Head', 'Specific User')
- approver_id: UUID (Foreign Key to user)
- notification_template: VARCHAR(200)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_current_state (current_state)
- INDEX idx_transition_event (transition_event)
- INDEX idx_target_state (target_state)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_from (effective_from)

Constraints:
- fk_lifecycle_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lifecycle_approver FOREIGN KEY (approver_id) REFERENCES user(id)
- fk_lifecycle_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_timeout_positive CHECK (transition_timeout_hours > 0)
```

## 1.5.4 Lifecycle Event Log Schema

```
Table: lifecycle_event_log
Fields:
- id: UUID (Primary Key)
- employee_id: UUID (Foreign Key to employee)
- event_type: ENUM('Hire', 'Onboarding', 'Confirmation', 'Promotion', 'Transfer', 'Department Change', 'Position Change', 'Leave', 'Return from Leave', 'Suspension', 'Termination', 'Retirement', 'Resignation', 'Contract End', 'Death')
- event_sub_type: VARCHAR(100)
- previous_status: VARCHAR(100)
- new_status: VARCHAR(100)
- event_date: DATE (Required)
- effective_date: DATE (Required)
- reason_code: VARCHAR(100)
- event_description: TEXT
- initiated_by_user_id: UUID (Foreign Key to user)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- status: ENUM('Draft', 'Submitted', 'Pending Approval', 'Approved', 'Rejected', 'Completed', 'Cancelled')
- priority: ENUM('Low', 'Medium', 'High', 'Urgent')
- workflow_instance_id: UUID (Foreign Key to workflow_instance)
- supporting_documents: JSON (Array of document IDs)
- system_generated: BOOLEAN (Default: FALSE)
- batch_reference: VARCHAR(100)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_event_type (event_type)
- INDEX idx_event_date (event_date)
- INDEX idx_effective_date (effective_date)
- INDEX idx_status (status)
- INDEX idx_initiated_by (initiated_by_user_id)
- INDEX idx_approved_by (approved_by_user_id)
- INDEX idx_workflow_instance (workflow_instance_id)

Constraints:
- fk_lifecycle_event_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_lifecycle_event_initiated_by FOREIGN KEY (initiated_by_user_id) REFERENCES user(id)
- fk_lifecycle_event_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_lifecycle_event_workflow FOREIGN KEY (workflow_instance_id) REFERENCES workflow_instance(id)
```

## 1.5.5 Status Transition Validation Schema

```
Table: status_transition_validation
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- from_status: VARCHAR(100) (Required)
- to_status: VARCHAR(100) (Required)
- validation_rule_name: VARCHAR(200) (Required)
- validation_type: ENUM('Business Rule', 'Data Check', 'Document Check', 'Approval Check', 'System Check')
- validation_expression: TEXT (Required)
- error_message: VARCHAR(500)
- is_blocking: BOOLEAN (Default: TRUE)
- validation_order: INTEGER (Default: 0)
- is_active: BOOLEAN (Default: TRUE)
- effective_from: DATE (Required)
- effective_to: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_from_status (from_status)
- INDEX idx_to_status (to_status)
- INDEX idx_validation_type (validation_type)
- INDEX idx_is_active (is_active)
- INDEX idx_validation_order (validation_order)

Constraints:
- fk_transition_validation_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_transition_validation_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_validation_order_positive CHECK (validation_order >= 0)
```

## 1.5.6 Onboarding Workflow Schema

```
Table: onboarding_workflow
Fields:
- id: UUID (Primary Key)
- employee_id: UUID (Foreign Key to employee)
- workflow_template_id: UUID (Foreign Key to workflow_template)
- workflow_name: VARCHAR(200) (Required)
- start_date: DATE (Required)
- expected_completion_date: DATE
- actual_completion_date: DATE
- status: ENUM('Not Started', 'In Progress', 'Completed', 'On Hold', 'Cancelled')
- progress_percentage: DECIMAL(5,2) (Default: 0)
- assigned_buddy_id: UUID (Foreign Key to employee)
- assigned_manager_id: UUID (Foreign Key to employee)
- assigned_hr_id: UUID (Foreign Key to user)
- onboarding_type: ENUM('Standard', 'Executive', 'Remote', 'Contract', 'Intern')
- department_id: UUID (Foreign Key to department)
- location_id: UUID (Foreign Key to location)
- checklist_items: JSON (Array of checklist items with status)
- document_requirements: JSON (Required documents)
- training_requirements: JSON (Required training modules)
- equipment_requests: JSON (Equipment and access requests)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_workflow_template (workflow_template_id)
- INDEX idx_start_date (start_date)
- INDEX idx_status (status)
- INDEX idx_assigned_buddy (assigned_buddy_id)
- INDEX idx_assigned_manager (assigned_manager_id)
- INDEX idx_assigned_hr (assigned_hr_id)
- INDEX idx_department_id (department_id)

Constraints:
- fk_onboarding_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_onboarding_template FOREIGN KEY (workflow_template_id) REFERENCES workflow_template(id)
- fk_onboarding_buddy FOREIGN KEY (assigned_buddy_id) REFERENCES employee(id)
- fk_onboarding_manager FOREIGN KEY (assigned_manager_id) REFERENCES employee(id)
- fk_onboarding_hr FOREIGN KEY (assigned_hr_id) REFERENCES user(id)
- fk_onboarding_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_onboarding_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_onboarding_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_progress_range CHECK (progress_percentage BETWEEN 0 AND 100)
```

## 1.5.7 Offboarding Process Schema

```
Table: offboarding_process
Fields:
- id: UUID (Primary Key)
- employee_id: UUID (Foreign Key to employee)
- process_template_id: UUID (Foreign Key to workflow_template)
- separation_type: ENUM('Resignation', 'Termination', 'Retirement', 'Contract End', 'Death', 'Layoff')
- separation_reason: VARCHAR(200)
- separation_date: DATE (Required)
- last_working_day: DATE (Required)
- exit_interview_scheduled: BOOLEAN (Default: FALSE)
- exit_interview_date: DATE
- exit_interviewer_id: UUID (Foreign Key to user)
- status: ENUM('Initiated', 'In Progress', 'Pending Clearance', 'Completed', 'Cancelled')
- progress_percentage: DECIMAL(5,2) (Default: 0)
- assigned_hr_id: UUID (Foreign Key to user)
- assigned_manager_id: UUID (Foreign Key to employee)
- clearance_checklist: JSON (Clearance items with status)
- asset_handover: JSON (Assets to be returned)
- access_revocation: JSON (System access to be revoked)
- final_payroll_processed: BOOLEAN (Default: FALSE)
- final_payroll_date: DATE
- documents_provided: JSON (Documents to provide to employee)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_process_template (process_template_id)
- INDEX idx_separation_type (separation_type)
- INDEX idx_separation_date (separation_date)
- INDEX idx_last_working_day (last_working_day)
- INDEX idx_status (status)
- INDEX idx_exit_interviewer (exit_interviewer_id)
- INDEX idx_assigned_hr (assigned_hr_id)
- INDEX idx_assigned_manager (assigned_manager_id)

Constraints:
- fk_offboarding_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_offboarding_template FOREIGN KEY (process_template_id) REFERENCES workflow_template(id)
- fk_offboarding_interviewer FOREIGN KEY (exit_interviewer_id) REFERENCES user(id)
- fk_offboarding_hr FOREIGN KEY (assigned_hr_id) REFERENCES user(id)
- fk_offboarding_manager FOREIGN KEY (assigned_manager_id) REFERENCES employee(id)
- fk_offboarding_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_progress_range CHECK (progress_percentage BETWEEN 0 AND 100)
```

## 1.5.8 Lifecycle Analytics Schema

```
Table: lifecycle_analytics
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- employee_id: UUID (Foreign Key to employee)
- event_type: ENUM('Hire', 'Onboarding', 'Confirmation', 'Promotion', 'Transfer', 'Leave', 'Termination', 'Retirement')
- event_date: DATE (Required)
- processing_time_days: INTEGER
- workflow_completion_time_hours: DECIMAL(8,2)
- satisfaction_rating: INTEGER (1-5)
- feedback_score: INTEGER (1-10)
- cost_impact: DECIMAL(15,2)
- department_id: UUID (Foreign Key to department)
- location_id: UUID (Foreign Key to location)
- manager_id: UUID (Foreign Key to employee)
- hr_rep_id: UUID (Foreign Key to user)
- metrics_data: JSON (Additional metrics and KPIs)
- benchmark_comparison: JSON (Industry benchmark comparison)
- created_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_event_type (event_type)
- INDEX idx_event_date (event_date)
- INDEX idx_processing_time (processing_time_days)
- INDEX idx_satisfaction_rating (satisfaction_rating)
- INDEX idx_department_id (department_id)
- INDEX idx_location_id (location_id)

Constraints:
- fk_lifecycle_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lifecycle_analytics_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_lifecycle_analytics_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_lifecycle_analytics_location FOREIGN KEY (location_id) REFERENCES location(id)
- fk_lifecycle_analytics_manager FOREIGN KEY (manager_id) REFERENCES employee(id)
- fk_lifecycle_analytics_hr_rep FOREIGN KEY (hr_rep_id) REFERENCES user(id)
- chk_satisfaction_range CHECK (satisfaction_rating BETWEEN 1 AND 5)
- chk_feedback_range CHECK (feedback_score BETWEEN 1 AND 10)
```

## 1.5.9 Lifecycle Compliance Monitoring Schema

```
Table: lifecycle_compliance_monitoring
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- compliance_rule_name: VARCHAR(200) (Required)
- compliance_type: ENUM('Legal', 'Policy', 'Regulatory', 'Contractual', 'Safety')
- lifecycle_event: VARCHAR(100) (Required)
- check_frequency: ENUM('One Time', 'Daily', 'Weekly', 'Monthly', 'Quarterly', 'Annually')
- compliance_check: TEXT (Required)
- threshold_value: DECIMAL(15,2)
- tolerance_percentage: DECIMAL(5,2)
- notification_threshold: DECIMAL(5,2)
- escalation_threshold: DECIMAL(5,2)
- responsible_role: ENUM('HR Admin', 'Manager', 'Compliance Officer', 'Legal')
- responsible_user_id: UUID (Foreign Key to user)
- notification_template: VARCHAR(200)
- is_active: BOOLEAN (Default: TRUE)
- last_check_date: DATE
- next_check_date: DATE
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_compliance_type (compliance_type)
- INDEX idx_lifecycle_event (lifecycle_event)
- INDEX idx_check_frequency (check_frequency)
- INDEX idx_is_active (is_active)
- INDEX idx_last_check_date (last_check_date)
- INDEX idx_next_check_date (next_check_date)

Constraints:
- fk_compliance_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_compliance_responsible_user FOREIGN KEY (responsible_user_id) REFERENCES user(id)
- fk_compliance_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_tolerance_range CHECK (tolerance_percentage BETWEEN 0 AND 100)
```

## 1.5.10 Automated Workflow Triggers Schema

```
Table: automated_workflow_triggers
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- trigger_name: VARCHAR(200) (Required)
- trigger_event: ENUM('Employee Hire', 'Status Change', 'Anniversary', 'Probation End', 'Document Expiry', 'Leave Start', 'Leave End', 'Termination')
- trigger_condition: JSON (Condition evaluation rules)
- workflow_template_id: UUID (Foreign Key to workflow_template)
- trigger_timing: ENUM('Immediate', 'Scheduled', 'Delayed')
- delay_minutes: INTEGER (Default: 0)
- schedule_pattern: VARCHAR(200) (Cron expression)
- is_active: BOOLEAN (Default: TRUE)
- execution_count: INTEGER (Default: 0)
- last_executed_at: TIMESTAMP
- next_execution_at: TIMESTAMP
- success_rate: DECIMAL(5,2) (Default: 0)
- error_count: INTEGER (Default: 0)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_trigger_event (trigger_event)
- INDEX idx_workflow_template (workflow_template_id)
- INDEX idx_trigger_timing (trigger_timing)
- INDEX idx_is_active (is_active)
- INDEX idx_last_executed (last_executed_at)
- INDEX idx_next_execution (next_execution_at)

Constraints:
- fk_trigger_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_trigger_workflow_template FOREIGN KEY (workflow_template_id) REFERENCES workflow_template(id)
- fk_trigger_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_delay_positive CHECK (delay_minutes >= 0)
- chk_success_rate_range CHECK (success_rate BETWEEN 0 AND 100)
```

## 1.5.11 Lifecycle Reporting Schema

```
Table: lifecycle_reporting
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- report_name: VARCHAR(200) (Required)
- report_type: ENUM('Headcount', 'Turnover', 'Hiring', 'Onboarding', 'Offboarding', 'Lifecycle Events', 'Compliance', 'Performance')
- report_frequency: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Annually', 'On Demand')
- report_parameters: JSON (Report filters and parameters)
- data_sources: JSON (Data source configurations)
- calculation_logic: JSON (Business logic for calculations)
- output_format: ENUM('PDF', 'Excel', 'CSV', 'HTML', 'Dashboard')
- distribution_list: JSON (Email distribution list)
- is_scheduled: BOOLEAN (Default: FALSE)
- schedule_pattern: VARCHAR(200) (Cron expression)
- last_generated_at: TIMESTAMP
- next_generation_at: TIMESTAMP
- generated_by_user_id: UUID (Foreign Key to user)
- file_path: VARCHAR(1000)
- file_size: BIGINT
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_report_type (report_type)
- INDEX idx_report_frequency (report_frequency)
- INDEX idx_is_scheduled (is_scheduled)
- INDEX idx_last_generated (last_generated_at)
- INDEX idx_next_generation (next_generation_at)
- INDEX idx_is_active (is_active)

Constraints:
- fk_lifecycle_reporting_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lifecycle_reporting_generated_by FOREIGN KEY (generated_by_user_id) REFERENCES user(id)
- fk_lifecycle_reporting_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
