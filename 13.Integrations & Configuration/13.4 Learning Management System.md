# 13.4 Learning Management System

## 13.4.1 Business Purpose & Scope

## 13.4.1.1 Business Purpose

Learning Management System Integration provides a comprehensive framework for seamless integration between the HR system and external Learning Management Systems (LMS), ensuring efficient, compliant, and accurate learning and development administration across course management, training programs, skill assessments, certification tracking, and employee development initiatives. This integration automates course enrollment processes, synchronizes learning progress data, manages training records, tracks skill development, and maintains compliance with regulatory requirements while reducing manual administrative overhead and ensuring consistent learning delivery across the organization through automated workflows, real-time data synchronization, and comprehensive audit trails.

## 13.4.1.2 Business Scope

Enable comprehensive Learning Management System integration management including multi-LMS support, automated course enrollment, progress tracking, skill assessment synchronization, certification management, compliance training monitoring, employee development analytics, reporting and insights, and audit trail maintenance. The system supports various LMS platforms, custom training programs, integration configurations, validation rules, approval workflows, compliance monitoring, and provides seamless integration with performance management, succession planning, and employee self-service modules while ensuring data security, privacy, and regulatory compliance with industry standards and organizational learning requirements.

--- END OF SECTION 13.4.1 ---

## 13.4.2 LMS Integration Configuration Schema

```
Table: lms_integration_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_name: VARCHAR(200) (Required)
- lms_type: ENUM('Corporate LMS', 'Moodle', 'Canvas', 'Blackboard', 'Cornerstone', 'Docebo', 'TalentLMS', 'Custom LMS', 'SCORM Compliant', 'xAPI Compatible')
- lms_code: VARCHAR(50) (Required, Unique, Indexed)
- integration_method: ENUM('API', 'LTI', 'SCORM', 'xAPI', 'SFTP', 'File Upload', 'Webhook', 'Database Link', 'Manual Entry')
- api_endpoint_url: VARCHAR(500)
- api_version: VARCHAR(20) (Default: 'v1')
- authentication_type: ENUM('API Key', 'OAuth 2.0', 'Basic Auth', 'LTI Key', 'JWT', 'Certificate', 'SAML')
- authentication_config: JSON (Encrypted authentication credentials)
- data_format: ENUM('JSON', 'XML', 'CSV', 'SCORM', 'xAPI', 'LTI')
- encoding_format: VARCHAR(20) (Default: 'UTF-8')
- sync_frequency: ENUM('Real-time', 'Every 15 mins', 'Hourly', 'Daily', 'Weekly', 'On-demand')
- sync_direction: ENUM('Bidirectional', 'Inbound Only', 'Outbound Only')
- is_primary_lms: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- connection_status: ENUM('Connected', 'Disconnected', 'Error', 'Testing', 'Maintenance')
- last_sync_at: TIMESTAMP
- last_successful_sync_at: TIMESTAMP
- error_count: INTEGER (Default: 0)
- max_retry_attempts: INTEGER (Default: 3)
- timeout_seconds: INTEGER (Default: 30)
- rate_limit_per_hour: INTEGER (Default: 1000)
- supported_course_types: JSON (eLearning, Instructor-led, Blended, Virtual, Microlearning)
- field_mappings: JSON (Field mapping between HR and LMS systems)
- validation_rules: JSON (Data validation rules)
- transformation_rules: JSON (Data transformation logic)
- compliance_settings: JSON (SCORM, AICC, xAPI compliance settings)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_integration_company_code (lms_code, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_type (lms_type)
- INDEX idx_integration_method (integration_method)
- INDEX idx_is_primary_lms (is_primary_lms)
- INDEX idx_is_active (is_active)
- INDEX idx_connection_status (connection_status)
- INDEX idx_last_sync_at (last_sync_at)
- INDEX idx_last_successful_sync_at (last_successful_sync_at)

Constraints:
- fk_lms_integration_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_integration_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_integration_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_error_count_valid CHECK (error_count >= 0 AND error_count <= max_retry_attempts)
- chk_positive_values CHECK (timeout_seconds > 0 AND rate_limit_per_hour > 0 AND max_retry_attempts >= 0)
```

--- END OF SECTION 13.4.2 ---

## 13.4.3 Course & Learning Progress Schema

```
Table: lms_course_enrollment
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- employee_id: UUID (Foreign Key to employee)
- enrollment_number: VARCHAR(50) (Required, Unique, Indexed)
- course_id: VARCHAR(100) (Required)
- course_name: VARCHAR(200) (Required)
- course_code: VARCHAR(50) (Required)
- course_type: ENUM('eLearning', 'Instructor-led', 'Blended', 'Virtual Classroom', 'Microlearning', 'Webinar', 'Workshop')
- enrollment_status: ENUM('Not Started', 'In Progress', 'Completed', 'Failed', 'Dropped', 'On Hold', 'Expired', 'Certified')
- enrollment_date: DATE (Required)
- start_date: DATE
- end_date: DATE
- completion_date: DATE
- due_date: DATE
- progress_percentage: DECIMAL(5,2) (Default: 0.00)
- time_spent_minutes: INTEGER (Default: 0)
- score_achieved: DECIMAL(5,2)
- max_score: DECIMAL(5,2)
- passing_score: DECIMAL(5,2)
- grade_achieved: VARCHAR(10)
- instructor_id: VARCHAR(100)
- instructor_name: VARCHAR(200)
- completion_certificate_url: VARCHAR(500)
- credits_earned: DECIMAL(8,2) (Default: 0.00)
- cost_amount: DECIMAL(10,2) (Default: 0.00)
- currency_code: VARCHAR(10) (Default: 'USD')
- is_mandatory: BOOLEAN (Default: FALSE)
- is_compliance_training: BOOLEAN (Default: FALSE)
- auto_enrollment: BOOLEAN (Default: FALSE)
- enrollment_source: ENUM('Manager Assignment', 'Self Enrollment', 'System Assignment', 'Learning Path', 'Compliance Requirement')
- learning_path_id: VARCHAR(100)
- prerequisite_courses: JSON (List of prerequisite course IDs)
- next_courses: JSON (List of recommended next courses)
- last_access_date: TIMESTAMP
- total_access_count: INTEGER (Default: 0)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_enrollment_company_number (enrollment_number, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_course_id (course_id)
- INDEX idx_course_code (course_code)
- INDEX idx_enrollment_status (enrollment_status)
- INDEX idx_enrollment_date (enrollment_date)
- INDEX idx_completion_date (completion_date)
- INDEX idx_progress_percentage (progress_percentage)
- INDEX idx_is_mandatory (is_mandatory)
- INDEX idx_is_compliance_training (is_compliance_training)

Constraints:
- fk_lms_enrollment_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_enrollment_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_enrollment_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- fk_lms_enrollment_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_enrollment_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_progress_range CHECK (progress_percentage BETWEEN 0 AND 100)
- chk_positive_values CHECK (time_spent_minutes >= 0 AND credits_earned >= 0 AND cost_amount >= 0)
- chk_score_valid CHECK (score_achieved >= 0 AND max_score >= 0 AND passing_score >= 0)
```

```
Table: lms_learning_progress
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- enrollment_id: UUID (Foreign Key to lms_course_enrollment)
- employee_id: UUID (Foreign Key to employee)
- course_id: VARCHAR(100) (Required)
- lesson_id: VARCHAR(100)
- lesson_name: VARCHAR(200)
- lesson_type: ENUM('Video', 'Reading', 'Quiz', 'Assignment', 'Project', 'Discussion', 'Assessment', 'Simulation')
- progress_status: ENUM('Not Started', 'In Progress', 'Completed', 'Failed', 'Skipped')
- completion_date: TIMESTAMP
- time_spent_seconds: INTEGER (Default: 0)
- score_achieved: DECIMAL(5,2)
- max_score: DECIMAL(5,2)
- attempts_count: INTEGER (Default: 0)
- first_access_date: TIMESTAMP
- last_access_date: TIMESTAMP
- completion_percentage: DECIMAL(5,2) (Default: 0.00)
- bookmark_data: JSON (Progress bookmark information)
- interaction_data: JSON (User interactions and responses)
- assessment_results: JSON (Detailed assessment results)
- feedback_data: JSON (Instructor feedback and comments)
- next_lesson_id: VARCHAR(100)
- prerequisites_completed: BOOLEAN (Default: FALSE)
- is_mandatory_lesson: BOOLEAN (Default: FALSE)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_enrollment_id (enrollment_id)
- INDEX idx_employee_id (employee_id)
- INDEX idx_course_id (course_id)
- INDEX idx_lesson_id (lesson_id)
- INDEX idx_progress_status (progress_status)
- INDEX idx_completion_date (completion_date)
- INDEX idx_completion_percentage (completion_percentage)
- INDEX idx_is_mandatory_lesson (is_mandatory_lesson)

Constraints:
- fk_lms_progress_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_progress_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_progress_enrollment FOREIGN KEY (enrollment_id) REFERENCES lms_course_enrollment(id)
- fk_lms_progress_employee FOREIGN KEY (employee_id) REFERENCES employee(id)
- chk_progress_percentage_range CHECK (completion_percentage BETWEEN 0 AND 100)
- chk_positive_values CHECK (time_spent_seconds >= 0 AND attempts_count >= 0)
- chk_score_achieved_valid CHECK (score_achieved >= 0 AND max_score >= 0)
```

--- END OF SECTION 13.4.3 ---

## 13.4.4 LMS Governance & Access Control Schema

```
Table: lms_role_permission
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- role_name: VARCHAR(100) (Required, Unique, Indexed)
- role_description: TEXT
- role_type: ENUM('LMS_ADMIN', 'LMS_MANAGER', 'LMS_INSTRUCTOR', 'HR_ADMIN', 'TRAINING_COORDINATOR', 'CONTENT_CREATOR', 'LEARNER', 'REPORT_VIEWER', 'COMPLIANCE_OFFICER', 'AUDITOR')
- can_manage_lms_config: BOOLEAN (Default: FALSE)
- can_manage_courses: BOOLEAN (Default: FALSE)
- can_create_content: BOOLEAN (Default: FALSE)
- can_enroll_learners: BOOLEAN (Default: FALSE)
- can_view_progress: BOOLEAN (Default: FALSE)
- can_manage_certifications: BOOLEAN (Default: FALSE)
- can_view_reports: BOOLEAN (Default: FALSE)
- can_export_data: BOOLEAN (Default: FALSE)
- can_manage_integrations: BOOLEAN (Default: FALSE)
- can_view_audit_logs: BOOLEAN (Default: FALSE)
- can_manage_compliance: BOOLEAN (Default: FALSE)
- can_approve_enrollments: BOOLEAN (Default: FALSE)
- can_manage_learning_paths: BOOLEAN (Default: FALSE)
- can_access_analytics: BOOLEAN (Default: FALSE)
- can_manage_assessments: BOOLEAN (Default: FALSE)
- data_access_level: ENUM('ALL', 'DEPARTMENT', 'TEAM', 'OWN', 'NONE')
- is_active: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_role_name_company (role_name, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_role_type (role_type)
- INDEX idx_is_active (is_active)
- INDEX idx_data_access_level (data_access_level)

Constraints:
- fk_lms_role_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_role_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
```

```
Table: lms_user_role_assignment
Fields:
- id: UUID (Primary Key)
- user_id: UUID (Foreign Key to user)
- role_id: UUID (Foreign Key to lms_role_permission)
- company_id: UUID (Foreign Key to company)
- department_id: UUID (Foreign Key to department)
- team_id: UUID (Foreign Key to team)
- assigned_by_user_id: UUID (Foreign Key to user)
- assigned_date: TIMESTAMP (Auto)
- expiry_date: DATE
- is_active: BOOLEAN (Default: TRUE)
- assignment_notes: TEXT
- security_clearance_level: ENUM('Basic', 'Standard', 'Enhanced', 'Top Secret')
- lms_training_required: BOOLEAN (Default: FALSE)
- lms_training_status: ENUM('Not Required', 'Pending', 'Certified', 'Expired')
- instructional_design_certified: BOOLEAN (Default: FALSE)
- instructional_design_status: ENUM('Not Required', 'Pending', 'Certified', 'Expired')
- compliance_training_required: BOOLEAN (Default: FALSE)
- compliance_training_status: ENUM('Not Required', 'Pending', 'Completed', 'Expired')
- content_creation_permissions: JSON (Specific content creation permissions)
- instructor_permissions: JSON (Specific instructor permissions)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_user_role_company (user_id, role_id, company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_role_id (role_id)
- INDEX idx_company_id (company_id)
- INDEX idx_department_id (department_id)
- INDEX idx_team_id (team_id)
- INDEX idx_is_active (is_active)
- INDEX idx_expiry_date (expiry_date)
- INDEX idx_security_clearance_level (security_clearance_level)

Constraints:
- fk_lms_user_role_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_lms_user_role_role FOREIGN KEY (role_id) REFERENCES lms_role_permission(id)
- fk_lms_user_role_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_user_role_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_lms_user_role_team FOREIGN KEY (team_id) REFERENCES team(id)
- fk_lms_user_role_assigned_by FOREIGN KEY (assigned_by_user_id) REFERENCES user(id)
```

--- END OF SECTION 13.4.4 ---

## 13.4.5 LMS Integration & Audit Performance Schema

```
Table: lms_integration_monitoring
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- monitoring_date: DATE (Required)
- api_response_time_ms: INTEGER
- sync_success_rate: DECIMAL(5,2) (Percentage)
- data_accuracy_score: DECIMAL(5,2) (Percentage)
- error_rate: DECIMAL(5,2) (Percentage)
- throughput_requests_per_hour: INTEGER
- availability_percentage: DECIMAL(5,2)
- data_latency_minutes: INTEGER
- connection_drops: INTEGER (Default: 0)
- timeout_incidents: INTEGER (Default: 0)
- validation_failures: INTEGER (Default: 0)
- compliance_violations: INTEGER (Default: 0)
- manual_interventions: INTEGER (Default: 0)
- rollback_incidents: INTEGER (Default: 0)
- performance_score: DECIMAL(5,2) (Overall performance rating)
- sla_compliance: BOOLEAN (Default: TRUE)
- critical_incidents: INTEGER (Default: 0)
- warning_incidents: INTEGER (Default: 0)
- system_load_percentage: DECIMAL(5,2)
- memory_usage_mb: INTEGER
- cpu_usage_percentage: DECIMAL(5,2)
- network_latency_ms: INTEGER
- disk_io_wait_ms: INTEGER
- enrollment_processing_time_avg: DECIMAL(8,2)
- progress_sync_accuracy: DECIMAL(5,2)
- course_data_sync_time_avg: DECIMAL(8,2)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_monitoring_date (monitoring_date)
- INDEX idx_sync_success_rate (sync_success_rate)
- INDEX idx_data_accuracy_score (data_accuracy_score)
- INDEX idx_error_rate (error_rate)
- INDEX idx_performance_score (performance_score)
- INDEX idx_sla_compliance (sla_compliance)

Constraints:
- fk_lms_monitoring_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_monitoring_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- chk_positive_integers CHECK (api_response_time_ms >= 0 AND throughput_requests_per_hour >= 0 AND connection_drops >= 0)
- chk_score_ranges CHECK (sync_success_rate BETWEEN 0 AND 100 AND data_accuracy_score BETWEEN 0 AND 100 AND error_rate BETWEEN 0 AND 100)
- chk_performance_range CHECK (performance_score BETWEEN 0 AND 100)
```

```
Table: lms_audit_trail
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- enrollment_id: UUID (Foreign Key to lms_course_enrollment)
- audit_type: ENUM('Data Sync', 'Configuration Change', 'Access Control', 'Security Incident', 'Compliance Check', 'Performance Issue', 'Course Enrollment', 'Progress Update', 'Content Management')
- action: ENUM('Create', 'Update', 'Delete', 'Activate', 'Deactivate', 'Sync', 'Export', 'Import', 'Approve', 'Reject', 'Enroll', 'Unenroll', 'Complete')
- entity_type: ENUM('LMS Config', 'Course Enrollment', 'Learning Progress', 'User Role', 'Employee Data', 'Content Data', 'Compliance Setting')
- entity_id: UUID
- old_values: JSON (Previous values before change)
- new_values: JSON (New values after change)
- field_changes: JSON (Specific field changes)
- action_reason: TEXT
- business_justification: TEXT
- impact_assessment: TEXT
- risk_level: ENUM('Low', 'Medium', 'High', 'Critical')
- compliance_impact: TEXT
- affected_employees: INTEGER (Default: 0)
- data_sensitivity_level: ENUM('Public', 'Internal', 'Confidential', 'Restricted', 'PII', 'Learning Data')
- regulatory_impact: ENUM('None', 'GDPR', 'Industry Standards', 'Company Policy', 'Educational Compliance')
- performed_by_user_id: UUID (Foreign Key to user)
- ip_address: VARCHAR(45)
- user_agent: TEXT
- session_id: VARCHAR(100)
- timestamp: TIMESTAMP (Auto)
- additional_context: JSON (Extra context information)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_enrollment_id (enrollment_id)
- INDEX idx_audit_type (audit_type)
- INDEX idx_action (action)
- INDEX idx_entity_type (entity_type)
- idx_risk_level (risk_level)
- idx_performed_by_user_id (performed_by_user_id)
- INDEX idx_timestamp (timestamp)
- INDEX idx_data_sensitivity_level (data_sensitivity_level)

Constraints:
- fk_lms_audit_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_audit_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_audit_enrollment FOREIGN KEY (enrollment_id) REFERENCES lms_course_enrollment(id)
- fk_lms_audit_performed_by FOREIGN KEY (performed_by_user_id) REFERENCES user(id)
- chk_affected_employees_positive CHECK (affected_employees >= 0)
```

--- END OF SECTION 13.4.5 ---

## 13.4.6 LMS Compliance & Reporting Schema

```
Table: lms_compliance_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- compliance_type: ENUM('SCORM', 'AICC', 'xAPI', 'LTI', 'GDPR', 'Industry Standards', 'Educational Compliance', 'Accessibility Standards', 'Data Privacy')
- jurisdiction: VARCHAR(100) (Required)
- compliance_code: VARCHAR(50) (Required, Indexed)
- regulation_name: VARCHAR(200) (Required)
- compliance_requirements: JSON (Specific compliance requirements)
- reporting_requirements: JSON (Reporting and disclosure requirements)
- notification_requirements: JSON (Employee notification requirements)
- data_retention_period: INTEGER (Days to retain data)
- audit_frequency: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Annually')
- certification_requirements: JSON (Certification and training requirements)
- documentation_requirements: JSON (Documentation and record-keeping)
- is_active: BOOLEAN (Default: TRUE)
- effective_date: DATE (Required)
- expiry_date: DATE
- last_updated_by_authority: DATE
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_compliance_type (compliance_type)
- idx_jurisdiction (jurisdiction)
- INDEX idx_compliance_code (compliance_code)
- idx_is_active (is_active)
- INDEX idx_effective_date (effective_date)

Constraints:
- fk_lms_compliance_config_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_compliance_config_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_compliance_config_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_compliance_config_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (data_retention_period > 0)
- chk_effective_order CHECK (expiry_date IS NULL OR expiry_date >= effective_date)
```

```
Table: lms_reporting_requirements
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- compliance_config_id: UUID (Foreign Key to lms_compliance_config)
- report_type: ENUM('SCORM Completion Report', 'xAPI Statement Report', 'LTI Usage Report', 'GDPR Compliance Report', 'Accessibility Audit', 'Learning Analytics', 'Custom Report')
- report_name: VARCHAR(200) (Required)
- report_description: TEXT
- reporting_frequency: ENUM('Real-time', 'Daily', 'Weekly', 'Monthly', 'Quarterly', 'Annually', 'On-demand')
- data_source: JSON (Data sources for the report)
- report_format: ENUM('PDF', 'Excel', 'CSV', 'XML', 'JSON')
- delivery_method: ENUM('Email', 'Portal', 'API', 'SFTP', 'Manual Download')
- recipient_roles: JSON (Roles that receive this report)
- distribution_list: JSON (Email distribution list)
- template_config: JSON (Report template configuration)
- scheduling_config: JSON (Automated scheduling settings)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- auto_generate: BOOLEAN (Default: FALSE)
- is_active: BOOLEAN (Default: TRUE)
- last_generated_at: TIMESTAMP
- next_generation_date: TIMESTAMP
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_compliance_config_id (compliance_config_id)
- INDEX idx_report_type (report_type)
- idx_reporting_frequency (reporting_frequency)
- idx_is_active (is_active)
- INDEX idx_last_generated_at (last_generated_at)
- INDEX idx_next_generation_date (next_generation_date)

Constraints:
- fk_lms_reporting_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_reporting_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_reporting_compliance FOREIGN KEY (compliance_config_id) REFERENCES lms_compliance_config(id)
- fk_lms_reporting_approval_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_lms_reporting_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_reporting_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
```

--- END OF SECTION 13.4.6 ---

## 13.4.7 LMS Analytics & Insights Schema

```
Table: lms_analytics_dashboard
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- dashboard_name: VARCHAR(200) (Required)
- dashboard_type: ENUM('Executive', 'Manager', 'LMS Admin', 'Instructor', 'Compliance', 'Learning Analytics')
- analysis_period: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly', 'Yearly', 'YTD', 'Custom')
- report_date: DATE (Required)
- total_enrollments: INTEGER (Default: 0)
- active_enrollments: INTEGER (Default: 0)
- completed_enrollments: INTEGER (Default: 0)
- in_progress_enrollments: INTEGER (Default: 0)
- dropped_enrollments: INTEGER (Default: 0)
- total_learning_hours: DECIMAL(10,2) (Default: 0.00)
- average_completion_time_hours: DECIMAL(8,2) (Default: 0.00)
- completion_rate: DECIMAL(5,2) (Default: 0.00)
- engagement_score: DECIMAL(5,2) (Default: 0.00)
- skill_acquisition_rate: DECIMAL(5,2) (Default: 0.00)
- certification_achievement_rate: DECIMAL(5,2) (Default: 0.00)
- compliance_training_completion: DECIMAL(5,2) (Default: 0.00)
- learning_effectiveness_score: DECIMAL(5,2) (Default: 0.00)
- instructor_performance_score: DECIMAL(5,2) (Default: 0.00)
- content_utilization_rate: DECIMAL(5,2) (Default: 0.00)
- learning_cost_per_employee: DECIMAL(10,2) (Default: 0.00)
- roi_analysis: DECIMAL(5,2) (Default: 0.00)
- additional_metrics: JSON (Other KPIs and breakdowns)
- trend_data: JSON (Historical trend information)
- department_breakdown: JSON (Department-wise learning data)
- course_type_breakdown: JSON (Course type performance data)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_dashboard_type (dashboard_type)
- INDEX idx_analysis_period (analysis_period)
- INDEX idx_report_date (report_date)
- INDEX idx_total_enrollments (total_enrollments)
- INDEX idx_completion_rate (completion_rate)
- INDEX idx_engagement_score (engagement_score)

Constraints:
- fk_lms_analytics_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_analytics_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_analytics_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_positive_counts CHECK (total_enrollments >= 0 AND active_enrollments >= 0 AND completed_enrollments >= 0)
- chk_positive_hours CHECK (total_learning_hours >= 0 AND average_completion_time_hours >= 0)
- chk_percentage_ranges CHECK (completion_rate BETWEEN 0 AND 100 AND engagement_score BETWEEN 0 AND 100)
```

```
Table: lms_learning_effectiveness
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- analysis_date: DATE (Required)
- effectiveness_category: ENUM('Course Completion', 'Skill Acquisition', 'Knowledge Retention', 'Performance Impact', 'Behavior Change', 'Career Advancement')
- department_id: UUID (Foreign Key to department)
- course_category: ENUM('Leadership', 'Technical', 'Compliance', 'Soft Skills', 'Safety', 'Onboarding', 'Professional Development')
- effectiveness_score: DECIMAL(5,2) (Required)
- baseline_score: DECIMAL(5,2)
- improvement_score: DECIMAL(5,2)
- enrollment_count: INTEGER (Default: 0)
- completion_count: INTEGER (Default: 0)
- average_score_achieved: DECIMAL(5,2)
- time_to_competency_days: INTEGER
- knowledge_retention_rate: DECIMAL(5,2)
- skill_application_rate: DECIMAL(5,2)
- performance_improvement: DECIMAL(5,2)
- career_progression_rate: DECIMAL(5,2)
- effectiveness_trend: ENUM('Improving', 'Declining', 'Stable', 'Volatile')
- benchmark_comparison: DECIMAL(5,2)
- cost_effectiveness: DECIMAL(5,2)
- learner_satisfaction_score: DECIMAL(5,2)
- instructor_effectiveness: DECIMAL(5,2)
- content_quality_score: DECIMAL(5,2)
- learning_outcomes: JSON (Specific learning outcomes achieved)
- business_impact: JSON (Business impact metrics)
- improvement_opportunities: JSON
- roi_analysis: JSON (Return on investment analysis)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_analysis_date (analysis_date)
- INDEX idx_effectiveness_category (effectiveness_category)
- INDEX idx_department_id (department_id)
- INDEX idx_course_category (course_category)
- INDEX idx_effectiveness_score (effectiveness_score)
- INDEX idx_improvement_score (improvement_score)

Constraints:
- fk_lms_effectiveness_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_effectiveness_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_effectiveness_department FOREIGN KEY (department_id) REFERENCES department(id)
- fk_lms_effectiveness_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_score_range CHECK (effectiveness_score BETWEEN 0 AND 100 AND improvement_score BETWEEN 0 AND 100)
- chk_positive_counts CHECK (enrollment_count >= 0 AND completion_count >= 0)
```

--- END OF SECTION 13.4.7 ---

## 13.4.8 LMS Communication & Notification Schema

```
Table: lms_notification_template
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- template_name: VARCHAR(200) (Required, Unique, Indexed)
- template_type: ENUM('Course Enrollment', 'Progress Update', 'Completion Reminder', 'Certificate Issued', 'Compliance Alert', 'Learning Path Assignment', 'Instructor Notification', 'System Maintenance')
- notification_category: ENUM('Information', 'Warning', 'Error', 'Success', 'Reminder', 'Alert', 'Compliance', 'Learning Update')
- subject_template: VARCHAR(500) (Required)
- body_template: TEXT (Required)
- template_variables: JSON (Variables that can be substituted)
- delivery_channels: JSON (Email, SMS, In-App, Push, Webhook, LMS Notification)
- priority_level: ENUM('Low', 'Normal', 'High', 'Critical', 'Emergency')
- is_active: BOOLEAN (Default: TRUE)
- is_default: BOOLEAN (Default: FALSE)
- language_code: VARCHAR(10) (Default: 'en')
- html_enabled: BOOLEAN (Default: TRUE)
- attachment_templates: JSON (Template for attachments)
- approval_required: BOOLEAN (Default: FALSE)
- approval_workflow_id: UUID (Foreign Key to approval_workflow)
- approved_by_user_id: UUID (Foreign Key to user)
- approved_at: TIMESTAMP
- version: INTEGER (Default: 1)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_template_company_name (template_name, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_template_type (template_type)
- INDEX idx_notification_category (notification_category)
- INDEX idx_priority_level (priority_level)
- INDEX idx_is_active (is_active)
- INDEX idx_is_default (is_default)
- INDEX idx_language_code (language_code)
- INDEX idx_approval_workflow_id (approval_workflow_id)

Constraints:
- fk_lms_template_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_template_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_template_approval_workflow FOREIGN KEY (approval_workflow_id) REFERENCES approval_workflow(id)
- fk_lms_template_approved_by FOREIGN KEY (approved_by_user_id) REFERENCES user(id)
- fk_lms_template_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_template_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (version > 0)
```

```
Table: lms_notification_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- template_id: UUID (Foreign Key to lms_notification_template)
- enrollment_id: UUID (Foreign Key to lms_course_enrollment)
- notification_type: ENUM('Course Enrollment', 'Progress Update', 'Completion Reminder', 'Certificate Issued', 'Compliance Alert', 'Learning Path Assignment', 'System Error')
- recipient_type: ENUM('Employee', 'User', 'Role', 'Department', 'All Learners', 'Instructor', 'Manager', 'LMS Admin')
- recipient_id: UUID
- recipient_email: VARCHAR(200)
- recipient_phone: VARCHAR(50)
- delivery_channel: ENUM('Email', 'SMS', 'In-App', 'Push Notification', 'Webhook', 'LMS Notification')
- priority_level: ENUM('Low', 'Normal', 'High', 'Critical', 'Emergency')
- status: ENUM('Pending', 'Sent', 'Delivered', 'Failed', 'Bounced', 'Opened', 'Clicked', 'Returned')
- subject: VARCHAR(500)
- message_body: TEXT
- template_variables_used: JSON (Actual values substituted)
- attachment_urls: JSON (Links to attachments)
- sent_at: TIMESTAMP
- delivered_at: TIMESTAMP
- opened_at: TIMESTAMP
- clicked_at: TIMESTAMP
- failed_at: TIMESTAMP
- failure_reason: TEXT
- retry_count: INTEGER (Default: 0)
- max_retries: INTEGER (Default: 3)
- next_retry_at: TIMESTAMP
- external_message_id: VARCHAR(200) (ID from external service)
- response_data: JSON (Response from notification service)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_template_id (template_id)
- INDEX idx_enrollment_id (enrollment_id)
- INDEX idx_notification_type (notification_type)
- INDEX idx_recipient_type (recipient_type)
- INDEX idx_recipient_id (recipient_id)
- INDEX idx_delivery_channel (delivery_channel)
- INDEX idx_priority_level (priority_level)
- INDEX idx_status (status)
- INDEX idx_sent_at (sent_at)
- INDEX idx_retry_count (retry_count)

Constraints:
- fk_lms_notification_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_notification_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_notification_template FOREIGN KEY (template_id) REFERENCES lms_notification_template(id)
- fk_lms_notification_enrollment FOREIGN KEY (enrollment_id) REFERENCES lms_course_enrollment(id)
- fk_lms_notification_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retry_valid CHECK (retry_count >= 0 AND retry_count <= max_retries)
```

--- END OF SECTION 13.4.8 ---

## 13.4.9 LMS User Preferences & Personalization Schema

```
Table: lms_user_preferences
Fields:
- id: UUID (Primary Key)
- user_id: UUID (Foreign Key to user)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- dashboard_layout: JSON (Preferred dashboard widget arrangement)
- default_dashboard_view: ENUM('Executive', 'Manager', 'LMS Admin', 'Instructor', 'Learner')
- notification_preferences: JSON (Email, SMS, In-App notification settings)
- report_preferences: JSON (Default report formats and filters)
- data_export_format: ENUM('PDF', 'Excel', 'CSV', 'JSON')
- timezone: VARCHAR(50) (Default: 'UTC')
- date_format: VARCHAR(20) (Default: 'YYYY-MM-DD')
- time_format: ENUM('12-hour', '24-hour') (Default: '24-hour')
- language_preference: VARCHAR(10) (Default: 'en')
- currency_display: VARCHAR(10) (Default: 'USD')
- decimal_places: INTEGER (Default: 2)
- auto_refresh_interval: INTEGER (Default: 300) (Seconds)
- default_date_range: ENUM('Today', 'This Week', 'This Month', 'This Quarter', 'This Year')
- favorite_courses: JSON (Quick access to frequently accessed courses)
- quick_filters: JSON (Saved filter configurations)
- alert_thresholds: JSON (Personal alert thresholds)
- email_digest_frequency: ENUM('Never', 'Daily', 'Weekly', 'Monthly')
- mobile_app_preferences: JSON (Mobile-specific settings)
- accessibility_settings: JSON (Screen reader, high contrast, etc.)
- learning_path_preferences: JSON (Learning path display settings)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_user_preferences_company_user (user_id, company_id)
- INDEX idx_user_id (user_id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_default_dashboard_view (default_dashboard_view)
- INDEX idx_language_preference (language_preference)
- INDEX idx_timezone (timezone)

Constraints:
- fk_lms_user_preferences_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_lms_user_preferences_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_user_preferences_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- chk_positive_intervals CHECK (auto_refresh_interval > 0 AND decimal_places >= 0)
```

```
Table: lms_personalized_dashboard
Fields:
- id: UUID (Primary Key)
- user_id: UUID (Foreign Key to user)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- dashboard_name: VARCHAR(200) (Required)
- dashboard_type: ENUM('Custom', 'Executive', 'Manager', 'LMS Admin', 'Instructor', 'Learner')
- is_default: BOOLEAN (Default: FALSE)
- is_public: BOOLEAN (Default: FALSE)
- widget_configuration: JSON (Layout and widget settings)
- data_filters: JSON (Default data filters applied)
- refresh_interval: INTEGER (Default: 300) (Seconds)
- auto_refresh_enabled: BOOLEAN (Default: TRUE)
- drill_down_permissions: JSON (Allowed drill-down levels)
- export_permissions: JSON (Allowed export formats)
- sharing_permissions: JSON (Who can view this dashboard)
- learning_metrics_focus: JSON (Specific learning metrics to highlight)
- course_completion_tracking: JSON (Course completion tracking settings)
- skill_development_focus: JSON (Skill development focus areas)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_user_id (user_id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_dashboard_type (dashboard_type)
- INDEX idx_is_default (is_default)
- INDEX idx_is_public (is_public)
- INDEX idx_created_by_user_id (created_by_user_id)
- INDEX idx_updated_by_user_id (updated_by_user_id)

Constraints:
- fk_lms_dashboard_user FOREIGN KEY (user_id) REFERENCES user(id)
- fk_lms_dashboard_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_dashboard_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_dashboard_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_dashboard_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_refresh_interval_positive CHECK (refresh_interval > 0)
```

--- END OF SECTION 13.4.9 ---

## 13.4.10 LMS Mobile & API Access Schema

```
Table: lms_mobile_app_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- app_version: VARCHAR(20) (Required)
- platform: ENUM('iOS', 'Android', 'Web', 'Hybrid')
- build_number: VARCHAR(20) (Required)
- release_date: DATE (Required)
- is_current: BOOLEAN (Default: FALSE)
- is_mandatory: BOOLEAN (Default: FALSE)
- min_supported_version: VARCHAR(20)
- features_enabled: JSON (Mobile-specific LMS features)
- api_endpoints: JSON (Mobile-specific API endpoints)
- offline_capabilities: JSON (Offline functionality support)
- security_config: JSON (Mobile security settings)
- push_notification_enabled: BOOLEAN (Default: TRUE)
- biometric_auth_enabled: BOOLEAN (Default: TRUE)
- offline_data_retention_days: INTEGER (Default: 30)
- mobile_dashboard_config: JSON (Mobile dashboard layout)
- quick_actions: JSON (Mobile quick action buttons)
- data_sync_settings: JSON (Mobile data sync preferences)
- course_access_enabled: BOOLEAN (Default: TRUE)
- progress_tracking_enabled: BOOLEAN (Default: TRUE)
- assessment_access_enabled: BOOLEAN (Default: TRUE)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_app_version (app_version)
- INDEX idx_platform (platform)
- idx_is_current (is_current)
- idx_is_mandatory (is_mandatory)
- INDEX idx_release_date (release_date)

Constraints:
- fk_lms_mobile_app_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_mobile_app_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_mobile_app_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (offline_data_retention_days >= 0)
```

```
Table: lms_api_access
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- api_key: VARCHAR(200) (Required, Unique, Indexed)
- api_name: VARCHAR(200) (Required)
- api_description: TEXT
- api_version: VARCHAR(20) (Default: 'v1')
- endpoint_url: VARCHAR(500) (Required)
- authentication_type: ENUM('API Key', 'OAuth 2.0', 'JWT', 'Basic Auth', 'LTI')
- rate_limit_per_hour: INTEGER (Default: 1000)
- rate_limit_per_day: INTEGER (Default: 10000)
- allowed_methods: JSON (HTTP methods allowed)
- allowed_ips: JSON (IP whitelist)
- webhook_url: VARCHAR(500)
- webhook_events: JSON (Events that trigger webhooks)
- is_active: BOOLEAN (Default: TRUE)
- is_internal: BOOLEAN (Default: FALSE)
- access_level: ENUM('Read Only', 'Read Write', 'Admin', 'Full Access')
- data_access_scope: JSON (What data can be accessed)
- scorm_compliance_required: BOOLEAN (Default: FALSE)
- xapi_access_allowed: BOOLEAN (Default: FALSE)
- lti_integration_enabled: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- last_used_at: TIMESTAMP
- usage_count: INTEGER (Default: 0)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_api_key (api_key)
- INDEX idx_api_version (api_version)
- INDEX idx_is_active (is_active)
- INDEX idx_is_internal (is_internal)
- INDEX idx_access_level (access_level)
- INDEX idx_last_used_at (last_used_at)
- INDEX idx_usage_count (usage_count)

Constraints:
- fk_lms_api_access_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_api_access_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_api_access_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_rate_limits_positive CHECK (rate_limit_per_hour > 0 AND rate_limit_per_day > 0)
- chk_usage_positive CHECK (usage_count >= 0)
```

--- END OF SECTION 13.4.10 ---

## 13.4.11 LMS Security & Compliance Schema

```
Table: lms_security_config
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- security_level: ENUM('Basic', 'Standard', 'Enhanced', 'High', 'Maximum')
- encryption_at_rest: BOOLEAN (Default: TRUE)
- encryption_in_transit: BOOLEAN (Default: TRUE)
- encryption_algorithm: VARCHAR(50) (Default: 'AES-256')
- data_masking_enabled: BOOLEAN (Default: TRUE)
- learning_data_protection_level: ENUM('Standard', 'Enhanced', 'Maximum')
- gdpr_compliance_enabled: BOOLEAN (Default: TRUE)
- access_logging_enabled: BOOLEAN (Default: TRUE)
- session_timeout_minutes: INTEGER (Default: 30)
- password_policy: JSON (Password complexity requirements)
- multi_factor_auth_required: BOOLEAN (Default: TRUE)
- ip_whitelist_enabled: BOOLEAN (Default: FALSE)
- allowed_ip_ranges: JSON (Whitelisted IP addresses)
- geo_fencing_enabled: BOOLEAN (Default: FALSE)
- allowed_countries: JSON (Geographic access restrictions)
- data_classification_policy: JSON (Data sensitivity classification)
- breach_detection_enabled: BOOLEAN (Default: TRUE)
- automated_backup_enabled: BOOLEAN (Default: TRUE)
- backup_retention_days: INTEGER (Default: 90)
- disaster_recovery_plan: JSON (DR procedures and contacts)
- security_audit_frequency: ENUM('Daily', 'Weekly', 'Monthly', 'Quarterly')
- penetration_testing_frequency: ENUM('Monthly', 'Quarterly', 'Semi-Annually', 'Annually')
- scorm_security_compliance: BOOLEAN (Default: FALSE)
- xapi_security_compliance: BOOLEAN (Default: FALSE)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_security_level (security_level)
- INDEX idx_encryption_at_rest (encryption_at_rest)
- INDEX idx_multi_factor_auth_required (multi_factor_auth_required)
- INDEX idx_ip_whitelist_enabled (ip_whitelist_enabled)
- INDEX idx_geo_fencing_enabled (geo_fencing_enabled)

Constraints:
- fk_lms_security_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_security_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_security_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_security_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_positive_intervals CHECK (session_timeout_minutes > 0 AND backup_retention_days > 0)
```

```
Table: lms_compliance_monitoring
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- compliance_type: ENUM('SCORM', 'AICC', 'xAPI', 'LTI', 'GDPR', 'Industry Standards', 'Educational Compliance', 'Accessibility Standards')
- monitoring_frequency: ENUM('Real-time', 'Hourly', 'Daily', 'Weekly', 'Monthly')
- last_check_date: TIMESTAMP
- next_check_date: TIMESTAMP
- compliance_status: ENUM('Compliant', 'Non-Compliant', 'Warning', 'Under Review', 'Exempt')
- compliance_score: DECIMAL(5,2) (Percentage)
- violations_detected: INTEGER (Default: 0)
- critical_violations: INTEGER (Default: 0)
- violations_resolved: INTEGER (Default: 0)
- open_violations: INTEGER (Default: 0)
- compliance_rules: JSON (Specific compliance rules being monitored)
- monitoring_results: JSON (Detailed monitoring results)
- remediation_actions: JSON (Actions taken to resolve violations)
- regulatory_updates: JSON (Recent regulatory changes)
- audit_trail: JSON (Compliance audit history)
- risk_assessment: JSON (Current risk level and factors)
- compliance_reports: JSON (Generated compliance reports)
- notification_settings: JSON (Alert preferences for violations)
- auto_remediation_enabled: BOOLEAN (Default: FALSE)
- escalation_rules: JSON (When to escalate compliance issues)
- scorm_compliance_logs: JSON (SCORM-specific compliance requirements)
- xapi_compliance_logs: JSON (xAPI-specific compliance requirements)
- learning_data_monitoring: JSON (Learning data access and privacy monitoring)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_compliance_type (compliance_type)
- INDEX idx_monitoring_frequency (monitoring_frequency)
- INDEX idx_last_check_date (last_check_date)
- INDEX idx_next_check_date (next_check_date)
- INDEX idx_compliance_status (compliance_status)
- INDEX idx_compliance_score (compliance_score)
- INDEX idx_violations_detected (violations_detected)

Constraints:
- fk_lms_compliance_monitoring_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_compliance_monitoring_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_compliance_monitoring_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_compliance_monitoring_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_score_range CHECK (compliance_score BETWEEN 0 AND 100)
- chk_positive_violations CHECK (violations_detected >= 0 AND critical_violations >= 0)
```

--- END OF SECTION 13.4.11 ---

## 13.4.12 LMS Workflow & Process Automation Schema

```
Table: lms_workflow_definition
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- workflow_name: VARCHAR(200) (Required, Unique, Indexed)
- workflow_description: TEXT
- workflow_type: ENUM('Course Enrollment', 'Learning Path Assignment', 'Compliance Training', 'Certification Management', 'Progress Monitoring', 'Content Approval', 'Instructor Assignment')
- workflow_category: ENUM('Standard', 'Custom', 'Emergency', 'Compliance', 'Legal Review', 'Performance Review')
- trigger_events: JSON (Events that initiate this workflow)
- workflow_steps: JSON (Ordered sequence of workflow steps)
- approval_rules: JSON (Approval requirements and routing)
- escalation_rules: JSON (When and how to escalate)
- timeout_settings: JSON (Timeout configurations for each step)
- notification_rules: JSON (When to send notifications)
- conditional_logic: JSON (Conditional branching logic)
- integration_points: JSON (External system integrations)
- is_active: BOOLEAN (Default: TRUE)
- is_default: BOOLEAN (Default: FALSE)
- version: INTEGER (Default: 1)
- priority_level: ENUM('Low', 'Normal', 'High', 'Critical')
- max_execution_time_minutes: INTEGER (Default: 1440)
- retry_configuration: JSON (Retry settings for failed steps)
- error_handling: JSON (Error handling procedures)
- performance_metrics: JSON (KPIs and monitoring settings)
- compliance_checks: JSON (Compliance validation points)
- learning_objectives: JSON (Learning objectives alignment)
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_workflow_company_name (workflow_name, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_workflow_type (workflow_type)
- INDEX idx_workflow_category (workflow_category)
- INDEX idx_is_active (is_active)
- INDEX idx_is_default (is_default)
- INDEX idx_priority_level (priority_level)
- INDEX idx_version (version)

Constraints:
- fk_lms_workflow_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_workflow_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_workflow_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_workflow_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_version_positive CHECK (version > 0)
- chk_execution_time_positive CHECK (max_execution_time_minutes > 0)
```

```
Table: lms_workflow_execution
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- workflow_definition_id: UUID (Foreign Key to lms_workflow_definition)
- enrollment_id: UUID (Foreign Key to lms_course_enrollment)
- execution_id: VARCHAR(100) (Required, Unique, Indexed)
- execution_status: ENUM('Pending', 'In Progress', 'Completed', 'Failed', 'Cancelled', 'On Hold', 'Escalated')
- current_step: INTEGER (Default: 1)
- total_steps: INTEGER (Required)
- started_at: TIMESTAMP (Auto)
- completed_at: TIMESTAMP
- due_date: TIMESTAMP
- actual_duration_minutes: INTEGER
- initiator_user_id: UUID (Foreign Key to user)
- assigned_to_user_id: UUID (Foreign Key to user)
- step_history: JSON (History of completed steps)
- current_step_data: JSON (Data for current step)
- variables: JSON (Workflow variables and context)
- error_log: JSON (Error messages and stack traces)
- retry_count: INTEGER (Default: 0)
- max_retries: INTEGER (Default: 3)
- escalation_level: INTEGER (Default: 0)
- parent_execution_id: UUID (Foreign Key to lms_workflow_execution)
- child_executions: JSON (IDs of child workflow executions)
- performance_metrics: JSON (Execution performance data)
- completion_summary: JSON (Final execution summary)
- compliance_validation: JSON (Compliance check results)
- learning_outcomes: JSON (Learning outcomes achieved)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_execution_company_id (execution_id, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_workflow_definition_id (workflow_definition_id)
- INDEX idx_enrollment_id (enrollment_id)
- INDEX idx_execution_status (execution_status)
- INDEX idx_current_step (current_step)
- INDEX idx_started_at (started_at)
- INDEX idx_due_date (due_date)
- INDEX idx_initiator_user_id (initiator_user_id)
- INDEX idx_assigned_to_user_id (assigned_to_user_id)
- INDEX idx_parent_execution_id (parent_execution_id)

Constraints:
- fk_lms_execution_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_execution_workflow_definition FOREIGN KEY (workflow_definition_id) REFERENCES lms_workflow_definition(id)
- fk_lms_execution_enrollment FOREIGN KEY (enrollment_id) REFERENCES lms_course_enrollment(id)
- fk_lms_execution_initiator FOREIGN KEY (initiator_user_id) REFERENCES user(id)
- fk_lms_execution_assigned_to FOREIGN KEY (assigned_to_user_id) REFERENCES user(id)
- fk_lms_execution_parent FOREIGN KEY (parent_execution_id) REFERENCES lms_workflow_execution(id)
- chk_step_valid CHECK (current_step >= 1 AND current_step <= total_steps)
- chk_positive_values CHECK (total_steps > 0 AND actual_duration_minutes >= 0)
```

--- END OF SECTION 13.4.12 ---

## 13.4.13 LMS Data Archival & Retention Schema

```
Table: lms_retention_policy
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- policy_name: VARCHAR(200) (Required, Unique, Indexed)
- policy_type: ENUM('Legal Requirement', 'Company Policy', 'Industry Standard', 'Contractual Obligation', 'Educational Compliance', 'Data Privacy Regulation')
- data_category: ENUM('Enrollment Data', 'Learning Progress', 'Assessment Results', 'Content Data', 'User Interactions', 'Audit Logs', 'Compliance Data', 'Learning Analytics')
- retention_period_days: INTEGER (Required)
- retention_period_type: ENUM('Fixed Days', 'Years After Completion', 'Until Employee Separation', 'Indefinite', 'Until Course Expiration')
- archival_action: ENUM('Delete', 'Archive', 'Anonymize', 'Aggregate', 'Secure Delete')
- archival_location: ENUM('Cold Storage', 'Long-term Archive', 'Compliance Archive', 'Secure Delete', 'Cloud Archive')
- compliance_requirements: JSON (Legal and regulatory requirements)
- business_justification: TEXT
- auto_apply: BOOLEAN (Default: TRUE)
- is_active: BOOLEAN (Default: TRUE)
- effective_date: DATE (Required)
- expiry_date: DATE
- last_review_date: DATE
- next_review_date: DATE
- review_frequency_months: INTEGER (Default: 12)
- exceptions_allowed: BOOLEAN (Default: FALSE)
- exception_approval_required: BOOLEAN (Default: TRUE)
- notification_settings: JSON (Notifications before archival)
- gdpr_protection_required: BOOLEAN (Default: FALSE)
- educational_data_protection: BOOLEAN (Default: FALSE)
- data_disposal_method: ENUM('Secure Erase', 'Physical Destruction', 'Cryptographic Erase')
- created_by_user_id: UUID (Foreign Key to user)
- updated_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- UNIQUE KEY uk_lms_retention_company_name (policy_name, company_id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_policy_type (policy_type)
- INDEX idx_data_category (data_category)
- INDEX idx_retention_period_days (retention_period_days)
- INDEX idx_archival_action (archival_action)
- INDEX idx_is_active (is_active)
- INDEX idx_effective_date (effective_date)
- INDEX idx_next_review_date (next_review_date)

Constraints:
- fk_lms_retention_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_retention_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_retention_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- fk_lms_retention_updated_by FOREIGN KEY (updated_by_user_id) REFERENCES user(id)
- chk_retention_positive CHECK (retention_period_days > 0 AND review_frequency_months > 0)
- chk_effective_order CHECK (expiry_date IS NULL OR expiry_date >= effective_date)
```

```
Table: lms_archival_log
Fields:
- id: UUID (Primary Key)
- company_id: UUID (Foreign Key to company)
- lms_integration_id: UUID (Foreign Key to lms_integration_config)
- retention_policy_id: UUID (Foreign Key to lms_retention_policy)
- archival_batch_id: VARCHAR(100) (Required, Indexed)
- archival_date: DATE (Required)
- archival_action: ENUM('Archive', 'Delete', 'Anonymize', 'Aggregate', 'Secure Delete')
- data_type: ENUM('Enrollment Records', 'Learning Progress', 'Assessment Data', 'Content Data', 'User Interactions', 'Audit Logs', 'Compliance Data', 'Analytics Data')
- records_processed: INTEGER (Default: 0)
- records_archived: INTEGER (Default: 0)
- records_failed: INTEGER (Default: 0)
- archive_location: VARCHAR(500)
- archive_size_mb: DECIMAL(12,2)
- compression_ratio: DECIMAL(5,2)
- encryption_method: VARCHAR(50)
- retention_expiry_date: DATE
- verification_status: ENUM('Pending', 'Verified', 'Failed', 'Requires Review', 'Compliance Verified')
- verification_date: TIMESTAMP
- verification_details: JSON (Verification results and checksums)
- error_log: JSON (Errors encountered during archival)
- rollback_available: BOOLEAN (Default: FALSE)
- rollback_deadline: DATE
- compliance_attestation: BOOLEAN (Default: FALSE)
- attestation_by_user_id: UUID (Foreign Key to user)
- attestation_date: TIMESTAMP
- cost_savings: DECIMAL(12,2) (Estimated cost savings from archival)
- gdpr_compliance_verified: BOOLEAN (Default: FALSE)
- educational_compliance_verified: BOOLEAN (Default: FALSE)
- data_disposal_certificate: VARCHAR(500)
- learning_impact_assessment: JSON (Impact on learning analytics)
- created_by_user_id: UUID (Foreign Key to user)
- created_at: TIMESTAMP (Auto)
- updated_at: TIMESTAMP (Auto)

Indexes:
- PRIMARY KEY (id)
- INDEX idx_company_id (company_id)
- INDEX idx_lms_integration_id (lms_integration_id)
- INDEX idx_retention_policy_id (retention_policy_id)
- INDEX idx_archival_batch_id (archival_batch_id)
- INDEX idx_archival_date (archival_date)
- INDEX idx_archival_action (archival_action)
- INDEX idx_data_type (data_type)
- INDEX idx_verification_status (verification_status)
- INDEX idx_retention_expiry_date (retention_expiry_date)
- INDEX idx_attestation_by_user_id (attestation_by_user_id)

Constraints:
- fk_lms_archival_company FOREIGN KEY (company_id) REFERENCES company(id)
- fk_lms_archival_lms_integration FOREIGN KEY (lms_integration_id) REFERENCES lms_integration_config(id)
- fk_lms_archival_retention_policy FOREIGN KEY (retention_policy_id) REFERENCES lms_retention_policy(id)
- fk_lms_archival_attestation_by FOREIGN KEY (attestation_by_user_id) REFERENCES user(id)
- fk_lms_archival_created_by FOREIGN KEY (created_by_user_id) REFERENCES user(id)
- chk_positive_counts CHECK (records_processed >= 0 AND records_archived >= 0 AND records_failed >= 0)
- chk_archive_size_positive CHECK (archive_size_mb >= 0)
- chk_compression_ratio_valid CHECK (compression_ratio BETWEEN 0 AND 1)
```

--- END OF SECTION 13.4.13 ---
